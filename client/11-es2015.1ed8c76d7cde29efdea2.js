(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"8/JR":function(e,t,i){"use strict";var n=i("8T9/"),o=i("Ibf7");e.exports=function(e,t){var i=t||{},a={};return void 0===e&&(e={}),e.on=function(t,i){return a[t]?a[t].push(i):a[t]=[i],e},e.once=function(t,i){return i._once=!0,e.on(t,i),e},e.off=function(t,i){var n=arguments.length;if(1===n)delete a[t];else if(0===n)a={};else{var o=a[t];if(!o)return e;o.splice(o.indexOf(i),1)}return e},e.emit=function(){var t=n(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(a[t]||[]).slice(0);return function(){var a=n(arguments),c=this||e;if("error"===t&&!1!==i.throws&&!r.length)throw 1===a.length?a[0]:a;return r.forEach((function(n){i.async?o(n,a,c):n.apply(c,a),n._once&&e.off(t,n)})),e}},e}},"8T9/":function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},Gjsa:function(e,t){var i="function"==typeof setImmediate;e.exports=i?function(e){setImmediate(e)}:function(e){setTimeout(e,0)}},Ibf7:function(e,t,i){"use strict";var n=i("Gjsa");e.exports=function(e,t,i){e&&n((function(){e.apply(i||null,t||[])}))}},PzH3:function(e,t,i){"use strict";var n=i("bBst"),o=i("Ys8N"),a=global.document,r=function(e,t,i,n){return e.addEventListener(t,i,n)},c=function(e,t,i,n){return e.removeEventListener(t,i,n)},s=[];function l(e,t,i){var n=function(e,t,i){var n,o;for(n=0;n<s.length;n++)if((o=s[n]).element===e&&o.type===t&&o.fn===i)return n}(e,t,i);if(n){var o=s[n].wrapper;return s.splice(n,1),o}}global.addEventListener||(r=function(e,t,i){return e.attachEvent("on"+t,function(e,t,i){var n=l(e,t,i)||function(e,t,i){return function(t){var n=t||global.event;n.target=n.target||n.srcElement,n.preventDefault=n.preventDefault||function(){n.returnValue=!1},n.stopPropagation=n.stopPropagation||function(){n.cancelBubble=!0},n.which=n.which||n.keyCode,i.call(e,n)}}(e,0,i);return s.push({wrapper:n,element:e,type:t,fn:i}),n}(e,t,i))},c=function(e,t,i){var n=l(e,t,i);if(n)return e.detachEvent("on"+t,n)}),e.exports={add:r,remove:c,fabricate:function(e,t,i){var r=-1===o.indexOf(t)?new n(t,{detail:i}):function(){var e;return a.createEvent?(e=a.createEvent("Event")).initEvent(t,!0,!0):a.createEventObject&&(e=a.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}}},YS7c:function(e,t,i){"use strict";var n=i("8/JR"),o=i("PzH3"),a=i("n6yW"),r=document,c=r.documentElement;function s(e,t,i,n){global.navigator.pointerEnabled?o[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],n):global.navigator.msPointerEnabled?o[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],n):(o[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],n),o[t](e,i,n))}function l(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function d(e){var t=e.getBoundingClientRect();return{left:t.left+u("scrollLeft","pageXOffset"),top:t.top+u("scrollTop","pageYOffset")}}function u(e,t){return void 0!==global[t]?global[t]:c.clientHeight?c[e]:r.body[e]}function h(e,t,i){var n,o=e||{},a=o.className;return o.className+=" gu-hide",n=r.elementFromPoint(t,i),o.className=a,n}function m(){return!1}function p(){return!0}function f(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function b(e){return e.parentNode===r?null:e.parentNode}function v(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||e(b(t)))}(e)}function k(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function y(e,t){var i=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in i)&&n[e]in i&&(e=n[e]),i[e]}e.exports=function(e,t){var i,u,w,S,x,C,M,I,O,_,E,V=arguments.length;1===V&&!1===Array.isArray(e)&&(t=e,e=[]);var D,T=null,G=t||{};void 0===G.moves&&(G.moves=p),void 0===G.accepts&&(G.accepts=p),void 0===G.invalid&&(G.invalid=U),void 0===G.containers&&(G.containers=e||[]),void 0===G.isContainer&&(G.isContainer=m),void 0===G.copy&&(G.copy=!1),void 0===G.copySortSource&&(G.copySortSource=!1),void 0===G.revertOnSpill&&(G.revertOnSpill=!1),void 0===G.removeOnSpill&&(G.removeOnSpill=!1),void 0===G.direction&&(G.direction="vertical"),void 0===G.ignoreInputTextSelection&&(G.ignoreInputTextSelection=!0),void 0===G.mirrorContainer&&(G.mirrorContainer=r.body);var B=n({containers:G.containers,start:Y,end:q,cancel:Z,remove:Q,destroy:P,canMove:X,dragging:!1});return!0===G.removeOnSpill&&B.on("over",oe).on("out",ae),N(),B;function F(e){return-1!==B.containers.indexOf(e)||G.isContainer(e)}function N(e){var t=e?"remove":"add";s(c,t,"mousedown",R),s(c,t,"mouseup",K)}function L(e){s(c,e?"remove":"add","mousemove",$)}function j(e){var t=e?"remove":"add";o[t](c,"selectstart",A),o[t](c,"click",A)}function P(){N(!0),K({})}function A(e){D&&e.preventDefault()}function R(e){if(C=e.clientX,M=e.clientY,1===l(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,i=H(t);i&&(D=i,L(),"mousedown"===e.type&&(v(t)?t.focus():e.preventDefault()))}}function $(e){if(D)if(0!==l(e)){if(void 0===e.clientX||e.clientX!==C||void 0===e.clientY||e.clientY!==M){if(G.ignoreInputTextSelection){var t=y("clientX",e),i=y("clientY",e);if(v(r.elementFromPoint(t,i)))return}var n=D;L(!0),j(),q(),W(n);var o=d(w);S=y("pageX",e)-o.left,x=y("pageY",e)-o.top,a.add(_||w,"gu-transit"),re(),ne(e)}}else K({})}function H(e){if(!(B.dragging&&i||F(e))){for(var t=e;b(e)&&!1===F(b(e));){if(G.invalid(e,t))return;if(!(e=b(e)))return}var n=b(e);if(n&&!G.invalid(e,t)&&G.moves(e,n,t,k(e)))return{item:e,source:n}}}function X(e){return!!H(e)}function Y(e){var t=H(e);t&&W(t)}function W(e){de(e.item,e.source)&&(_=e.item.cloneNode(!0),B.emit("cloned",_,e.item,"copy")),u=e.source,w=e.item,I=O=k(e.item),B.dragging=!0,B.emit("drag",w,u)}function U(){return!1}function q(){if(B.dragging){var e=_||w;J(e,b(e))}}function z(){D=!1,L(!0),j(!0)}function K(e){if(z(),B.dragging){var t=_||w,n=y("clientX",e),o=y("clientY",e),a=ie(h(i,n,o),n,o);a&&(_&&G.copySortSource||!_||a!==u)?J(t,a):G.removeOnSpill?Q():Z()}}function J(e,t){var i=b(e);_&&G.copySortSource&&t===u&&i.removeChild(w),te(t)?B.emit("cancel",e,u,u):B.emit("drop",e,t,u,O),ee()}function Q(){if(B.dragging){var e=_||w,t=b(e);t&&t.removeChild(e),B.emit(_?"cancel":"remove",e,t,u),ee()}}function Z(e){if(B.dragging){var t=arguments.length>0?e:G.revertOnSpill,i=_||w,n=b(i),o=te(n);!1===o&&t&&(_?n&&n.removeChild(_):u.insertBefore(i,I)),o||t?B.emit("cancel",i,u,u):B.emit("drop",i,n,u,O),ee()}}function ee(){var e=_||w;z(),ce(),e&&a.rm(e,"gu-transit"),E&&clearTimeout(E),B.dragging=!1,T&&B.emit("out",e,T,u),B.emit("dragend",e),u=w=_=I=O=E=T=null}function te(e,t){var n;return n=void 0!==t?t:i?O:k(_||w),e===u&&n===I}function ie(e,t,i){for(var n=e;n&&!o();)n=b(n);return n;function o(){if(!1===F(n))return!1;var o=se(n,e),a=le(n,o,t,i);return!!te(n,a)||G.accepts(w,n,u,a)}}function ne(e){if(i){e.preventDefault();var t=y("clientX",e),n=y("clientY",e),o=n-x;i.style.left=t-S+"px",i.style.top=o+"px";var a=_||w,r=h(i,t,n),c=ie(r,t,n),s=null!==c&&c!==T;(s||null===c)&&(T&&p("out"),T=c,s&&p("over"));var l=b(a);if(c!==u||!_||G.copySortSource){var d,m=se(c,r);if(null!==m)d=le(c,m,t,n);else{if(!0!==G.revertOnSpill||_)return void(_&&l&&l.removeChild(a));d=I,c=u}(null===d&&s||d!==a&&d!==k(a))&&(O=d,c.insertBefore(a,d),B.emit("shadow",a,c,u))}else l&&l.removeChild(a)}function p(e){B.emit(e,a,T,u)}}function oe(e){a.rm(e,"gu-hide")}function ae(e){B.dragging&&a.add(e,"gu-hide")}function re(){if(!i){var e=w.getBoundingClientRect();(i=w.cloneNode(!0)).style.width=f(e)+"px",i.style.height=g(e)+"px",a.rm(i,"gu-transit"),a.add(i,"gu-mirror"),G.mirrorContainer.appendChild(i),s(c,"add","mousemove",ne),a.add(G.mirrorContainer,"gu-unselectable"),B.emit("cloned",i,w,"mirror")}}function ce(){i&&(a.rm(G.mirrorContainer,"gu-unselectable"),s(c,"remove","mousemove",ne),b(i).removeChild(i),i=null)}function se(e,t){for(var i=t;i!==e&&b(i)!==e;)i=b(i);return i===c?null:i}function le(e,t,i,n){var o,a="horizontal"===G.direction;return t!==e?(o=t.getBoundingClientRect(),(a?i>o.left+f(o)/2:n>o.top+g(o)/2)?k(t):t):function(){var t,o,r,c=e.children.length;for(t=0;t<c;t++){if(r=(o=e.children[t]).getBoundingClientRect(),a&&r.left+r.width/2>i)return o;if(!a&&r.top+r.height/2>n)return o}return null}()}function de(e,t){return"boolean"==typeof G.copy?G.copy:G.copy(e,t)}}},Ys8N:function(e,t,i){"use strict";var n=[],o="",a=/^on/;for(o in global)a.test(o)&&n.push(o.slice(2));e.exports=n},bBst:function(e,t){var i=global.CustomEvent;e.exports=function(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}()?i:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}},fS6x:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),o=i("tyNb"),a=i("bSwM"),r=i("QibW"),c=i("qFsG"),s=i("lDzL"),l=i("NFeN"),d=i("bTqV"),u=i("Wp6s"),h=i("f0Cb"),m=i("wZkO"),p=i("MutI"),f=i("YUcS"),g=i("aYsj"),b=i("kmnG"),v=i("d3UM"),k=i("3Pt+"),y=i("1jcm"),w=i("Qu3c"),S=i("PCNd"),x=i("gU78"),C=i("3sEA"),M=i("kwbH"),I=i("Nptc");class O{constructor(e,t,i,n,o,a){this._id=e,this.item=t,this.deposit=i,this.cant=n,this.cantMin=o,this.onOrder=a}}var _=i("AASI"),E=i("YS7c"),V=i.n(E),D=i("fXoL"),T=i("XNiG"),G=i("quSY"),B=i("pLZG"),F=i("lJxs");class N{constructor(e,t,i){this.name=e,this.drake=t,this.options=i,this.initEvents=!1}}const L={Cancel:"cancel",Cloned:"cloned",Drag:"drag",DragEnd:"dragend",Drop:"drop",Out:"out",Over:"over",Remove:"remove",Shadow:"shadow",DropModel:"dropModel",RemoveModel:"removeModel"},j=Object.keys(L).map(e=>L[e]),P=V.a||E;class A{constructor(e=P){this.build=e}}const R=(e,t,i)=>n=>n.pipe(Object(B.a)(({event:i,name:n})=>i===e&&(void 0===t||n===t)),Object(F.a)(({name:e,args:t})=>i(e,t))),$=(e,[t,i,n])=>({name:e,el:t,container:i,source:n});let H=(()=>{class e{constructor(e=null){this.drakeFactory=e,this.dispatch$=new T.a,this.drag=e=>this.dispatch$.pipe(R(L.Drag,e,(e,[t,i])=>({name:e,el:t,source:i}))),this.dragend=e=>this.dispatch$.pipe(R(L.DragEnd,e,(e,[t])=>({name:e,el:t}))),this.drop=e=>this.dispatch$.pipe(R(L.Drop,e,(e,[t,i,n,o])=>({name:e,el:t,target:i,source:n,sibling:o}))),this.elContainerSource=e=>t=>this.dispatch$.pipe(R(e,t,$)),this.cancel=this.elContainerSource(L.Cancel),this.remove=this.elContainerSource(L.Remove),this.shadow=this.elContainerSource(L.Shadow),this.over=this.elContainerSource(L.Over),this.out=this.elContainerSource(L.Out),this.cloned=e=>this.dispatch$.pipe(R(L.Cloned,e,(e,[t,i,n])=>({name:e,clone:t,original:i,cloneType:n}))),this.dropModel=e=>this.dispatch$.pipe(R(L.DropModel,e,(e,[t,i,n,o,a,r,c,s,l])=>({name:e,el:t,target:i,source:n,sibling:o,item:a,sourceModel:r,targetModel:c,sourceIndex:s,targetIndex:l}))),this.removeModel=e=>this.dispatch$.pipe(R(L.RemoveModel,e,(e,[t,i,n,o,a,r])=>({name:e,el:t,container:i,source:n,item:o,sourceModel:a,sourceIndex:r}))),this.groups={},null===this.drakeFactory&&(this.drakeFactory=new A)}add(e){if(this.find(e.name))throw new Error('Group named: "'+e.name+'" already exists.');return this.groups[e.name]=e,this.handleModels(e),this.setupEvents(e),e}find(e){return this.groups[e]}destroy(e){let t=this.find(e);t&&(t.drake&&t.drake.destroy(),delete this.groups[e])}createGroup(e,t){return this.add(new N(e,this.drakeFactory.build([],t),t))}handleModels({name:e,drake:t,options:i}){let n,o,a;t.on("remove",(i,n,a)=>{if(!t.models)return;let r=t.models[t.containers.indexOf(a)];r=r.slice(0);const c=r.splice(o,1)[0];this.dispatch$.next({event:L.RemoveModel,name:e,args:[i,n,a,c,r,o]})}),t.on("drag",(e,i)=>{t.models&&(n=e,o=this.domIndexOf(e,i))}),t.on("drop",(r,c,s,l)=>{if(!t.models||!c)return;a=this.domIndexOf(r,c);let d,u=t.models[t.containers.indexOf(s)],h=t.models[t.containers.indexOf(c)];if(c===s)u=u.slice(0),d=u.splice(o,1)[0],u.splice(a,0,d),h=u;else{let e=n!==r;if(d=u[o],e){if(!i.copyItem)throw new Error("If you have enabled `copy` on a group, you must provide a `copyItem` function.");d=i.copyItem(d)}if(e||(u=u.slice(0),u.splice(o,1)),h=h.slice(0),h.splice(a,0,d),e)try{c.removeChild(r)}catch(m){}}this.dispatch$.next({event:L.DropModel,name:e,args:[r,c,s,l,d,u,h,o,a]})})}setupEvents(e){if(e.initEvents)return;e.initEvents=!0;const t=e.name;j.forEach(i=>{e.drake.on(i,(...e)=>{this.dispatch$.next({event:i,name:t,args:e})})})}domIndexOf(e,t){return Array.prototype.indexOf.call(t.children,e)}}return e.\u0275fac=function(t){return new(t||e)(D.fc(A,8))},e.\u0275prov=D.Rb({token:e,factory:e.\u0275fac}),e})(),X=(()=>{class e{constructor(e,t){this.el=e,this.dragulaService=t,this.dragulaModelChange=new D.o}get container(){return this.el&&this.el.nativeElement}ngOnChanges(e){if(e&&e.dragula){const{previousValue:t,currentValue:i}=e.dragula;let n=!!i;!!t&&this.teardown(t),n&&this.setup()}else if(e&&e.dragulaModel){const{previousValue:t,currentValue:i}=e.dragulaModel,{drake:n}=this.group;if(this.dragula&&n){n.models=n.models||[];let e=n.models.indexOf(t);-1!==e?(n.models.splice(e,1),i&&n.models.splice(e,0,i)):i&&n.models.push(i)}}}setup(){let e=this.dragulaService.find(this.dragula);e||(e=this.dragulaService.createGroup(this.dragula,{})),(e=>{this.dragulaModel&&(e.drake.models?e.drake.models.push(this.dragulaModel):e.drake.models=[this.dragulaModel])})(e),e.drake.containers.push(this.container),this.subscribe(this.dragula),this.group=e}subscribe(e){this.subs=new G.a,this.subs.add(this.dragulaService.dropModel(e).subscribe(({source:e,target:t,sourceModel:i,targetModel:n})=>{e===this.el.nativeElement?this.dragulaModelChange.emit(i):t===this.el.nativeElement&&this.dragulaModelChange.emit(n)})),this.subs.add(this.dragulaService.removeModel(e).subscribe(({source:e,sourceModel:t})=>{e===this.el.nativeElement&&this.dragulaModelChange.emit(t)}))}teardown(e){this.subs&&this.subs.unsubscribe();const t=this.dragulaService.find(e);if(t){const e=t.drake.containers.indexOf(this.el.nativeElement);if(-1!==e&&t.drake.containers.splice(e,1),this.dragulaModel&&t.drake&&t.drake.models){let e=t.drake.models.indexOf(this.dragulaModel);-1!==e&&t.drake.models.splice(e,1)}}}ngOnDestroy(){this.teardown(this.dragula)}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(D.l),D.Vb(H))},e.\u0275dir=D.Qb({type:e,selectors:[["","dragula",""]],inputs:{dragula:"dragula",dragulaModel:"dragulaModel"},outputs:{dragulaModelChange:"dragulaModelChange"},features:[D.Eb()]}),e})(),Y=(()=>{class e{static forRoot(){return{ngModule:e,providers:[H]}}}return e.\u0275mod=D.Tb({type:e}),e.\u0275inj=D.Sb({factory:function(t){return new(t||e)}}),e})();var W=i("dNgK"),U=i("0IaG"),q=i("XiUz"),z=i("FKr1");function K(e,t){if(1&e){const e=D.cc();D.bc(0,"mat-option",13),D.jc("click",(function(i){D.Mc(e);const n=t.$implicit;return D.nc().setDeposit(n)})),D.Vc(1),D.ac()}if(2&e){const e=t.$implicit;D.uc("value",e.name),D.Gb(1),D.Wc(e.name)}}function J(e,t){if(1&e&&(D.bc(0,"mat-list-item",14),D.bc(1,"div",15),D.bc(2,"mat-icon",16),D.Vc(3,"adjust"),D.ac(),D.bc(4,"div",17),D.bc(5,"h4",18),D.Vc(6),D.ac(),D.bc(7,"p",19),D.Vc(8),D.ac(),D.ac(),D.ac(),D.ac()),2&e){const e=t.$implicit;D.uc("dragulaItem",e),D.Gb(6),D.Wc(e.name),D.Gb(2),D.Xc(" ",e.brand," ")}}function Q(e,t){if(1&e&&(D.bc(0,"mat-list-item",20),D.bc(1,"div",15),D.bc(2,"mat-icon",16),D.Vc(3,"adjust"),D.ac(),D.bc(4,"div",17),D.bc(5,"h4",18),D.Vc(6),D.ac(),D.bc(7,"p",19),D.Vc(8),D.ac(),D.ac(),D.ac(),D.ac()),2&e){const e=t.$implicit;D.Gb(6),D.Wc(e.name),D.Gb(2),D.Xc(" ",e.brand," ")}}let Z=(()=>{class e{constructor(e,t,i,n,o,a,r,c,s){this._userService=e,this._depositService=t,this._itemService=i,this._stockService=n,this.loader=o,this.snackBar=a,this.dialog=r,this.dragulaService=c,this.cdr=s,this.depName="",this.folders=[{name:"Backups",updated:new Date("2/2/17"),color:"primary"},{name:"Payments",updated:new Date("2/2/17"),color:"warn"},{name:"Orders",updated:new Date("2/20/17"),color:"accent"},{name:"Photos",updated:new Date("1/2/17"),color:"warn"},{name:"Recipes",updated:new Date("1/17/17"),color:"primary"},{name:"Work",updated:new Date("1/24/17"),color:"accent"}],this.notes=[{name:"Vacation Itinerary",updated:new Date("2/20/16")},{name:"Kitchen Remodel",updated:new Date("1/18/16")}],this.token=e.getToken(),this.identity=e.getIdentity(),c.dropModel().subscribe(e=>{let t=e.target.id,i=e.item;if(t!=e.source.id)if("in"==t){let e=new O("",i._id,this.depositSelected._id,0,0,!1);this._stockService.add(this.token,e).subscribe(e=>{},e=>{this.openSnackBar(e.message,"Cerrar")})}else this._stockService.deleteMany(this.token,{deposit:this.depositSelected._id,item:i._id}).subscribe(e=>{},e=>{this.openSnackBar(e.message,"Cerrar")})})}ngOnDestroy(){}ngOnInit(){this.getData()}getData(){this._itemService.getList(this.token,{company:this.identity.company._id}).subscribe(e=>{e.items&&(this.items=e.items,this.getDeposits())},e=>{this.openSnackBar(e.message,"Cerrar")})}getDeposits(){this._depositService.getList(this.token,{company:this.identity.company._id}).subscribe(e=>{e.deposits&&(this.deposits=e.deposits,this.setDeposit(this.deposits[0]))},e=>{this.openSnackBar(e.message,"Cerrar")})}setDeposit(e){this.depositSelected=e,this.depName=e.name,this._stockService.getList(this.token,{deposit:this.depositSelected._id}).subscribe(e=>{e.stocks&&(this.stocks=e.stocks,this.separateItems())},e=>{this.openSnackBar(e.message,"Cerrar")})}separateItems(){this.itemsIn=new Array,this.itemsOut=new Array,this.items.forEach(e=>{this.itemIsInStock(e)?this.itemsIn.push(e):this.itemsOut.push(e)})}itemIsInStock(e){let t=0;for(;t<this.stocks.length&&this.stocks[t].item._id!=e._id;)t+=1;return t!=this.stocks.length}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(x.a),D.Vb(_.a),D.Vb(M.a),D.Vb(I.a),D.Vb(C.a),D.Vb(W.a),D.Vb(U.b),D.Vb(H),D.Vb(D.h))},e.\u0275cmp=D.Pb({type:e,selectors:[["app-enable-item"]],features:[D.Fb([x.a,M.a,I.a,_.a,H])],decls:32,vars:6,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex","100","fxFlex.gt-xs","100"],[1,"p-0"],[1,""],[1,"card-title-text"],["appearance","fill"],[3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","50"],["dragula","item","id","out",3,"dragulaModel","dragulaModelChange"],["class","mb-1 dnd-item",3,"dragulaItem",4,"ngFor","ngForOf"],["dragula","item","id","in",3,"dragulaModel","dragulaModelChange"],["class","mb-1 dnd-item",4,"ngFor","ngForOf"],[3,"value","click"],[1,"mb-1","dnd-item",3,"dragulaItem"],["fxFlex","row","fxLayoutWrap","wrap"],["mat-list-icon","","color","primary",1,"mr-1","icon-circle"],["fxFlex","column"],["matLine","",1,"m-0","font-normal","fz-1"],["matLine","",1,"m-0"],[1,"mb-1","dnd-item"]],template:function(e,t){1&e&&(D.bc(0,"div",0),D.bc(1,"div",1),D.bc(2,"mat-card",2),D.bc(3,"mat-card-title",3),D.bc(4,"div",4),D.Vc(5,"Dep\xf3sito"),D.ac(),D.Wb(6,"mat-divider"),D.ac(),D.bc(7,"mat-card-content"),D.bc(8,"mat-form-field",5),D.bc(9,"mat-label"),D.Vc(10,"Dep\xf3sito"),D.ac(),D.bc(11,"mat-select",6),D.jc("ngModelChange",(function(e){return t.depName=e})),D.Tc(12,K,2,2,"mat-option",7),D.ac(),D.ac(),D.ac(),D.ac(),D.ac(),D.ac(),D.bc(13,"div",0),D.bc(14,"div",8),D.bc(15,"mat-card",2),D.bc(16,"mat-card-title",3),D.bc(17,"div",4),D.Vc(18,"Articulos no habilitados"),D.ac(),D.Wb(19,"mat-divider"),D.ac(),D.bc(20,"mat-card-content"),D.bc(21,"mat-list",9),D.jc("dragulaModelChange",(function(e){return t.itemsOut=e})),D.Tc(22,J,9,3,"mat-list-item",10),D.ac(),D.ac(),D.ac(),D.ac(),D.bc(23,"div",8),D.bc(24,"mat-card",2),D.bc(25,"mat-card-title",3),D.bc(26,"div",4),D.Vc(27,"Articulos habilitados"),D.ac(),D.Wb(28,"mat-divider"),D.ac(),D.bc(29,"mat-card-content"),D.bc(30,"mat-list",11),D.jc("dragulaModelChange",(function(e){return t.itemsIn=e})),D.Tc(31,Q,9,2,"mat-list-item",12),D.ac(),D.ac(),D.ac(),D.ac(),D.ac()),2&e&&(D.Gb(11),D.uc("ngModel",t.depName),D.Gb(1),D.uc("ngForOf",t.deposits),D.Gb(9),D.uc("dragulaModel",t.itemsOut),D.Gb(1),D.uc("ngForOf",t.itemsOut),D.Gb(8),D.uc("dragulaModel",t.itemsIn),D.Gb(1),D.uc("ngForOf",t.itemsIn))},directives:[q.d,q.b,u.a,u.g,h.a,u.c,b.a,b.d,v.a,k.n,k.q,n.l,p.a,X,z.p,p.c,l.a,p.b,z.l],encapsulation:2}),e})();class ee{constructor(e,t,i,n){this._id=e,this.name=t,this.brand=i,this.company=n}}function te(e,t){if(1&e){const e=D.cc();D.bc(0,"li"),D.bc(1,"mat-checkbox",10),D.jc("change",(function(i){D.Mc(e);const n=t.$implicit;return D.nc().changeCheck(n)})),D.Vc(2),D.ac(),D.ac()}if(2&e){const e=t.$implicit,i=D.nc();D.Gb(1),D.uc("checked",i.include(e)),D.Gb(1),D.Xc(" ",e.name," ")}}let ie=(()=>{class e{constructor(e,t,i,n,o,a){this.data=e,this.dialogRef=t,this.snackBar=i,this._userService=n,this._depositService=o,this._stockService=a,this.item=new ee("","","",""),this.token=n.getToken(),this.identity=n.getIdentity()}ngOnInit(){this.build(this.data.payload),this.getDeposits()}getDeposits(){this._depositService.getList(this.token,{company:this.identity.company._id}).subscribe(e=>{e.deposits&&(this.deposits=e.deposits,this.depositsInclude=new Array,this.data.payload?this.deposits.forEach(e=>{this._stockService.getList(this.token,{item:this.data.payload._id,deposit:e._id}).subscribe(e=>{e.stocks&&e.stocks[0]&&this.depositsInclude.push(e.stocks[0].deposit._id)},e=>{this.openSnackBar(e.message,"Cerrar")})}):(this.depositsInclude=new Array,this.deposits.forEach(e=>{this.depositsInclude.push(e._id)})))},e=>{this.openSnackBar(e.message,"Cerrar")})}changeCheck(e){-1==this.depositsInclude.indexOf(e._id)?this.depositsInclude.push(e._id):this.depositsInclude.splice(this.depositsInclude.indexOf(e._id),1)}include(e){return-1!=this.depositsInclude.indexOf(e._id)}build(e){e&&(this.item=e)}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}submit(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({item:this.item,deposits:this.depositsInclude})}check(){return""!=this.item.name}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(U.a),D.Vb(U.g),D.Vb(W.a),D.Vb(x.a),D.Vb(_.a),D.Vb(I.a))},e.\u0275cmp=D.Pb({type:e,selectors:[["app-item-popop"]],features:[D.Fb([x.a,_.a,I.a])],decls:19,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","text","placeholder","Marca","aria-label","Text","matInput","","name","brand",3,"ngModel","ngModelChange"],[2,"list-style-type","none"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["color","primary",3,"checked","change"]],template:function(e,t){1&e&&(D.bc(0,"h1",0),D.Vc(1),D.ac(),D.bc(2,"mat-card",1),D.bc(3,"mat-card-content"),D.bc(4,"form"),D.bc(5,"div",2),D.bc(6,"div",3),D.bc(7,"mat-form-field",4),D.bc(8,"input",5),D.jc("ngModelChange",(function(e){return t.item.name=e})),D.ac(),D.ac(),D.bc(9,"mat-form-field",4),D.bc(10,"input",6),D.jc("ngModelChange",(function(e){return t.item.brand=e})),D.ac(),D.ac(),D.bc(11,"div",2),D.bc(12,"div",3),D.bc(13,"label"),D.Vc(14,"Habilitar en:"),D.ac(),D.bc(15,"ul",7),D.Tc(16,te,3,2,"li",8),D.ac(),D.ac(),D.ac(),D.ac(),D.ac(),D.bc(17,"button",9),D.jc("click",(function(e){return t.submit()})),D.Vc(18,"Guardar"),D.ac(),D.ac(),D.ac(),D.ac()),2&e&&(D.Gb(1),D.Wc(t.data.title),D.Gb(7),D.uc("ngModel",t.item.name),D.Gb(2),D.uc("ngModel",t.item.brand),D.Gb(6),D.uc("ngForOf",t.deposits))},directives:[u.a,u.c,k.x,k.o,k.p,q.d,q.b,b.a,c.b,k.c,k.n,k.q,n.l,d.b,a.a],encapsulation:2}),e})();function ne(e,t){if(1&e){const e=D.cc();D.bc(0,"div",5),D.bc(1,"button",6),D.jc("click",(function(t){return D.Mc(e),D.nc().toNew()})),D.Vc(2,"Nuevo"),D.ac(),D.ac()}}let oe=(()=>{class e{constructor(e,t,i,n,o,a){this._userService=e,this._itemService=t,this._stockService=i,this.loader=n,this.snackBar=o,this.dialog=a,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getItems(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}getItems(){this._itemService.getList(this.token,{company:this.identity.company._id}).subscribe(e=>{e.items&&(this.rows=e.items,this.temp=e.items)},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"brand",name:"Marca",flexGrow:1}]}updateFilter(e){const t=e.target.value.toLowerCase();var i=Object.keys(this.temp[0]);if(i.splice(i.length-1),!i.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=i.length;n++){let o=i[n];if(e[o]&&e[o].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}toNew(){this.openPopUp(!0)}openPopUp(e,t){this.dialog.open(ie,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo deposito":"Editar deposito"}}).afterClosed().subscribe(t=>{if(t){if(this.loader.open(),e){let e=new ee("",t.item.name,t.item.brand,this.identity.company._id),i=t.deposits;this._itemService.add(this.token,e).subscribe(e=>{e.item&&(this.openSnackBar("Articulo creado","Cerrar"),this.getItems(),i.forEach(t=>{let i=new O("",e.item._id,t,0,0,!1);this._stockService.add(this.token,i).subscribe(e=>{},e=>{console.log(e)})}))},e=>{this.openSnackBar(e.message,"Cerrar")})}else this._itemService.edit(this.token,t.item._id,t.item).subscribe(e=>{if(e.item){this.openSnackBar("Arcitulo actualizado","Cerrar"),this.getItems();let e={item:t.item._id};this._stockService.getList(this.token,e).subscribe(i=>{if(i.stocks){let n=t.deposits;i.stocks.forEach(t=>{let i=t.deposit._id;-1!=n.indexOf(i)?n.splice(n.indexOf(i),1):this._stockService.deleteMany(this.token,e).subscribe(e=>{},e=>{console.log(e)})}),0!=n.length&&n.forEach(e=>{let i=new O("",t.item._id,e,0,0,!1);this._stockService.add(this.token,i).subscribe(e=>{},e=>{console.log(e)})})}},e=>{console.log(e)})}},e=>{this.openSnackBar(e.message,"Cerrar")});this.loader.close()}})}toProfile(e,t){"click"==e.type&&this.canCreate&&this.openPopUp(!1,e.row)}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(x.a),D.Vb(M.a),D.Vb(I.a),D.Vb(C.a),D.Vb(W.a),D.Vb(U.b))},e.\u0275cmp=D.Pb({type:e,selectors:[["app-deposit-list"]],features:[D.Fb([x.a,M.a,I.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(D.bc(0,"mat-form-field",0),D.bc(1,"input",1),D.jc("keyup",(function(e){return t.updateFilter(e)})),D.ac(),D.ac(),D.Tc(2,ne,3,0,"div",2),D.bc(3,"div",3),D.bc(4,"ngx-datatable",4),D.jc("activate",(function(e){return t.toProfile(e)})),D.ac(),D.ac()),2&e&&(D.Gb(2),D.uc("ngIf",t.canCreate),D.Gb(2),D.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[b.a,c.b,n.m,s.d,d.b],encapsulation:2}),e})(),ae=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t}ngOnInit(){this.build(this.data.payload)}build(e){e&&(this.stock=e)}submit(){this.dialogRef.close({stock:this.stock})}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(U.a),D.Vb(U.g))},e.\u0275cmp=D.Pb({type:e,selectors:[["app-stockmin-popop"]],decls:11,vars:2,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","number","min","0","placeholder","Stock m\xednimo","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(D.bc(0,"h1",0),D.Vc(1),D.ac(),D.bc(2,"mat-card",1),D.bc(3,"mat-card-content"),D.bc(4,"form"),D.bc(5,"div",2),D.bc(6,"div",3),D.bc(7,"mat-form-field",4),D.bc(8,"input",5),D.jc("ngModelChange",(function(e){return t.stock.cantMin=e})),D.ac(),D.ac(),D.ac(),D.ac(),D.bc(9,"button",6),D.jc("click",(function(e){return t.submit()})),D.Vc(10,"Guardar"),D.ac(),D.ac(),D.ac(),D.ac()),2&e&&(D.Gb(1),D.Wc(t.data.title),D.Gb(7),D.uc("ngModel",t.stock.cantMin))},directives:[u.a,u.c,k.x,k.o,k.p,q.d,q.b,b.a,k.s,c.b,k.c,k.n,k.q,d.b],encapsulation:2}),e})();function re(e,t){if(1&e){const e=D.cc();D.bc(0,"mat-option",5),D.jc("click",(function(i){D.Mc(e);const n=t.$implicit;return D.nc().getStocks(n)})),D.Vc(1),D.ac()}if(2&e){const e=t.$implicit;D.uc("value",e),D.Gb(1),D.Xc(" ",e.name," ")}}const ce=[{path:"",children:[{path:"list",component:oe,data:{title:"Lista de articulos",breadcrumb:"LISTA DE ARTICULOS"}},{path:"enable",component:Z,data:{title:"Habilitar articulos",breadcrumb:"HABILITAR ARTICULOS"}},{path:"stockmin",component:(()=>{class e{constructor(e,t,i,n,o,a){this._userService=e,this._depositService=t,this._stockService=i,this.loader=n,this.snackBar=o,this.dialog=a,this.rows=[],this.columns=[],this.temp=[],this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getDeposits()}getDeposits(){this._depositService.getList(this.token,{company:this.identity.company._id}).subscribe(e=>{e.deposits&&(this.deposits=e.deposits,this.deposit=this.deposits[0],this.getStocks(this.deposit))},e=>{this.openSnackBar(e.message,"Cerrar")})}getStocks(e){this._stockService.getList(this.token,{deposit:e._id}).subscribe(e=>{if(e.stocks){this.rows=e.stocks,this.temp=e.stocks;for(let e=0;e<this.rows.length;e++){const t=this.rows[e];this.rows[e].article=t.item.name+" "+t.item.brand,this.temp[e].article=t.item.name+" "+t.item.brand}}},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"article",name:"Articulo",flexGrow:3},{prop:"cant",name:"Stock",flexGrow:1},{prop:"cantMin",name:"Stock minimo",flexGrow:1}]}updateFilter(e){const t=e.target.value.toLowerCase();var i=Object.keys(this.temp[0]);if(i.splice(i.length-1),!i.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=i.length;n++){let o=i[n];if(e[o]&&e[o].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}openPopUp(e){if("click"!=e.type)return;let t=e.row;this.dialog.open(ae,{width:"300px",data:{payload:t,title:"Editar stock m\xednimo"}}).afterClosed().subscribe(e=>{if(!e)return;this.loader.open();let i=e.stock;this._stockService.edit(this.token,i._id,i).subscribe(e=>{e.stock&&(t.cantMin=i.cantMin)},e=>{this.openSnackBar(e.message,"Cerrar")}),this.loader.close()})}}return e.\u0275fac=function(t){return new(t||e)(D.Vb(x.a),D.Vb(_.a),D.Vb(I.a),D.Vb(C.a),D.Vb(W.a),D.Vb(U.b))},e.\u0275cmp=D.Pb({type:e,selectors:[["app-stock-list"]],features:[D.Fb([x.a,_.a,I.a])],decls:7,vars:9,consts:[[1,"margin-333",2,"width","100%"],[3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[3,"value","click"]],template:function(e,t){1&e&&(D.bc(0,"mat-form-field",0),D.bc(1,"mat-label"),D.Vc(2,"Dep\xf3sito"),D.ac(),D.bc(3,"mat-select",1),D.jc("ngModelChange",(function(e){return t.deposit=e})),D.Tc(4,re,2,2,"mat-option",2),D.ac(),D.ac(),D.bc(5,"div",3),D.bc(6,"ngx-datatable",4),D.jc("activate",(function(e){return t.openPopUp(e)})),D.ac(),D.ac()),2&e&&(D.Gb(3),D.uc("ngModel",t.deposit),D.Gb(1),D.uc("ngForOf",t.deposits),D.Gb(2),D.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[b.a,b.d,v.a,k.n,k.q,n.l,s.d,z.p],encapsulation:2}),e})(),data:{title:"Stock m\xednimo",breadcrumb:"STOCK MINIMO"}}]}];var se=i("5+WD");i.d(t,"AppItemModule",(function(){return le}));let le=(()=>{class e{}return e.\u0275mod=D.Tb({type:e}),e.\u0275inj=D.Sb({factory:function(t){return new(t||e)},imports:[[n.c,k.t,b.c,k.j,h.b,v.b,S.a,p.d,w.b,l.b,Y,se.d,d.c,u.e,y.a,a.b,r.c,m.c,c.c,f.a,s.e,g.a,o.k.forChild(ce)]]}),e})()},n6yW:function(e,t,i){"use strict";var n={};function o(e){var t=n[e];return t?t.lastIndex=0:n[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}e.exports={add:function(e,t){var i=e.className;i.length?o(t).test(i)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(o(t)," ").trim()}}}}]);