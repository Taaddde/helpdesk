(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Ty4v:function(e,t,c){"use strict";c.r(t);var a=c("ofXK"),n=c("tyNb"),i=c("bSwM"),o=c("qFsG"),s=c("M9IT"),r=c("Dh3D"),l=c("+0xr"),b=c("lDzL"),u=c("NFeN"),d=c("bTqV"),p=c("Wp6s"),m=c("f0Cb"),h=c("wZkO"),g=c("7EHt"),f=c("MutI"),y=c("YUcS"),k=c("aYsj"),T=c("kmnG"),C=c("d3UM"),v=c("3Pt+"),S=c("1jcm"),M=c("Qu3c"),V=c("PCNd"),x=c("gU78"),G=c("O4PR"),w=c("0IaG"),_=c("1yaQ"),I=c("FKr1");class B{constructor(e,t,c,a){this._id=e,this.name=t,this.initials=c,this.email=a}}var j=c("fXoL"),A=c("dNgK"),F=c("XiUz");let O=(()=>{class e{constructor(e,t,c,a){this.data=e,this.dialogRef=t,this._userService=c,this.snackBar=a,this.sector=new B("","","","")}ngOnInit(){this.buildSector(this.data.payload)}buildSector(e){e&&(this.sector=e)}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}submit(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({sector:this.sector})}check(){return""!=this.sector.name&&""!=this.sector.initials&&""!=this.sector.email}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(w.a),j.Vb(w.g),j.Vb(x.a),j.Vb(A.a))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-sector-popop"]],features:[j.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a])],decls:17,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","text","placeholder","Iniciales","aria-label","Text","matInput","","name","initials",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","email",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(j.bc(0,"h1",0),j.Vc(1),j.ac(),j.bc(2,"mat-card",1),j.bc(3,"mat-card-content"),j.bc(4,"form"),j.bc(5,"div",2),j.bc(6,"div",3),j.bc(7,"mat-form-field",4),j.bc(8,"input",5),j.jc("ngModelChange",(function(e){return t.sector.name=e})),j.ac(),j.ac(),j.ac(),j.bc(9,"div",3),j.bc(10,"mat-form-field",4),j.bc(11,"input",6),j.jc("ngModelChange",(function(e){return t.sector.initials=e})),j.ac(),j.ac(),j.ac(),j.bc(12,"div",3),j.bc(13,"mat-form-field",4),j.bc(14,"input",7),j.jc("ngModelChange",(function(e){return t.sector.email=e})),j.ac(),j.ac(),j.ac(),j.ac(),j.bc(15,"button",8),j.jc("click",(function(e){return t.submit()})),j.Vc(16,"Guardar"),j.ac(),j.ac(),j.ac(),j.ac()),2&e&&(j.Gb(1),j.Wc(t.data.title),j.Gb(7),j.uc("ngModel",t.sector.name),j.Gb(3),j.uc("ngModel",t.sector.initials),j.Gb(3),j.uc("ngModel",t.sector.email))},directives:[p.a,p.b,v.x,v.o,v.p,F.d,F.b,T.b,o.b,v.c,v.n,v.q,d.b],encapsulation:2}),e})();var E=c("3sEA");function q(e,t){if(1&e){const e=j.cc();j.bc(0,"div",5),j.bc(1,"button",6),j.jc("click",(function(t){return j.Mc(e),j.nc().toNew()})),j.Vc(2,"Nuevo"),j.ac(),j.ac()}}let D=(()=>{class e{constructor(e,t,c,a,n,i,o){this._userService=e,this._sectorService=t,this._route=c,this._router=a,this.loader=n,this.snackBar=i,this.dialog=o,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getSectors(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}getSectors(){this._sectorService.getList(this.token).subscribe(e=>{e.sectors&&(this.rows=e.sectors,this.temp=e.sectors)},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"initials",name:"Iniciales",flexGrow:1},{prop:"email",name:"Email",flexGrow:2}]}updateFilter(e){const t=e.target.value.toLowerCase();var c=Object.keys(this.temp[0]);if(c.splice(c.length-1),!c.length)return;const a=this.temp.filter((function(e){for(let a=0;a<=c.length;a++){let n=c[a];if(e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=a}toNew(){this.openPopUp(!0)}openPopUp(e,t){this.dialog.open(O,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo sector":"Editar sector"}}).afterClosed().subscribe(t=>{t&&(this.loader.open(),e?this._sectorService.add(this.token,t.sector).subscribe(e=>{e.sector&&(this.openSnackBar("Sector creado","Cerrar"),this.getSectors())},e=>{this.openSnackBar(e.message,"Cerrar")}):this._sectorService.edit(this.token,t.sector._id,t.sector).subscribe(e=>{e.sector&&(this.openSnackBar("Sector actualizado","Cerrar"),this.getSectors())},e=>{this.openSnackBar(e.message,"Cerrar")}),this.loader.close())})}toProfile(e,t){"click"==e.type&&this.openPopUp(!1,e.row)}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(x.a),j.Vb(G.a),j.Vb(n.a),j.Vb(n.g),j.Vb(E.a),j.Vb(A.a),j.Vb(w.b))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-sector-list"]],features:[j.Fb([x.a,G.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(j.bc(0,"mat-form-field",0),j.bc(1,"input",1),j.jc("keyup",(function(e){return t.updateFilter(e)})),j.ac(),j.ac(),j.Tc(2,q,3,0,"div",2),j.bc(3,"div",3),j.bc(4,"ngx-datatable",4),j.jc("activate",(function(e){return t.toProfile(e)})),j.ac(),j.ac()),2&e&&(j.Gb(2),j.uc("ngIf",t.canCreate),j.Gb(2),j.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[T.b,o.b,a.m,b.d,d.b],encapsulation:2}),e})();var N=c("wd/R"),L=c("YFeJ"),P=c("Q2c7"),R=c("wkIo");function U(e,t){if(1&e){const e=j.cc();j.bc(0,"div",20),j.Wb(1,"img",21),j.bc(2,"button",22),j.jc("click",(function(t){return j.Mc(e),j.nc().openAttachment()})),j.bc(3,"mat-icon"),j.Vc(4,"edit"),j.ac(),j.ac(),j.ac()}}function H(e,t){if(1&e){const e=j.cc();j.bc(0,"div",20),j.Wb(1,"img",23),j.bc(2,"button",22),j.jc("click",(function(t){return j.Mc(e),j.nc().openAttachment()})),j.bc(3,"mat-icon"),j.Vc(4,"edit"),j.ac(),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(1),j.vc("src",e.url+"company/image/"+e.company.image,j.Oc)}}function $(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-form-field",11),j.bc(1,"input",24),j.jc("ngModelChange",(function(t){return j.Mc(e),j.nc().company.password=t})),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(1),j.uc("readonly",!e.isAdmin)("ngModel",e.company.password)}}function X(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-form-field",11),j.bc(1,"input",25),j.jc("ngModelChange",(function(t){return j.Mc(e),j.nc().company.chatScheduleFrom=t})),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(1),j.uc("readonly",!e.isAdmin)("ngModel",e.company.chatScheduleFrom)}}function W(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-form-field",11),j.bc(1,"input",26),j.jc("ngModelChange",(function(t){return j.Mc(e),j.nc().company.chatScheduleTo=t})),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(1),j.uc("readonly",!e.isAdmin)("ngModel",e.company.chatScheduleTo)}}let z=(()=>{class e{constructor(e,t,c,a,n){this._userService=e,this._companyService=t,this._uploadService=c,this._route=a,this.snackBar=n,this.token=e.getToken(),this.identity=e.getIdentity(),this.url=L.a.url,this.isAdmin=!1}ngOnInit(){this.getCompany()}getCompany(){this._companyService.getOne(this.token,this.identity.company._id).subscribe(e=>{e.company&&(this.company=e.company,"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0))},e=>{this.openSnackBar(e.message,"Cerrar")})}editCompany(){!this.company.chat||this.company.chat&&N(this.company.chatScheduleFrom,"HH:mm").isValid()&&N(this.company.chatScheduleTo,"HH:mm").isValid()?(0==this.company.mailSender&&(this.company.password=""),this._companyService.edit(this.token,this.company._id,this.company).subscribe(e=>{e.company&&this.openSnackBar("Datos actualizados","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}openAttachment(){document.getElementById("attachment").click()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}fileChangeEvent(e){this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"company/image/"+this.company._id,[],this.filesToUpload,this.token,"image"),setTimeout(()=>{this.getCompany(),this.openSnackBar("Foto de departamento actualizada","Cerrar")},1e3)}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(x.a),j.Vb(R.a),j.Vb(P.a),j.Vb(n.a),j.Vb(A.a))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-user-profile"]],features:[j.Fb([x.a,R.a,P.a])],decls:38,vars:16,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1",2,"margin-top","20px"],[1,"main-title"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],["label","Informaci\xf3n"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","email","type","text","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Servidor de correo"],["name","mailSender",3,"ngModel","color","disabled","ngModelChange"],["class","full-width",4,"ngIf"],["label","Chat online"],["name","chat",3,"ngModel","color","disabled","ngModelChange"],[1,"propic","text-center"],["src","assets/images/system/company-placeholder.png"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["matInput","","name","name","type","password","placeholder","Contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleFrom","type","text","placeholder","08:30",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleTo","type","text","placeholder","18:00",3,"readonly","ngModel","ngModelChange"]],template:function(e,t){1&e&&(j.bc(0,"div",0),j.bc(1,"div",1),j.bc(2,"mat-card",2),j.Tc(3,U,5,0,"div",3),j.Tc(4,H,5,1,"div",3),j.bc(5,"input",4),j.jc("change",(function(e){return t.fileChangeEvent(e)})),j.ac(),j.bc(6,"div",5),j.bc(7,"div",6),j.Vc(8),j.ac(),j.ac(),j.ac(),j.ac(),j.bc(9,"div",7),j.bc(10,"mat-card",8),j.bc(11,"mat-tab-group"),j.bc(12,"mat-tab",9),j.bc(13,"mat-card-content",10),j.bc(14,"form"),j.bc(15,"mat-form-field",11),j.bc(16,"input",12),j.jc("ngModelChange",(function(e){return t.company.name=e})),j.ac(),j.ac(),j.bc(17,"mat-form-field",11),j.bc(18,"input",13),j.jc("ngModelChange",(function(e){return t.company.email=e})),j.ac(),j.ac(),j.ac(),j.bc(19,"button",14),j.jc("click",(function(e){return t.editCompany()})),j.Vc(20,"Guardar"),j.ac(),j.ac(),j.ac(),j.bc(21,"mat-tab",15),j.bc(22,"mat-card-content",10),j.bc(23,"form"),j.bc(24,"mat-checkbox",16),j.jc("ngModelChange",(function(e){return t.company.mailSender=e})),j.Vc(25,"Habilitar env\xedo de correos electr\xf3nicos "),j.ac(),j.Tc(26,$,2,2,"mat-form-field",17),j.ac(),j.bc(27,"button",14),j.jc("click",(function(e){return t.editCompany()})),j.Vc(28,"Guardar"),j.ac(),j.ac(),j.ac(),j.bc(29,"mat-tab",18),j.bc(30,"mat-card-content",10),j.bc(31,"form"),j.bc(32,"mat-checkbox",19),j.jc("ngModelChange",(function(e){return t.company.chat=e})),j.Vc(33,"Habilitar env\xedo de correos electr\xf3nicos "),j.ac(),j.Tc(34,X,2,2,"mat-form-field",17),j.Tc(35,W,2,2,"mat-form-field",17),j.ac(),j.bc(36,"button",14),j.jc("click",(function(e){return t.editCompany()})),j.Vc(37,"Guardar"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()),2&e&&(j.Gb(3),j.uc("ngIf","null"==t.company.image),j.Gb(1),j.uc("ngIf","null"!=t.company.image),j.Gb(4),j.Wc(t.company.name),j.Gb(8),j.uc("readonly",!t.isAdmin)("ngModel",t.company.name),j.Gb(2),j.uc("readonly",!t.isAdmin)("ngModel",t.company.email),j.Gb(6),j.uc("ngModel",t.company.mailSender)("color","primary")("disabled",!t.isAdmin),j.Gb(2),j.uc("ngIf",t.company.mailSender),j.Gb(6),j.uc("ngModel",t.company.chat)("color","primary")("disabled",!t.isAdmin),j.Gb(2),j.uc("ngIf",t.company.chat),j.Gb(1),j.uc("ngIf",t.company.chat))},directives:[F.d,F.b,p.a,a.m,h.b,h.a,p.b,v.x,v.o,v.p,T.b,o.b,v.c,v.n,v.q,d.b,i.a,u.a],encapsulation:2}),e})();var K=c("rpG9"),Y=c("Xwq+");class J{constructor(e,t,c){this._id=e,this.name=t,this.company=c}}class Q{constructor(e,t,c,a,n,i,o,s,r,l,b,u,d){this._id=e,this.name=t,this.team=c,this.resolveDays=a,this.typeTicket=n,this.checks=i,this.goodChecks=o,this.requireAttach=s,this.desc=r,this.autoSub=l,this.autoDesc=b,this.autoChange=u,this.workTime=d}}var Z=c("3kSh");let ee=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t,this.type=new J("","","")}ngOnInit(){this.build(this.data.payload)}build(e){e&&(this.type=e)}submit(){this.dialogRef.close({type:this.type})}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(w.a),j.Vb(w.g))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-type-popup"]],features:[j.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a}])],decls:12,vars:2,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["fxLayout","row"],["mat-raised-button","","color","primary","matStepperNext","",3,"click"]],template:function(e,t){1&e&&(j.bc(0,"h1",0),j.Vc(1),j.ac(),j.bc(2,"mat-card",1),j.bc(3,"mat-card-content"),j.bc(4,"form"),j.bc(5,"div",2),j.bc(6,"div",3),j.bc(7,"mat-form-field",4),j.bc(8,"input",5),j.jc("ngModelChange",(function(e){return t.type.name=e})),j.ac(),j.ac(),j.ac(),j.bc(9,"div",6),j.bc(10,"button",7),j.jc("click",(function(e){return t.submit()})),j.Vc(11,"Guardar"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()),2&e&&(j.Gb(1),j.Wc(t.data.title),j.Gb(7),j.uc("ngModel",t.type.name))},directives:[p.a,p.b,v.x,v.o,v.p,F.d,F.b,T.b,o.b,v.c,v.n,v.q,d.b],encapsulation:2}),e})();function te(e,t){if(1&e&&(j.bc(0,"div",8),j.Vc(1),j.ac()),2&e){const e=j.nc().$implicit;j.Gb(1),j.Xc(" ",e.team.name," ")}}const ce=function(e){return["/settings/ticket/subtype",e]};function ae(e,t){if(1&e&&(j.bc(0,"mat-list-item"),j.bc(1,"button",7),j.bc(2,"a",3),j.bc(3,"mat-icon",1),j.Vc(4,"settings"),j.ac(),j.ac(),j.ac(),j.bc(5,"div",8),j.Vc(6),j.ac(),j.Tc(7,te,2,1,"div",9),j.ac()),2&e){const e=t.$implicit;j.Gb(2),j.uc("routerLink",j.Ac(3,ce,e._id)),j.Gb(4),j.Wc(e.name),j.Gb(1),j.uc("ngIf",e.team)}}const ne=function(e){return["/settings/ticket/newsubtype",e]};function ie(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-expansion-panel"),j.bc(1,"mat-expansion-panel-header"),j.Vc(2),j.ac(),j.bc(3,"mat-list"),j.Tc(4,ae,8,5,"mat-list-item",2),j.bc(5,"mat-list-item"),j.bc(6,"a",3),j.bc(7,"button",4),j.bc(8,"mat-icon",1),j.Vc(9,"add"),j.ac(),j.ac(),j.ac(),j.bc(10,"button",5),j.jc("click",(function(c){j.Mc(e);const a=t.$implicit;return j.nc().openPopUp(a,!1)})),j.bc(11,"mat-icon",1),j.Vc(12,"settings"),j.ac(),j.ac(),j.bc(13,"button",6),j.jc("click",(function(c){j.Mc(e);const a=t.$implicit;return j.nc().deleteType(a)})),j.bc(14,"mat-icon",1),j.Vc(15,"delete"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()}if(2&e){const e=t.$implicit,c=t.index,a=j.nc();j.Gb(2),j.Xc(" ",e.name," "),j.Gb(2),j.uc("ngForOf",a.subtypes[c]),j.Gb(2),j.uc("routerLink",j.Ac(6,ne,e._id)),j.Gb(1),j.uc("matTooltip","Nuevo subtipo en "+e.name),j.Gb(3),j.uc("matTooltip","Configurar tipo "+e.name),j.Gb(3),j.uc("matTooltip","Eliminar tipo "+e.name)}}let oe=(()=>{class e{constructor(e,t,c,a,n,i,o){this.dialog=e,this.loader=t,this._userService=c,this._typeTicketService=a,this._subTypeTicketService=n,this.confirmService=i,this.snackBar=o,this.token=c.getToken(),this.identity=c.getIdentity(),this.url=L.a.url,this.subtypes=new Array,this.newType=new J("","",this.identity.company._id),this.newSubtype=new Q("","","",0,"",String[""],0,!1,"","","",!1,null)}ngOnInit(){this.getTypes()}getTypes(){this._typeTicketService.getList(this.token,this.identity.company._id).subscribe(e=>{if(e.typeTickets){this.types=e.typeTickets;for(let e=0;e<this.types.length;e++)this.getSubTypes(this.types[e]._id,e)}},e=>{this.openSnackBar(e.message,"Cerrar")})}getSubTypes(e,t){this._subTypeTicketService.getList(this.token,e).subscribe(e=>{e.subTypeTickets&&this.subtypes.push(e.subTypeTickets)},e=>{this.openSnackBar(e.message,"Cerrar")})}deleteType(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar el tipo "+e.name+"?"}).subscribe(t=>{t&&this._typeTicketService.delete(this.token,e._id).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo eliminado","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addType(e){let t=new J("",e,this.identity.company._id);this._typeTicketService.add(this.token,t).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo de ticket a\xf1adido","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}editType(e,t){let c=new J(e,t,this.identity.company._id);this._typeTicketService.edit(this.token,e,c).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo de ticket editado","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openPopUp(e,t){this.dialog.open(ee,{width:"500px",data:{payload:e,title:t?"Nuevo tipo de ticket":"Editar tipo de ticket"}}).afterClosed().subscribe(e=>{e&&(this.loader.open(),t?this.addType(e.type.name):this.editType(e.type._id,e.type.name),this.loader.close())})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(w.b),j.Vb(E.a),j.Vb(x.a),j.Vb(K.a),j.Vb(Y.a),j.Vb(Z.a),j.Vb(A.a))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-type-ticket"]],features:[j.Fb([x.a,K.a,Y.a])],decls:6,vars:1,consts:[["mat-raised-button","","matTooltip","Nuevo tipo de ticket","color","primary",3,"click"],["mat-list-icon",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["mat-raised-button","","color","primary",3,"matTooltip"],["mat-raised-button","","color","accent",3,"matTooltip","click"],["mat-raised-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","","matTooltip","Configurar subtipo","color","accent"],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(e,t){1&e&&(j.bc(0,"mat-card"),j.bc(1,"button",0),j.jc("click",(function(e){return t.openPopUp(null,!0)})),j.bc(2,"mat-icon",1),j.Vc(3,"add"),j.ac(),j.ac(),j.ac(),j.bc(4,"mat-accordion"),j.Tc(5,ie,16,8,"mat-expansion-panel",2),j.ac()),2&e&&(j.Gb(5),j.uc("ngForOf",t.types))},directives:[p.a,d.b,M.a,u.a,f.b,g.a,a.l,g.c,g.d,f.a,f.c,n.j,I.l,a.m],styles:[".item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#d3d3d3}"]}),e})();var se=c("3uMe"),re=c("CzEO");function le(e,t){if(1&e&&(j.bc(0,"mat-label"),j.Vc(1),j.ac()),2&e){const e=j.nc();j.Gb(1),j.Wc(e.subtype.team.name)}}function be(e,t){1&e&&(j.bc(0,"mat-label"),j.Vc(1,"Sin equipo"),j.ac())}function ue(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-option",22),j.jc("click",(function(c){j.Mc(e);const a=t.$implicit;return j.nc().setTeam(a._id)})),j.Vc(1),j.ac()}if(2&e){const e=t.$implicit;j.uc("value",e._id),j.Gb(1),j.Xc("",e.name," ")}}function de(e,t){1&e&&(j.bc(0,"th"),j.Vc(1,"Editar"),j.ac())}function pe(e,t){if(1&e){const e=j.cc();j.bc(0,"td",24),j.bc(1,"button",25),j.jc("click",(function(t){j.Mc(e);const c=j.nc().$implicit;return j.nc().deleteCheck(c)})),j.bc(2,"mat-icon",26),j.Vc(3,"delete"),j.ac(),j.ac(),j.ac()}}function me(e,t){if(1&e&&(j.bc(0,"tr"),j.bc(1,"td"),j.Vc(2),j.ac(),j.Tc(3,pe,4,0,"td",23),j.ac()),2&e){const e=t.$implicit,c=j.nc();j.Gb(2),j.Xc(" ",e," "),j.Gb(1),j.uc("ngIf",c.isAdmin)}}function he(e,t){if(1&e){const e=j.cc();j.bc(0,"tfoot"),j.bc(1,"tr"),j.bc(2,"td"),j.bc(3,"input",27),j.jc("ngModelChange",(function(t){return j.Mc(e),j.nc().check=t})),j.ac(),j.ac(),j.bc(4,"td",24),j.bc(5,"button",28),j.jc("click",(function(t){return j.Mc(e),j.nc().addCheck()})),j.bc(6,"mat-icon",26),j.Vc(7,"add"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(3),j.uc("ngModel",e.check)}}function ge(e,t){if(1&e&&(j.bc(0,"mat-label"),j.Vc(1),j.ac()),2&e){const e=j.nc();j.Gb(1),j.Wc(e.subtype.team.name)}}function fe(e,t){1&e&&(j.bc(0,"mat-label"),j.Vc(1,"Sin equipo"),j.ac())}function ye(e,t){if(1&e){const e=j.cc();j.bc(0,"mat-option",22),j.jc("click",(function(c){j.Mc(e);const a=t.$implicit;return j.nc().setTeam(a._id)})),j.Vc(1),j.ac()}if(2&e){const e=t.$implicit;j.uc("value",e._id),j.Gb(1),j.Xc("",e.name," ")}}function ke(e,t){1&e&&(j.bc(0,"th"),j.Vc(1,"Editar"),j.ac())}function Te(e,t){if(1&e){const e=j.cc();j.bc(0,"td",24),j.bc(1,"button",25),j.jc("click",(function(t){j.Mc(e);const c=j.nc().$implicit;return j.nc().deleteCheck(c)})),j.bc(2,"mat-icon",26),j.Vc(3,"delete"),j.ac(),j.ac(),j.ac()}}function Ce(e,t){if(1&e&&(j.bc(0,"tr"),j.bc(1,"td"),j.Vc(2),j.ac(),j.Tc(3,Te,4,0,"td",23),j.ac()),2&e){const e=t.$implicit,c=j.nc();j.Gb(2),j.Xc(" ",e," "),j.Gb(1),j.uc("ngIf",c.isAdmin)}}function ve(e,t){if(1&e){const e=j.cc();j.bc(0,"tfoot"),j.bc(1,"tr"),j.bc(2,"td"),j.bc(3,"input",27),j.jc("ngModelChange",(function(t){return j.Mc(e),j.nc().check=t})),j.ac(),j.ac(),j.bc(4,"td",24),j.bc(5,"button",28),j.jc("click",(function(t){return j.Mc(e),j.nc().addCheck()})),j.bc(6,"mat-icon",26),j.Vc(7,"add"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()}if(2&e){const e=j.nc();j.Gb(3),j.uc("ngModel",e.check)}}const Se=[{path:"",children:[{path:"list/sector",component:D,data:{title:"Lista de sectores",breadcrumb:"LISTA DE SECTORES"}},{path:"company",component:z,data:{title:"Departamento",breadcrumb:"DEPARTAMENTO"}},{path:"ticket/types",component:oe,data:{title:"Tipos y subtipos de ticket",breadcrumb:"TIPOS Y SUBTIPOS DE TICKETS"}},{path:"ticket/subtype/:id",component:(()=>{class e{constructor(e,t,c,a,n,i){this._userService=e,this._teamService=t,this.confirmService=c,this._route=a,this._subTypeTicketService=n,this.snackBar=i,this.isAdmin=!1,this.token=e.getToken(),this.identity=e.getIdentity(),this.subtype=new Q("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}ngOnInit(){this.getSubType(),this.getTeams(),"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0)}getSubType(){this._route.params.forEach(e=>{this._subTypeTicketService.getOne(this.token,e.id).subscribe(e=>{e.subTypeTicket&&(this.subtype=e.subTypeTicket)},e=>{this.openSnackBar(e.message,"Cerrar")})})}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(e=>{e.teams&&(this.teams=e.teams)},e=>{this.openSnackBar(e.message,"Cerrar")})}setTeam(e){this.subtype.team=e}submit(){""!=this.subtype.name?this._subTypeTicketService.edit(this.token,this.subtype._id,this.subtype).subscribe(e=>{e.subTypeTicket&&this.openSnackBar("Datos actualizados","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")}):this.openSnackBar("Faltan campos para completar","Cerrar")}deleteCheck(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe(t=>{t&&this._subTypeTicketService.deleteCheck(this.token,this.subtype._id,e).subscribe(t=>{t.check&&(this.subtype.checks.splice(this.subtype.checks.indexOf(e),1),this.openSnackBar("Validaci\xf3n eliminada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addCheck(){this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe(e=>{e.subTypeTicket&&(this.subtype.checks.push(this.check),this.check="",this.openSnackBar("Validaci\xf3n agregada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(x.a),j.Vb(se.a),j.Vb(Z.a),j.Vb(n.a),j.Vb(Y.a),j.Vb(A.a))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-subtype"]],features:[j.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a,Y.a,se.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(j.bc(0,"div",0),j.bc(1,"div",1),j.bc(2,"mat-card",2),j.bc(3,"mat-tab-group"),j.bc(4,"mat-tab",3),j.bc(5,"mat-card-content",4),j.bc(6,"form"),j.bc(7,"mat-form-field",5),j.bc(8,"input",6),j.jc("ngModelChange",(function(e){return t.subtype.name=e})),j.ac(),j.ac(),j.bc(9,"mat-form-field",7),j.Tc(10,le,2,1,"mat-label",8),j.Tc(11,be,2,0,"mat-label",8),j.bc(12,"mat-select"),j.Tc(13,ue,2,2,"mat-option",9),j.ac(),j.ac(),j.bc(14,"mat-form-field",5),j.bc(15,"input",10),j.jc("ngModelChange",(function(e){return t.subtype.desc=e})),j.ac(),j.ac(),j.bc(16,"mat-checkbox",11),j.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),j.Vc(17,"Requiere adjunto "),j.ac(),j.ac(),j.bc(18,"button",12),j.jc("click",(function(e){return t.submit()})),j.Vc(19,"Guardar"),j.ac(),j.ac(),j.ac(),j.bc(20,"mat-tab",13),j.bc(21,"mat-card-content",4),j.bc(22,"div",14),j.bc(23,"div",15),j.bc(24,"table",16),j.bc(25,"thead"),j.bc(26,"tr"),j.bc(27,"th"),j.Vc(28,"Descripci\xf3n"),j.ac(),j.Tc(29,de,2,0,"th",8),j.ac(),j.ac(),j.bc(30,"tbody"),j.Tc(31,me,4,2,"tr",17),j.ac(),j.Tc(32,he,8,1,"tfoot",8),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.bc(33,"mat-tab",18),j.bc(34,"mat-card-content",4),j.bc(35,"form"),j.bc(36,"mat-checkbox",19),j.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),j.Vc(37,"Requiere modificaci\xf3n "),j.ac(),j.bc(38,"mat-form-field",5),j.bc(39,"input",20),j.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),j.ac(),j.ac(),j.bc(40,"mat-card-content",2),j.bc(41,"quill-editor",21),j.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),j.ac(),j.ac(),j.ac(),j.bc(42,"button",12),j.jc("click",(function(e){return t.submit()})),j.Vc(43,"Guardar"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()),2&e&&(j.Gb(8),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),j.Gb(2),j.uc("ngIf",t.subtype.team),j.Gb(1),j.uc("ngIf",!t.subtype.team),j.Gb(2),j.uc("ngForOf",t.teams),j.Gb(2),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),j.Gb(1),j.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),j.Gb(4),j.uc("disabled",""==t.subtype._id),j.Gb(9),j.uc("ngIf",t.isAdmin),j.Gb(2),j.uc("ngForOf",t.subtype.checks),j.Gb(1),j.uc("ngIf",t.isAdmin),j.Gb(4),j.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),j.Gb(3),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),j.Gb(2),j.uc("ngModel",t.subtype.autoDesc))},directives:[F.d,F.b,p.a,h.b,h.a,p.b,v.x,v.o,v.p,T.b,o.b,v.c,v.n,v.q,a.m,C.a,a.l,i.a,d.b,re.a,T.e,I.p,M.a,u.a,f.b,v.u],encapsulation:2}),e})(),data:{title:"Subtipo de ticket",breadcrumb:"SUBTIPO DE TICKET"}},{path:"ticket/newsubtype/:id",component:(()=>{class e{constructor(e,t,c,a,n,i,o){this._userService=e,this._teamService=t,this.confirmService=c,this._route=a,this._subTypeTicketService=n,this.snackBar=i,this._router=o,this.isAdmin=!0,this.token=e.getToken(),this.identity=e.getIdentity(),this.subtype=new Q("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}ngOnInit(){this.build(),this.getTeams()}build(){this._route.params.forEach(e=>{this.subtype.typeTicket=e.id})}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(e=>{e.teams&&(this.teams=e.teams)},e=>{this.openSnackBar(e.message,"Cerrar")})}setTeam(e){this.subtype.team=e}submit(){""!=this.subtype.name?(""==this.subtype.team&&delete this.subtype.team,this._subTypeTicketService.add(this.token,this.subtype).subscribe(e=>{e.subTypeTicket&&(this.openSnackBar("Subtipo creado","Cerrar"),this._router.navigate(["/settings/ticket/types"]))},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}deleteCheck(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe(t=>{t&&this._subTypeTicketService.deleteCheck(this.token,this.subtype._id,e).subscribe(t=>{t.check&&(this.subtype.checks.splice(this.subtype.checks.indexOf(e),1),this.openSnackBar("Validaci\xf3n eliminada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addCheck(){this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe(e=>{e.subTypeTicket&&(this.subtype.checks.push(this.check),this.check="",this.openSnackBar("Validaci\xf3n agregada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(j.Vb(x.a),j.Vb(se.a),j.Vb(Z.a),j.Vb(n.a),j.Vb(Y.a),j.Vb(A.a),j.Vb(n.g))},e.\u0275cmp=j.Pb({type:e,selectors:[["app-subtype"]],features:[j.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a,Y.a,se.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(j.bc(0,"div",0),j.bc(1,"div",1),j.bc(2,"mat-card",2),j.bc(3,"mat-tab-group"),j.bc(4,"mat-tab",3),j.bc(5,"mat-card-content",4),j.bc(6,"form"),j.bc(7,"mat-form-field",5),j.bc(8,"input",6),j.jc("ngModelChange",(function(e){return t.subtype.name=e})),j.ac(),j.ac(),j.bc(9,"mat-form-field",7),j.Tc(10,ge,2,1,"mat-label",8),j.Tc(11,fe,2,0,"mat-label",8),j.bc(12,"mat-select"),j.Tc(13,ye,2,2,"mat-option",9),j.ac(),j.ac(),j.bc(14,"mat-form-field",5),j.bc(15,"input",10),j.jc("ngModelChange",(function(e){return t.subtype.desc=e})),j.ac(),j.ac(),j.bc(16,"mat-checkbox",11),j.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),j.Vc(17,"Requiere adjunto "),j.ac(),j.ac(),j.bc(18,"button",12),j.jc("click",(function(e){return t.submit()})),j.Vc(19,"Guardar"),j.ac(),j.ac(),j.ac(),j.bc(20,"mat-tab",13),j.bc(21,"mat-card-content",4),j.bc(22,"div",14),j.bc(23,"div",15),j.bc(24,"table",16),j.bc(25,"thead"),j.bc(26,"tr"),j.bc(27,"th"),j.Vc(28,"Descripci\xf3n"),j.ac(),j.Tc(29,ke,2,0,"th",8),j.ac(),j.ac(),j.bc(30,"tbody"),j.Tc(31,Ce,4,2,"tr",17),j.ac(),j.Tc(32,ve,8,1,"tfoot",8),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.bc(33,"mat-tab",18),j.bc(34,"mat-card-content",4),j.bc(35,"form"),j.bc(36,"mat-checkbox",19),j.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),j.Vc(37,"Requiere modificaci\xf3n "),j.ac(),j.bc(38,"mat-form-field",5),j.bc(39,"input",20),j.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),j.ac(),j.ac(),j.bc(40,"mat-card-content",2),j.bc(41,"quill-editor",21),j.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),j.ac(),j.ac(),j.ac(),j.bc(42,"button",12),j.jc("click",(function(e){return t.submit()})),j.Vc(43,"Guardar"),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac(),j.ac()),2&e&&(j.Gb(8),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),j.Gb(2),j.uc("ngIf",t.subtype.team),j.Gb(1),j.uc("ngIf",!t.subtype.team),j.Gb(2),j.uc("ngForOf",t.teams),j.Gb(2),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),j.Gb(1),j.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),j.Gb(4),j.uc("disabled",""==t.subtype._id),j.Gb(9),j.uc("ngIf",t.isAdmin),j.Gb(2),j.uc("ngForOf",t.subtype.checks),j.Gb(1),j.uc("ngIf",t.isAdmin),j.Gb(4),j.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),j.Gb(3),j.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),j.Gb(2),j.uc("ngModel",t.subtype.autoDesc))},directives:[F.d,F.b,p.a,h.b,h.a,p.b,v.x,v.o,v.p,T.b,o.b,v.c,v.n,v.q,a.m,C.a,a.l,i.a,d.b,re.a,T.e,I.p,M.a,u.a,f.b,v.u],encapsulation:2}),e})(),data:{title:"Nuevo subtipo",breadcrumb:"NUEVO SUBTIPO"}}]}];c.d(t,"AppSettingsModule",(function(){return Me}));let Me=(()=>{class e{}return e.\u0275mod=j.Tb({type:e}),e.\u0275inj=j.Sb({factory:function(t){return new(t||e)},imports:[[a.c,v.t,T.d,re.b,v.j,m.b,r.a,g.b,C.b,s.a,l.k,V.a,f.d,M.b,u.b,d.c,p.c,S.a,i.b,h.c,o.c,y.a,b.e,k.a,n.k.forChild(Se)]]}),e})()}}]);