function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"L/iA":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i("AJX/");var n=i("tk/3"),r=i("YFeJ"),a=i("fXoL"),o=function(){var t=function(){function t(e){_classCallCheck(this,t),this._httpClient=e,this.httpOptions={headers:new n.e({"Content-Type":"application/json",Authorization:"null"})},this.url=r.a.url,this.path="order"}return _createClass(t,[{key:"add",value:function(t,e){var i=JSON.stringify(e);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+this.path+"/add",i,this.httpOptions)}},{key:"print",value:function(t,e,i){var n={body:e};return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+"order/print/"+i,n,this.httpOptions)}},{key:"getPrint",value:function(t){return this._httpClient.get(this.url+"order/print/"+t,this.httpOptions)}},{key:"edit",value:function(t,e,i){var n=JSON.stringify(i);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+this.path+"/update/"+e,n,this.httpOptions)}},{key:"delete",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.delete(this.url+this.path+"/delete/"+e,this.httpOptions)}},{key:"getList",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+this.path+"/list",{headers:this.httpOptions.headers,params:e})}},{key:"getOne",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+this.path+"/get/"+e,this.httpOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.fc(n.c))},t.\u0275prov=a.Rb({token:t,factory:t.\u0275fac}),t}()},U14E:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i("AJX/");var n=i("tk/3"),r=i("YFeJ"),a=i("fXoL"),o=function(){var t=function(){function t(e){_classCallCheck(this,t),this._httpClient=e,this.httpOptions={headers:new n.e({"Content-Type":"application/json",Authorization:"null"})},this.url=r.a.url,this.path="orderitem"}return _createClass(t,[{key:"add",value:function(t,e){var i=JSON.stringify(e);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+this.path+"/add",i,this.httpOptions)}},{key:"edit",value:function(t,e,i){var n=JSON.stringify(i);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+this.path+"/update/"+e,n,this.httpOptions)}},{key:"delete",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.delete(this.url+this.path+"/delete/"+e,this.httpOptions)}},{key:"getList",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+this.path+"/list",{headers:this.httpOptions.headers,params:e})}},{key:"getOne",value:function(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+this.path+"/get/"+e,this.httpOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.fc(n.c))},t.\u0275prov=a.Rb({token:t,factory:t.\u0275fac}),t}()},fk7W:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),r=i("3Pt+"),a=i("bTqV"),o=i("Wp6s"),s=i("A5z7"),c=i("7EHt"),u=i("zkoq"),h=i("NFeN"),l=i("MutI"),p=i("STbY"),d=i("bv9b"),f=i("+0xr"),m=i("wZkO"),b=i("tyNb"),g=i("YUcS"),v=i("LPYB"),y=i("DKVz"),k=i("lDzL"),w=i("aYsj"),O=i("kmnG"),_=i("qFsG"),A=i("d3UM"),x=i("/1cH"),C=i("GmJt"),M=i("ETNk"),G=i("gU78"),S=i("Nptc"),T=i("vHsL"),L=i("wd/R"),V=i("AASI"),z=i("L/iA"),N=i("U14E"),I=i("fXoL"),H=i("XiUz"),P=i("FKr1");function X(t,e){1&t&&I.Vc(0," # ")}function j(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.numMovim," ")}function E(t,e){1&t&&I.Vc(0," Tipo ")}function F(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.type," ")}function D(t,e){1&t&&I.Vc(0," Articulo ")}function J(t,e){if(1&t&&(I.bc(0,"span",21),I.bc(1,"span"),I.Vc(2),I.ac(),I.Vc(3," | "),I.bc(4,"small"),I.Vc(5),I.ac(),I.ac()),2&t){var i=e.row;I.uc("matTooltip",i.item.name+" | "+i.item.brand),I.Gb(2),I.Wc(i.item.name),I.Gb(3),I.Wc(i.item.brand)}}function Y(t,e){1&t&&I.Vc(0," Cantidad ")}function W(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.cant," ")}function U(t,e){1&t&&I.Vc(0," Fecha ")}function R(t,e){if(1&t&&I.Vc(0),2&t){var i=e.row,n=I.nc();I.Xc(" ",n.changeDate(i.date)," ")}}function q(t,e){if(1&t){var i=I.cc();I.bc(0,"mat-option",22),I.jc("click",(function(t){I.Mc(i);var n=e.$implicit;return I.nc().getStock(n)})),I.Vc(1),I.ac()}if(2&t){var n=e.$implicit;I.uc("value",n),I.Gb(1),I.Xc(" ",n.name," ")}}function $(t,e){1&t&&I.Vc(0," Articulo ")}function K(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.itemName," ")}function B(t,e){1&t&&I.Vc(0," Marca ")}function Z(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.brandName," ")}function Q(t,e){1&t&&I.Vc(0," Stock ")}function tt(t,e){1&t&&I.Vc(0),2&t&&I.Xc(" ",e.row.cant," ")}var et,it=function(){return{y:"50px",delay:"300ms"}},nt=function(t){return{value:"*",params:t}},rt=function(){return{scale:".9",delay:"600ms"}},at=function(){return["/deposit/order/new"]},ot=function(){return{scale:".9",delay:"900ms"}},st=function(){return["/deposit/movim/list"]},ct=function(){return{scale:".9",delay:"1200ms"}},ut=[{path:"",children:[{path:"movim",loadChildren:function(){return Promise.all([i.e(0),i.e(17)]).then(i.bind(null,"oBY8")).then((function(t){return t.AppMovimModule}))},data:{title:"Movimientos",breadcrumb:"MOVIMIENTOS"}},{path:"order",loadChildren:function(){return Promise.all([i.e(3),i.e(0),i.e(18)]).then(i.bind(null,"9Mbw")).then((function(t){return t.AppOrderModule}))},data:{title:"Ordenes",breadcrumb:"ORDENES"}},{path:"home",component:(et=function(){function t(e,i,n,r,a,o,s,c){_classCallCheck(this,t),this.themeService=e,this._route=i,this._userService=n,this._stockService=r,this._movimService=a,this._depositService=o,this._orderService=s,this._orderItemService=c,this.temp=[],this.stockMissingColumns=[{prop:"completeName",name:"Articulo",flexGrow:2},{prop:"cant",name:"Cantidad",flexGrow:1},{prop:"cantMin",name:"M\xednimo",flexGrow:1},{prop:"depositName",name:"Dep\xf3sito",flexGrow:1}],this.token=n.getToken(),this.identity=n.getIdentity()}return _createClass(t,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){this.getLastestMovims(5),this.getDeposits()}},{key:"getOrders",value:function(){var t=this;this._orderService.getList(this.token,{company:this.identity.company._id,status:"Pendiente"}).subscribe((function(e){if(e.orders){var i=e.orders,n=new Array;i.forEach((function(t){n.push(t._id)})),t.getOrderItems(n)}}),(function(t){console.error(t.message)}))}},{key:"getOrderItems",value:function(t){var e=this;this.itemsPending=new Array,this._orderItemService.getList(this.token,{order:t}).subscribe((function(t){t.orderItems&&(t.orderItems.forEach((function(t){e.itemsPending.push(t.item._id)})),e.stockMissing.forEach((function(t){-1!=e.itemsPending.indexOf(t.item._id)&&(e.stockMissing.splice(e.stockMissing.indexOf(t),1),e.stockMissing=_toConsumableArray(e.stockMissing))})))}),(function(t){console.error(t.message)}))}},{key:"getDeposits",value:function(){var t=this;this._depositService.getList(this.token,{company:this.identity.company._id}).subscribe((function(e){if(e.deposits){t.deposits=e.deposits,t.deposit=t.deposits[0],t.getStock(t.deposit);var i=new Array;t.deposits.forEach((function(t){i.push(t._id)})),t.getStockMissing(i)}}),(function(t){console.error(t)}))}},{key:"getStock",value:function(t){var e=this;this._stockService.getList(this.token,{deposit:t._id}).subscribe((function(t){if(t.stocks){e.stocks=t.stocks,e.temp=t.stocks;for(var i=0;i<e.stocks.length;i++){var n=e.stocks[i];e.stocks[i].itemName=n.item.name,e.stocks[i].brandName=n.item.brand,e.temp[i].itemName=n.item.name,e.temp[i].brandName=n.item.brand}}}),(function(t){console.error(t)}))}},{key:"getStockMissing",value:function(t){var e=this;this._stockService.getList(this.token,{deposit:t,onOrder:!1,$where:"this.cant < this.cantMin"}).subscribe((function(t){t.stocks&&(e.stockMissing=t.stocks,e.stockMissing.forEach((function(t){t.completeName=t.item.name+" "+t.item.brand,t.depositName=t.deposit.name})))}),(function(t){console.error(t)}))}},{key:"getLastestMovims",value:function(t){var e=this;this._movimService.getLastestList(this.token,{},t).subscribe((function(t){t.movims&&(e.lastestMovims=t.movims)}),(function(t){console.error(t)}))}},{key:"changeDate",value:function(t){return L(t).format("DD-MM-YYYY")}},{key:"updateFilter",value:function(t){var e=t.target.value.toLowerCase(),i=Object.keys(this.temp[0]);if(i.splice(i.length-1),i.length){var n=this.temp.filter((function(t){for(var n=0;n<=i.length;n++){var r=i[n];if(t[r]&&t[r].toString().toLowerCase().indexOf(e)>-1)return!0}}));this.stocks=n}}},{key:"check",value:function(t){return-1!=this.itemsPending.indexOf(t)}}]),t}(),et.\u0275fac=function(t){return new(t||et)(I.Vb(M.a),I.Vb(b.a),I.Vb(G.a),I.Vb(S.a),I.Vb(T.a),I.Vb(V.a),I.Vb(z.a),I.Vb(N.a))},et.\u0275cmp=I.Pb({type:et,selectors:[["app-analytics"]],features:[I.Fb([G.a,S.a,T.a,V.a,z.a,N.a])],decls:45,vars:47,consts:[["fxLayout","row","fxLayout.xs","column","fxLayoutWrap","","fxLayoutGap","0.5%","fxLayoutAlign","center"],["fxLayout","row wrap"],["fxFlex","",1,"p-0"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns"],[1,"material","bg-white",3,"columnMode","headerHeight","rowHeight","rows"],["name","num",3,"flexGrow"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","type",3,"flexGrow"],["name","item",3,"flexGrow"],["name","cant",3,"flexGrow"],["name","date",3,"flexGrow"],[1,"full-width"],["name","deposit",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por articulo","value","",3,"keyup"],["ngx-resize-watcher","",1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows"],["name","itemName",3,"flexGrow"],["name","brandName",3,"flexGrow"],[3,"matTooltip"],[3,"value","click"]],template:function(t,e){1&t&&(I.bc(0,"mat-card"),I.bc(1,"div",0),I.bc(2,"h1"),I.Vc(3,"Dep\xf3sito"),I.ac(),I.ac(),I.ac(),I.bc(4,"div",1),I.bc(5,"mat-card",2),I.bc(6,"button",3),I.Vc(7,"Crear pedido"),I.ac(),I.Wb(8,"ngx-datatable",4),I.ac(),I.bc(9,"mat-card",2),I.bc(10,"button",3),I.Vc(11,"Ver lista completa"),I.ac(),I.bc(12,"ngx-datatable",5),I.bc(13,"ngx-datatable-column",6),I.Tc(14,X,1,0,"ng-template",7),I.Tc(15,j,1,1,"ng-template",8),I.ac(),I.bc(16,"ngx-datatable-column",9),I.Tc(17,E,1,0,"ng-template",7),I.Tc(18,F,1,1,"ng-template",8),I.ac(),I.bc(19,"ngx-datatable-column",10),I.Tc(20,D,1,0,"ng-template",7),I.Tc(21,J,6,3,"ng-template",8),I.ac(),I.bc(22,"ngx-datatable-column",11),I.Tc(23,Y,1,0,"ng-template",7),I.Tc(24,W,1,1,"ng-template",8),I.ac(),I.bc(25,"ngx-datatable-column",12),I.Tc(26,U,1,0,"ng-template",7),I.Tc(27,R,1,1,"ng-template",8),I.ac(),I.ac(),I.ac(),I.ac(),I.bc(28,"div",1),I.bc(29,"mat-card",2),I.bc(30,"mat-form-field",13),I.bc(31,"mat-select",14),I.jc("ngModelChange",(function(t){return e.deposit=t})),I.Tc(32,q,2,2,"mat-option",15),I.ac(),I.ac(),I.bc(33,"mat-form-field",16),I.bc(34,"input",17),I.jc("keyup",(function(t){return e.updateFilter(t)})),I.ac(),I.ac(),I.bc(35,"ngx-datatable",18),I.bc(36,"ngx-datatable-column",19),I.Tc(37,$,1,0,"ng-template",7),I.Tc(38,K,1,1,"ng-template",8),I.ac(),I.bc(39,"ngx-datatable-column",20),I.Tc(40,B,1,0,"ng-template",7),I.Tc(41,Z,1,1,"ng-template",8),I.ac(),I.bc(42,"ngx-datatable-column",11),I.Tc(43,Q,1,0,"ng-template",7),I.Tc(44,tt,1,1,"ng-template",8),I.ac(),I.ac(),I.ac(),I.ac()),2&t&&(I.uc("@animate",I.Ac(34,nt,I.zc(33,it))),I.Gb(5),I.uc("@animate",I.Ac(37,nt,I.zc(36,rt))),I.Gb(1),I.uc("routerLink",I.zc(39,at)),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",5)("rows",e.stockMissing)("columns",e.stockMissingColumns),I.Gb(1),I.uc("@animate",I.Ac(41,nt,I.zc(40,ot))),I.Gb(1),I.uc("routerLink",I.zc(43,st)),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("rowHeight",50)("rows",e.lastestMovims),I.Gb(1),I.uc("flexGrow",1),I.Gb(3),I.uc("flexGrow",2),I.Gb(3),I.uc("flexGrow",5),I.Gb(3),I.uc("flexGrow",1),I.Gb(3),I.uc("flexGrow",2),I.Gb(4),I.uc("@animate",I.Ac(45,nt,I.zc(44,ct))),I.Gb(2),I.uc("ngModel",e.deposit),I.Gb(1),I.uc("ngForOf",e.deposits),I.Gb(3),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",40)("limit",8)("rows",e.stocks),I.Gb(1),I.uc("flexGrow",3),I.Gb(3),I.uc("flexGrow",3),I.Gb(3),I.uc("flexGrow",1))},directives:[o.a,H.d,H.e,H.c,H.b,a.b,b.h,k.d,k.b,k.c,k.a,O.a,A.a,r.n,r.q,n.l,_.b,P.p],styles:["mat-option[_ngcontent-%COMP%], mat-select[_ngcontent-%COMP%]{text-align:center}"],data:{animation:C.a}}),et),data:{title:"Principal",breadcrumb:"PRINCIPAL"}}]}];i.d(e,"AppDepositSettingsModule",(function(){return lt}));var ht,lt=((ht=function t(){_classCallCheck(this,t)}).\u0275mod=I.Tb({type:ht}),ht.\u0275inj=I.Sb({factory:function(t){return new(t||ht)},imports:[[n.c,h.b,r.j,o.e,r.t,p.b,d.b,x.b,c.b,a.c,A.b,_.c,s.d,l.d,m.c,f.a,O.c,u.b,g.a,v.a,y.a,k.e,w.a,b.k.forChild(ut)]]}),ht)}}]);