function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Poif:function(e,a,t){"use strict";t.r(a);var n,o=t("ofXK"),i=t("tyNb"),c=t("bSwM"),r=t("QibW"),s=t("qFsG"),l=t("lDzL"),u=t("NFeN"),p=t("bTqV"),f=t("Wp6s"),d=t("f0Cb"),b=t("wZkO"),h=t("MutI"),m=t("YUcS"),g=t("aYsj"),v=t("kmnG"),k=t("d3UM"),y=t("3Pt+"),w=t("1jcm"),C=t("Qu3c"),_=t("PCNd"),S=t("gU78"),M=t("3sEA"),V=t("ebDA"),x=t("0IaG"),j=function e(a,t,n,o){_classCallCheck(this,e),this._id=a,this.name=t,this.type=n,this.company=o},I=t("fXoL"),P=t("dNgK"),N=t("XiUz"),B=t("FKr1"),T=((n=function(){function e(a,t,n){_classCallCheck(this,e),this.data=a,this.dialogRef=t,this.snackBar=n,this.reason=new j("","","Ingreso","")}return _createClass(e,[{key:"ngOnInit",value:function(){this.build(this.data.payload)}},{key:"build",value:function(e){e&&(this.reason=e)}},{key:"openSnackBar",value:function(e,a){this.snackBar.open(e,a,{duration:1e4})}},{key:"submit",value:function(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({reason:this.reason})}},{key:"check",value:function(){return""!=this.reason.name}}]),e}()).\u0275fac=function(e){return new(e||n)(I.Vb(x.a),I.Vb(x.g),I.Vb(P.a))},n.\u0275cmp=I.Pb({type:n,selectors:[["app-reason-popop"]],decls:23,vars:3,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["appearance","fill"],["name","type",3,"ngModel","ngModelChange"],["value","Ingreso"],["value","Egreso"],["value","Transferencia"],["value","Ajuste"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){1&e&&(I.bc(0,"h1",0),I.Vc(1),I.ac(),I.bc(2,"mat-card",1),I.bc(3,"mat-card-content"),I.bc(4,"form"),I.bc(5,"div",2),I.bc(6,"div",3),I.bc(7,"mat-form-field",4),I.bc(8,"input",5),I.jc("ngModelChange",(function(e){return a.reason.name=e})),I.ac(),I.ac(),I.bc(9,"mat-form-field",6),I.bc(10,"mat-label"),I.Vc(11,"Tipo"),I.ac(),I.bc(12,"mat-select",7),I.jc("ngModelChange",(function(e){return a.reason.type=e})),I.bc(13,"mat-option",8),I.Vc(14," Ingreso "),I.ac(),I.bc(15,"mat-option",9),I.Vc(16," Egreso "),I.ac(),I.bc(17,"mat-option",10),I.Vc(18," Transferencia "),I.ac(),I.bc(19,"mat-option",11),I.Vc(20," Ajuste "),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.bc(21,"button",12),I.jc("click",(function(e){return a.submit()})),I.Vc(22,"Guardar"),I.ac(),I.ac(),I.ac(),I.ac()),2&e&&(I.Gb(1),I.Wc(a.data.title),I.Gb(7),I.uc("ngModel",a.reason.name),I.Gb(4),I.uc("ngModel",a.reason.type))},directives:[f.a,f.c,y.x,y.o,y.p,N.d,N.b,v.a,s.b,y.c,y.n,y.q,v.d,k.a,B.p,p.b],encapsulation:2}),n);function G(e,a){if(1&e){var t=I.cc();I.bc(0,"div",5),I.bc(1,"button",6),I.jc("click",(function(e){return I.Mc(t),I.nc().toNew()})),I.Vc(2,"Nuevo"),I.ac(),I.ac()}}var L,F=[{path:"",children:[{path:"list",component:(L=function(){function e(a,t,n,o,i){_classCallCheck(this,e),this._userService=a,this._reasonService=t,this.loader=n,this.snackBar=o,this.dialog=i,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=a.getToken(),this.identity=a.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getReasons(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}},{key:"getReasons",value:function(){var e=this;this._reasonService.getList(this.token,{company:this.identity.company._id}).subscribe((function(a){a.reasons&&(e.rows=a.reasons,e.temp=a.reasons)}),(function(a){e.openSnackBar(a.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,a){this.snackBar.open(e,a,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"type",name:"Tipo",flexGrow:1}]}},{key:"updateFilter",value:function(e){var a=e.target.value.toLowerCase(),t=Object.keys(this.temp[0]);if(t.splice(t.length-1),t.length){var n=this.temp.filter((function(e){for(var n=0;n<=t.length;n++){var o=t[n];if(e[o]&&e[o].toString().toLowerCase().indexOf(a)>-1)return!0}}));this.rows=n}}},{key:"toNew",value:function(){this.openPopUp(!0)}},{key:"openPopUp",value:function(e,a){var t=this;this.dialog.open(T,{width:"720px",disableClose:!1,data:{payload:a,title:e?"Nuevo motivo":"Editar motivo"}}).afterClosed().subscribe((function(a){if(a){if(t.loader.open(),e){var n=new j("",a.reason.name,a.reason.type,t.identity.company._id);t._reasonService.add(t.token,n).subscribe((function(e){e.reason&&(t.openSnackBar("Motivo creado","Cerrar"),t.getReasons())}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}else t._reasonService.edit(t.token,a.reason._id,a.reason).subscribe((function(e){e.reason&&(t.openSnackBar("Motivo actualizado","Cerrar"),t.getReasons())}),(function(e){t.openSnackBar(e.message,"Cerrar")}));t.loader.close()}}))}},{key:"toProfile",value:function(e,a){"click"==e.type&&this.canCreate&&this.openPopUp(!1,e.row)}}]),e}(),L.\u0275fac=function(e){return new(e||L)(I.Vb(S.a),I.Vb(V.a),I.Vb(M.a),I.Vb(P.a),I.Vb(x.b))},L.\u0275cmp=I.Pb({type:L,selectors:[["app-reason-list"]],features:[I.Fb([S.a,V.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){1&e&&(I.bc(0,"mat-form-field",0),I.bc(1,"input",1),I.jc("keyup",(function(e){return a.updateFilter(e)})),I.ac(),I.ac(),I.Tc(2,G,3,0,"div",2),I.bc(3,"div",3),I.bc(4,"ngx-datatable",4),I.jc("activate",(function(e){return a.toProfile(e)})),I.ac(),I.ac()),2&e&&(I.Gb(2),I.uc("ngIf",a.canCreate),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",a.rows)("columns",a.columns))},directives:[v.a,s.b,o.m,l.d,p.b],encapsulation:2}),L),data:{title:"Lista de razones",breadcrumb:"LISTA DE RAZONES"}}]}];t.d(a,"AppReasonModule",(function(){return A}));var R,A=((R=function e(){_classCallCheck(this,e)}).\u0275mod=I.Tb({type:R}),R.\u0275inj=I.Sb({factory:function(e){return new(e||R)},imports:[[o.c,y.t,v.c,y.j,d.b,k.b,_.a,h.d,C.b,u.b,p.c,f.e,w.a,c.b,r.c,b.c,s.c,m.a,l.e,g.a,i.k.forChild(F)]]}),R)}}]);