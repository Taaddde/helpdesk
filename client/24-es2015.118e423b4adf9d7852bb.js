(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{y64J:function(t,e,i){"use strict";i.r(e);var o=i("bFKe"),c=i("3Pt+"),a=i("bTqV"),n=i("bSwM"),r=i("A5z7"),s=i("FKr1"),d=i("iadO"),l=i("0IaG"),u=i("f0Cb"),h=i("kmnG"),b=i("NFeN"),p=i("qFsG"),m=i("STbY"),g=i("/t3+"),f=i("Qu3c"),v=i("ofXK"),k=i("7ZcW"),y=i("Wp6s"),T=i("tyNb"),x=i("2Vo4"),M=i("fXoL"),_=i("tk/3");let L=(()=>{class t{constructor(t){this.http=t,this.searchTerm=new x.a("")}getTodoList(){return this.http.get("/api/todoList")}getTodoById(t){return this.http.get("/api/todoList/"+t)}getTagList(){return this.http.get("/api/todoTag")}updateSearchTerm(t){this.searchTerm.next(t)}getSearchTerm(){return this.searchTerm}saveTag(t){return this.http.post("/api/todoTag/",t)}deleteTag(t){this.http.delete("/api/todoTag/"+t.id).subscribe(t=>{})}deleteTodo(t){return this.http.delete("/api/todoList/"+t.id)}updateTodo(t){let e;return t.selected=!1,t.id?e=this.http.put("/api/todoList/"+t.id,t):(t.id=1e6*Math.random(),e=this.http.post("/api/todoList/",t)),this.sub?(this.sub.unsubscribe(),this.sub=e.subscribe(t=>{})):this.sub=e.subscribe(t=>{}),e}}return t.\u0275fac=function(e){return new(e||t)(M.fc(_.c))},t.\u0275prov=M.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var G=i("XiUz");let C=(()=>{class t{constructor(t){this.todoService=t}ngOnInit(){this.updateSearchTerm("")}updateSearchTerm(t){this.todoService.updateSearchTerm(t)}}return t.\u0275fac=function(e){return new(e||t)(M.Vb(L))},t.\u0275cmp=M.Pb({type:t,selectors:[["app-todo"]],decls:13,vars:0,consts:[[1,"page-layout","overflow-hidden","pb-8"],[1,"header-bg","dark-blue"],[1,"content"],["fxLayout","row wrap","fxLayoutAlign","center center",1,"content-header"],["fxFlex","1 1 0%",1,"search-box","mat-elevation-z2"],["mat-icon-button",""],["type","text","placeholder","Buscar una tarea",3,"keyup"],["serachTerm",""],[1,"content-body"],[1,"content-card","default-bg","height-100vh",3,"perfectScrollbar"]],template:function(t,e){if(1&t){const t=M.cc();M.bc(0,"div",0),M.Wb(1,"div",1),M.bc(2,"div",2),M.bc(3,"div",3),M.bc(4,"div",4),M.bc(5,"button",5),M.bc(6,"mat-icon"),M.Vc(7,"search"),M.ac(),M.ac(),M.bc(8,"input",6,7),M.jc("keyup",(function(i){M.Mc(t);const o=M.Jc(9);return e.updateSearchTerm(o.value)})),M.ac(),M.ac(),M.ac(),M.bc(10,"div",8),M.bc(11,"div",9),M.Wb(12,"router-outlet"),M.ac(),M.ac(),M.ac(),M.ac()}},directives:[G.d,G.c,G.b,a.b,b.a,o.b,T.l],styles:[""],changeDetection:0}),t})();var O=i("5+WD"),S=i("Kj3r"),V=i("1G5W"),D=i("XNiG"),F=i("/MnI"),I=i("gU78"),w=(i("AJX/"),i("YFeJ"));let j=(()=>{class t{constructor(t){this._httpClient=t,this.httpOptions={headers:new _.e({"Content-Type":"application/json",Authorization:"null"})},this.url=w.a.url}add(t,e){let i=JSON.stringify(e);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+"tag/add",i,this.httpOptions)}edit(t,e,i){let o=JSON.stringify(i);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+"tag/update/"+e,o,this.httpOptions)}delete(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.delete(this.url+"tag/delete/"+e,this.httpOptions)}getList(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/list",{headers:this.httpOptions.headers,params:e})}getOne(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/tag/"+e,this.httpOptions)}getForName(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/for-name/"+e,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(M.fc(_.c))},t.\u0275prov=M.Rb({token:t,factory:t.\u0275fac}),t})();var W=i("wd/R"),A=i("dNgK"),R=i("znSr");let B=(()=>{class t{transform(t,e){return void 0!==t&&e?t.filter(t=>t.title.toLowerCase().match(e.toLowerCase())||t.note.toLowerCase().match(e.toLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=M.Ub({name:"todoSearch",type:t,pure:!0}),t})();function N(t,e){if(1&t){const t=M.cc();M.bc(0,"button",3),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().filterTodoListOnTag(o)})),M.Vc(1),M.ac()}if(2&t){const t=e.$implicit;M.Gb(1),M.Xc(" ",t.name," ")}}function Y(t,e){1&t&&(M.bc(0,"div",12),M.Vc(1," No hay tareas para mostrar "),M.ac())}function z(t,e){1&t&&(M.bc(0,"mat-icon",26),M.Vc(1,"open_with"),M.ac())}function J(t,e){if(1&t&&(M.bc(0,"strong",27),M.Vc(1),M.ac()),2&t){const t=M.nc().$implicit;M.Gb(1),M.Xc("#",t.numTodo,"")}}function $(t,e){if(1&t&&(M.bc(0,"div"),M.bc(1,"mat-chip"),M.Vc(2),M.ac(),M.ac()),2&t){const t=e.$implicit;M.Gb(2),M.Xc(" ",t.name," ")}}const X=function(t,e){return{"todo-box":!0,readed:t,done:e}},q=function(t){return{"fill-color-warn":t}},P=function(t){return{"fill-color-accent":t}};function E(t,e){if(1&t){const t=M.cc();M.bc(0,"div",13),M.Tc(1,z,2,0,"mat-icon",14),M.Tc(2,J,2,1,"strong",15),M.bc(3,"div",16),M.bc(4,"div",17),M.bc(5,"span"),M.bc(6,"strong"),M.Vc(7),M.ac(),M.Vc(8),M.ac(),M.bc(9,"span"),M.Vc(10),M.ac(),M.bc(11,"mat-chip-list",null,18),M.Tc(13,$,3,1,"div",19),M.ac(),M.ac(),M.bc(14,"div",20),M.bc(15,"button",21),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().toggleImportant(o)})),M.bc(16,"mat-icon",22),M.Vc(17),M.ac(),M.ac(),M.bc(18,"button",21),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().toggleStar(o)})),M.bc(19,"mat-icon",22),M.Vc(20),M.ac(),M.ac(),M.bc(21,"div"),M.bc(22,"button",1),M.bc(23,"mat-icon"),M.Vc(24,"more_vert"),M.ac(),M.ac(),M.bc(25,"mat-menu",23,24),M.bc(27,"button",3),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().toggleRead(o)})),M.bc(28,"mat-icon"),M.Vc(29),M.ac(),M.bc(30,"span",25),M.Vc(31," Le\xeddo "),M.ac(),M.ac(),M.bc(32,"button",3),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().toggleDone(o)})),M.bc(33,"mat-icon"),M.Vc(34),M.ac(),M.bc(35,"span",25),M.Vc(36," Realizado "),M.ac(),M.ac(),M.ac(),M.ac(),M.ac(),M.ac(),M.ac()}if(2&t){const t=e.$implicit,i=M.Jc(26),o=M.nc();M.uc("ngClass",M.Bc(16,X,null==t.usersWhoRead?null:t.usersWhoRead.includes(o.identity._id),t.done)),M.Gb(1),M.uc("ngIf",!t.numTodo),M.Gb(1),M.uc("ngIf",t.numTodo),M.Gb(2),M.wc("routerLink","/todo/list/",null==t?null:t._id,""),M.Gb(3),M.Wc(null==t?null:t.title),M.Gb(1),M.Xc(" | ",o.changeDate(null==t?null:t.startDate),""),M.Gb(2),M.Wc(null==t?null:t.note),M.Gb(3),M.uc("ngForOf",null==t?null:t.tags),M.Gb(3),M.uc("ngClass",M.Ac(19,q,null==t?null:t.important)),M.Gb(1),M.Wc(null!=t&&t.important?"error":"error_outline"),M.Gb(2),M.uc("ngClass",M.Ac(21,P,null==t?null:t.starred)),M.Gb(1),M.Wc(null!=t&&t.starred?"star":"star_outline"),M.Gb(2),M.uc("matMenuTriggerFor",i),M.Gb(3),M.uc("xPosition","before"),M.Gb(4),M.Wc(null!=t.usersWhoRead&&t.usersWhoRead.includes(o.identity._id)?"check_box":"check_box_outline_blank"),M.Gb(5),M.Wc(t.done?"check_box":"check_box_outline_blank")}}let U=(()=>{class t{constructor(t,e,i,o,c,a){this.todoService=t,this._todoService=e,this._userService=i,this._tagService=o,this.cdr=c,this.snackBar=a,this.tagMap=new Map,this.isMasterToggled=!1,this.toggledItemNumber=0,this.filter="No Realizados",this.unsubscribeAll=new D.a,this.token=i.getToken(),this.identity=i.getIdentity()}ngOnInit(){this.getTodo(),this.getTags(),this.todoService.getSearchTerm().pipe(Object(S.a)(250)).pipe(Object(V.a)(this.unsubscribeAll)).subscribe(t=>{this.searchTerm=t,this.cdr.markForCheck()})}getTodo(){this._todoService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.todos&&(this.tempList=t.todos,this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.done}))},t=>{this.openSnackBar(t.message,"Cerrar")})}getTags(){this._tagService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.tags&&(this.tags=t.tags)},t=>{this.openSnackBar(t.message,"Cerrar")})}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete()}drop(t){Object(O.e)(this.todoList,t.previousIndex,t.currentIndex),this.cdr.markForCheck()}filterTodoListOnTag(t){let e=new Array;this.tempList.forEach(i=>{if(i.tags)for(let o=0;o<i.tags.length;o++)if(i.tags[o].name==t.name){e.push(i);break}}),this.todoList=e}onTodoOptionSelected(t){switch(t.target.innerText){case"Todo":this.todoList=this.tempList,this.filter="Todo";break;case"Todo - Pendientes":this.todoList=this.tempList.filter(t=>!t.done),this.filter="Todo - Pendientes";break;case"Todo - Realizados":this.todoList=this.tempList.filter(t=>t.done),this.filter="Todo - Realizados";break;case"Todo - Mios":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))}),this.filter="Mios";break;case"Le\xeddo":this.todoList=this.tempList.filter(t=>{var e,i;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&(null===(i=t.usersWhoRead)||void 0===i?void 0:i.includes(this.identity._id))}),this.filter="Le\xeddo";break;case"No Le\xeddo":this.todoList=this.tempList.filter(t=>{var e,i;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!(null===(i=t.usersWhoRead)||void 0===i?void 0:i.includes(this.identity._id))}),this.filter="No Le\xeddo";break;case"Importante":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.important}),this.filter="Importante";break;case"No Importante":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.important}),this.filter="No Importante";break;case"Realizado":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.done}),this.filter="Realizado";break;case"No Realizado":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.done}),this.filter="No Realizado";break;case"Favorito":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.starred}),this.filter="Favorito";break;case"No Favorito":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.starred}),this.filter="No favorito"}this.cdr.detectChanges()}masterToggle(){this.toggledItemNumber=0,this.isMasterToggled=!this.isMasterToggled,this.todoList.forEach(this.isMasterToggled?t=>{t.selected=!0,this.toggledItemNumber++}:t=>{t.selected=!1,this.toggledItemNumber--}),this.cdr.detectChanges()}toggleCheckBox(t){t.selected=!t.selected,t.selected?this.toggledItemNumber++:this.toggledItemNumber--,this.toggledItemNumber==this.todoList.length?this.isMasterToggled=!0:0==this.toggledItemNumber&&(this.isMasterToggled=!1)}toggleImportant(t){this.userInTodo(t)?(t.important=!t.important,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleStar(t){this.userInTodo(t)?(t.starred=!t.starred,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleRead(t){var e;(null===(e=t.usersWhoRead)||void 0===e?void 0:e.includes(this.identity._id))?t.usersWhoRead.splice(t.usersWhoRead.indexOf(this.identity._id),1):t.usersWhoRead.push(this.identity._id),this.updateTodo(t)}toggleDone(t){this.userInTodo(t)?(t.done=!t.done,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}updateTodo(t){this._todoService.edit(this.token,t._id,t).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}userInTodo(t){var e;return!!t.users&&-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))}changeDate(t){return W(t).format("DD-MM-YYYY")}}return t.\u0275fac=function(e){return new(e||t)(M.Vb(L),M.Vb(F.a),M.Vb(I.a),M.Vb(j),M.Vb(M.h),M.Vb(A.a))},t.\u0275cmp=M.Pb({type:t,selectors:[["app-todo-list"]],decls:47,vars:9,consts:[["fxLayoutGap","5px"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["tagMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","start center"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","end center"],["mat-raised-button","","color","primary","routerLink","/todo/add"],["cdkDropList","",1,"todo-list",3,"cdkDropListDropped"],["class","todo-box","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","cdkDrag","","cdkDragHandle","",3,"ngClass",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center",1,"todo-box"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","cdkDrag","","cdkDragHandle","",3,"ngClass"],["class","move-handler",4,"ngIf"],["style","font-size: 20px;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center","fxFlex","1 1 0%"],["fxLayout","column","fxLayoutGap","8px","fxFlex","1 1 0%",2,"cursor","pointer",3,"routerLink"],["chipList",""],[4,"ngFor","ngForOf"],["fxFlexAlign","end center","fxLayout","row"],["mat-icon-button","",3,"click"],[3,"ngClass"],[3,"xPosition"],["menu2","matMenu"],[2,"vertical-align","middle"],[1,"move-handler"],[2,"font-size","20px"]],template:function(t,e){if(1&t&&(M.bc(0,"mat-toolbar",0),M.bc(1,"button",1),M.bc(2,"mat-icon"),M.Vc(3,"arrow_drop_down"),M.ac(),M.ac(),M.bc(4,"mat-menu",null,2),M.bc(6,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(7,"Todo"),M.ac(),M.bc(8,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(9,"Todo - Pendientes"),M.ac(),M.bc(10,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(11,"Todo - Realizados"),M.ac(),M.bc(12,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(13,"Todo - Mios"),M.ac(),M.bc(14,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(15,"Realizado"),M.ac(),M.bc(16,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(17,"No realizado"),M.ac(),M.bc(18,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(19,"Le\xeddo"),M.ac(),M.bc(20,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(21,"No le\xeddo"),M.ac(),M.bc(22,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(23," Favorito "),M.ac(),M.bc(24,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(25," No favorito "),M.ac(),M.bc(26,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(27," Importante "),M.ac(),M.bc(28,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected(t)})),M.Vc(29," No importante "),M.ac(),M.ac(),M.bc(30,"button",1),M.bc(31,"mat-icon"),M.Vc(32,"label"),M.ac(),M.ac(),M.bc(33,"mat-menu",null,4),M.bc(35,"button",3),M.jc("click",(function(t){return e.onTodoOptionSelected({target:{innerText:"Todo"}})})),M.Vc(36," Todo "),M.ac(),M.Tc(37,N,2,1,"button",5),M.ac(),M.bc(38,"div",6),M.Vc(39),M.ac(),M.bc(40,"div",7),M.bc(41,"button",8),M.Vc(42," Crear tarea "),M.ac(),M.ac(),M.ac(),M.bc(43,"div",9),M.jc("cdkDropListDropped",(function(t){return e.drop(t)})),M.Tc(44,Y,2,0,"div",10),M.Tc(45,E,37,23,"div",11),M.oc(46,"todoSearch"),M.ac()),2&t){const t=M.Jc(5),i=M.Jc(34);M.Gb(1),M.uc("matMenuTriggerFor",t),M.Gb(29),M.uc("matMenuTriggerFor",i),M.Gb(7),M.uc("ngForOf",e.tags),M.Gb(2),M.Xc(" ",e.filter," "),M.Gb(5),M.uc("ngIf",(null==e.todoList?null:e.todoList.length)<1),M.Gb(1),M.uc("ngForOf",M.qc(46,6,e.todoList,e.searchTerm))}},directives:[g.a,G.e,a.b,m.c,b.a,m.d,m.a,v.l,G.d,G.b,G.c,T.h,O.c,v.m,O.a,O.b,v.k,R.a,r.b,G.a,r.a],pipes:[B],styles:[".readed[_ngcontent-%COMP%]{background-color:#d3d3d3}.done[_ngcontent-%COMP%]{background-color:#90ee90}"],changeDetection:0}),t})();class H{constructor(t,e,i){this._id=t,this.name=e,this.company=i}}function K(t,e){if(1&t){const t=M.cc();M.bc(0,"button",9),M.jc("click",(function(e){M.Mc(t);const i=M.nc().$implicit;return M.nc().deleteTag(i)})),M.Vc(1,"Eliminar"),M.ac()}}function Q(t,e){if(1&t&&(M.bc(0,"div",0),M.bc(1,"span"),M.Vc(2),M.ac(),M.Tc(3,K,2,0,"button",8),M.ac()),2&t){const t=e.$implicit,i=M.nc();M.Gb(2),M.Wc(t.name),M.Gb(1),M.uc("ngIf","ROLE_ADMIN"!=i.identity.role)}}let Z=(()=>{class t{constructor(t,e,i,o,c){this.snackBar=t,this.dialogRef=e,this.data=i,this._tagService=o,this._userService=c,this.token=c.getToken(),this.identity=c.getIdentity()}ngOnInit(){this.getTags()}getTags(){this._tagService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.tags&&(this.tags=t.tags)})}addTag(t){let e=new H("",t,this.identity.company._id);this._tagService.add(this.token,e).subscribe(t=>{t.tag&&this.getTags()},t=>{this.openSnackBar(t.message,"Cerrar")})}deleteTag(t){this._tagService.delete(this.token,t._id).subscribe(t=>{t.tag&&this.getTags()},t=>{this.openSnackBar(t.message,"Cerrar")})}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}}return t.\u0275fac=function(e){return new(e||t)(M.Vb(A.a),M.Vb(l.g),M.Vb(l.a),M.Vb(j),M.Vb(I.a))},t.\u0275cmp=M.Pb({type:t,selectors:[["app-tag-dialogue"]],decls:12,vars:1,consts:[["fxLayout","row","fxLayoutAlign","space-between center"],["matInput","","placeholder","Nueva etiqueta","required","",3,"keyup.enter"],["tagInput",""],["color","primary","mat-raised-button","",3,"click"],["fxLayout","column","fxLayoutGap","16px",2,"margin-top","20px"],["fxLayout","row","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],["color","warn","mat-raised-button","",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"click"]],template:function(t,e){if(1&t){const t=M.cc();M.bc(0,"mat-dialog-content"),M.bc(1,"div",0),M.bc(2,"mat-form-field"),M.bc(3,"input",1,2),M.jc("keyup.enter",(function(i){M.Mc(t);const o=M.Jc(4);return e.addTag(o.value),o.value=""})),M.ac(),M.ac(),M.bc(5,"button",3),M.jc("click",(function(i){M.Mc(t);const o=M.Jc(4);return e.addTag(o.value),o.value=""})),M.Vc(6,"A\xf1adir"),M.ac(),M.ac(),M.bc(7,"div",4),M.Tc(8,Q,4,2,"div",5),M.ac(),M.ac(),M.bc(9,"mat-dialog-actions",6),M.bc(10,"button",7),M.Vc(11,"Cerrar"),M.ac(),M.ac()}2&t&&(M.Gb(8),M.uc("ngForOf",e.tags))},directives:[l.e,G.d,G.c,h.a,p.b,a.b,G.e,v.l,l.c,l.d,v.m],styles:[""],changeDetection:0}),t})();var tt=i("3uMe"),et=i("47Ty"),it=i("AV9v"),ot=i("sd1j"),ct=i("Q2c7"),at=i("d3UM");function nt(t,e){if(1&t&&(M.bc(0,"mat-option",10),M.Vc(1),M.ac()),2&t){const t=e.$implicit;M.uc("value",t),M.Gb(1),M.Xc(" ",t," ")}}function rt(t,e){if(1&t){const t=M.cc();M.bc(0,"div",11),M.bc(1,"mat-form-field",4),M.bc(2,"input",12),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().firstDate=e})),M.ac(),M.Wb(3,"mat-datepicker-toggle",13),M.Wb(4,"mat-datepicker",null,14),M.ac(),M.ac()}if(2&t){const t=M.Jc(5),e=M.nc();M.Gb(2),M.uc("ngModel",e.firstDate)("matDatepicker",t),M.Gb(1),M.uc("for",t)}}function st(t,e){if(1&t){const t=M.cc();M.bc(0,"div",15),M.bc(1,"div",16),M.bc(2,"div",17),M.bc(3,"div",18),M.bc(4,"div",17),M.bc(5,"div",19),M.bc(6,"label",20),M.Vc(7,"Lun"),M.ac(),M.ac(),M.ac(),M.bc(8,"div",17),M.bc(9,"div",19),M.bc(10,"input",21,22),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.lun=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(12,"div",18),M.bc(13,"div",17),M.bc(14,"div",19),M.bc(15,"label",20),M.Vc(16,"Mar"),M.ac(),M.ac(),M.ac(),M.bc(17,"div",17),M.bc(18,"div",19),M.bc(19,"input",23,24),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.mar=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(21,"div",18),M.bc(22,"div",17),M.bc(23,"div",19),M.bc(24,"label",20),M.Vc(25,"Mie"),M.ac(),M.ac(),M.ac(),M.bc(26,"div",17),M.bc(27,"div",19),M.bc(28,"input",25,26),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.mie=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(30,"div",18),M.bc(31,"div",17),M.bc(32,"div",19),M.bc(33,"label",20),M.Vc(34,"Jue"),M.ac(),M.ac(),M.ac(),M.bc(35,"div",17),M.bc(36,"div",19),M.bc(37,"input",27,28),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.jue=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(39,"div",18),M.bc(40,"div",17),M.bc(41,"div",19),M.bc(42,"label",20),M.Vc(43,"Vie"),M.ac(),M.ac(),M.ac(),M.bc(44,"div",17),M.bc(45,"div",19),M.bc(46,"input",29,30),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.vie=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(48,"div",18),M.bc(49,"div",17),M.bc(50,"div",19),M.bc(51,"label",20),M.Vc(52,"Sab"),M.ac(),M.ac(),M.ac(),M.bc(53,"div",17),M.bc(54,"div",19),M.bc(55,"input",31,32),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().dayOfWeek.sab=e})),M.ac(),M.ac(),M.ac(),M.ac(),M.ac(),M.ac(),M.ac()}if(2&t){const t=M.nc();M.Gb(10),M.uc("ngModel",t.dayOfWeek.lun),M.Gb(9),M.uc("ngModel",t.dayOfWeek.mar),M.Gb(9),M.uc("ngModel",t.dayOfWeek.mie),M.Gb(9),M.uc("ngModel",t.dayOfWeek.jue),M.Gb(9),M.uc("ngModel",t.dayOfWeek.vie),M.Gb(9),M.uc("ngModel",t.dayOfWeek.sab)}}function dt(t,e){if(1&t){const t=M.cc();M.bc(0,"div",11),M.bc(1,"mat-form-field",4),M.bc(2,"input",33),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().lastDate=e})),M.ac(),M.Wb(3,"mat-datepicker-toggle",13),M.Wb(4,"mat-datepicker",null,34),M.ac(),M.ac()}if(2&t){const t=M.Jc(5),e=M.nc();M.Gb(2),M.uc("ngModel",e.lastDate)("matDatepicker",t),M.Gb(1),M.uc("for",t)}}function lt(t,e){if(1&t){const t=M.cc();M.bc(0,"div",11),M.bc(1,"mat-form-field",4),M.bc(2,"input",12),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().firstDate=e})),M.ac(),M.Wb(3,"mat-datepicker-toggle",13),M.Wb(4,"mat-datepicker",null,35),M.ac(),M.ac()}if(2&t){const t=M.Jc(5),e=M.nc();M.Gb(2),M.uc("ngModel",e.firstDate)("matDatepicker",t),M.Gb(1),M.uc("for",t)}}function ut(t,e){if(1&t){const t=M.cc();M.bc(0,"div",15),M.bc(1,"mat-form-field",4),M.bc(2,"input",36),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().forDays=e})),M.ac(),M.ac(),M.ac()}if(2&t){const t=M.nc();M.Gb(2),M.uc("ngModel",t.forDays)}}function ht(t,e){if(1&t){const t=M.cc();M.bc(0,"div",11),M.bc(1,"mat-form-field",4),M.bc(2,"input",33),M.jc("ngModelChange",(function(e){return M.Mc(t),M.nc().lastDate=e})),M.ac(),M.Wb(3,"mat-datepicker-toggle",13),M.Wb(4,"mat-datepicker",null,37),M.ac(),M.ac()}if(2&t){const t=M.Jc(5),e=M.nc();M.Gb(2),M.uc("ngModel",e.lastDate)("matDatepicker",t),M.Gb(1),M.uc("for",t)}}let bt=(()=>{class t{constructor(t,e,i){this.data=t,this.dialogRef=e,this.snackBar=i,this.types=["Cada semana","Cada X d\xedas"],this.dayOfWeek={lun:!1,mar:!1,mie:!1,jue:!1,vie:!1,sab:!1},this.forDays=1}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}submit(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({type:this.type,dayOfWeek:this.dayOfWeek,firstDate:this.firstDate,lastDate:this.lastDate,forDays:this.forDays})}check(){return!!(""!=this.type&&this.firstDate&&this.lastDate&&this.forDays)}}return t.\u0275fac=function(e){return new(e||t)(M.Vb(l.a),M.Vb(l.g),M.Vb(A.a))},t.\u0275cmp=M.Pb({type:t,selectors:[["app-todo-repite-popop"]],decls:18,vars:8,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["placeholder","Tipo de repetici\xf3n",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","25","class","pr-1",4,"ngIf"],["fxFlex","50","class","pr-1",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["fxFlex","25",1,"pr-1"],["name","firstDate","matInput","","placeholder","Fecha de inicio","required","",3,"ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["picker4",""],["fxFlex","50",1,"pr-1"],[1,"form-group"],[1,"form-row"],[1,"col-2","col-sm-2","col-md-2","col-lg-2","col-xl-2"],[1,"col","text-center"],[1,"col-form-label"],["type","checkbox","name","lun",3,"ngModel","ngModelChange"],["lun","ngModel"],["type","checkbox","name","mar",3,"ngModel","ngModelChange"],["mar","ngModel"],["type","checkbox","name","mie",3,"ngModel","ngModelChange"],["mie","ngModel"],["type","checkbox","name","jue",3,"ngModel","ngModelChange"],["jue","ngModel"],["type","checkbox","name","vie",3,"ngModel","ngModelChange"],["vie","ngModel"],["type","checkbox","name","sab",3,"ngModel","ngModelChange"],["sab","ngModel"],["name","lastDate","matInput","","placeholder","Fecha de fin","required","",3,"ngModel","matDatepicker","ngModelChange"],["picker2",""],["picker",""],["matInput","","type","number","min","1","placeholder","\xbfRepetir cada cuantos d\xedas?","name","forDays",3,"ngModel","ngModelChange"],["picker3",""]],template:function(t,e){1&t&&(M.bc(0,"h1",0),M.Vc(1),M.ac(),M.bc(2,"mat-card",1),M.bc(3,"mat-card-content"),M.bc(4,"form"),M.bc(5,"div",2),M.bc(6,"div",3),M.bc(7,"mat-form-field",4),M.bc(8,"mat-select",5),M.jc("selectionChange",(function(t){return e.type=t.value})),M.Tc(9,nt,2,2,"mat-option",6),M.ac(),M.ac(),M.ac(),M.Tc(10,rt,6,3,"div",7),M.Tc(11,st,57,6,"div",8),M.Tc(12,dt,6,3,"div",7),M.Tc(13,lt,6,3,"div",7),M.Tc(14,ut,3,1,"div",8),M.Tc(15,ht,6,3,"div",7),M.ac(),M.bc(16,"button",9),M.jc("click",(function(t){return e.submit()})),M.Vc(17,"Guardar"),M.ac(),M.ac(),M.ac(),M.ac()),2&t&&(M.Gb(1),M.Wc(e.data.title),M.Gb(8),M.uc("ngForOf",e.types),M.Gb(1),M.uc("ngIf","Cada semana"==e.type),M.Gb(1),M.uc("ngIf","Cada semana"==e.type),M.Gb(1),M.uc("ngIf","Cada semana"==e.type),M.Gb(1),M.uc("ngIf","Cada X d\xedas"==e.type),M.Gb(1),M.uc("ngIf","Cada X d\xedas"==e.type),M.Gb(1),M.uc("ngIf","Cada X d\xedas"==e.type))},directives:[l.h,y.a,y.c,c.x,c.o,c.p,G.d,G.b,h.a,at.a,v.l,v.m,a.b,s.p,p.b,c.c,d.b,c.u,c.n,c.q,d.d,h.e,d.a,c.a,c.s],encapsulation:2}),t})();function pt(t,e){if(1&t){const t=M.cc();M.bc(0,"button",41),M.jc("click",(function(e){return M.Mc(t),M.nc().openRepiteTodos()})),M.bc(1,"mat-icon",42),M.Vc(2,"alarm_add"),M.ac(),M.ac()}if(2&t){const t=M.nc();M.Gb(1),M.uc("color",t.repite?"warn":"")}}function mt(t,e){if(1&t&&(M.bc(0,"button",43),M.bc(1,"mat-icon"),M.Vc(2,"person_add"),M.ac(),M.ac()),2&t){M.nc();const t=M.Jc(11);M.uc("matMenuTriggerFor",t)}}function gt(t,e){if(1&t){const t=M.cc();M.bc(0,"button",44),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().setAgent(o)})),M.Vc(1),M.ac()}if(2&t){const t=e.$implicit;M.Gb(1),M.Yc(" ",t.name," ",t.surname," ")}}function ft(t,e){if(1&t){const t=M.cc();M.bc(0,"button",44),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().updateTodoTag(o)})),M.Vc(1),M.ac()}if(2&t){const t=e.$implicit;M.Gb(1),M.Xc(" ",t.name," ")}}function vt(t,e){if(1&t){const t=M.cc();M.bc(0,"div"),M.bc(1,"mat-chip",45),M.jc("removed",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().removeTagFromTodo(o)})),M.bc(2,"span"),M.bc(3,"mat-icon",46),M.Vc(4,"label"),M.ac(),M.Vc(5),M.ac(),M.bc(6,"mat-icon",47),M.Vc(7,"cancel"),M.ac(),M.ac(),M.ac()}if(2&t){const t=e.$implicit;M.Gb(1),M.uc("selectable",!0)("removable",!0),M.Gb(4),M.Wc(t.name)}}function kt(t,e){if(1&t){const t=M.cc();M.bc(0,"div"),M.bc(1,"mat-chip",45),M.jc("removed",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().deleteAgent(o)})),M.bc(2,"span"),M.bc(3,"mat-icon",46),M.Vc(4,"person"),M.ac(),M.Vc(5),M.ac(),M.bc(6,"mat-icon",47),M.Vc(7,"cancel"),M.ac(),M.ac(),M.ac()}if(2&t){const t=e.$implicit;M.Gb(1),M.uc("selectable",!0)("removable",!0),M.Gb(4),M.Yc("",t.name," ",t.surname,"")}}function yt(t,e){if(1&t){const t=M.cc();M.bc(0,"mat-option",48),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().setTeam(o)})),M.Vc(1),M.ac()}if(2&t){const t=e.$implicit;M.uc("value",t.name),M.Gb(1),M.Wc(t.name)}}function Tt(t,e){if(1&t){const t=M.cc();M.bc(0,"button",49),M.jc("click",(function(e){return M.Mc(t),M.nc(),M.Jc(68).clear(e)})),M.bc(1,"mat-icon"),M.Vc(2,"clear"),M.ac(),M.ac()}}function xt(t,e){if(1&t){const t=M.cc();M.bc(0,"div",28),M.bc(1,"mat-chip",50),M.jc("click",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().goToLink(o)}))("removed",(function(i){M.Mc(t);const o=e.$implicit;return M.nc().removeFileFromTodo(o)})),M.bc(2,"span"),M.bc(3,"mat-icon",46),M.Vc(4,"attach_file"),M.ac(),M.Vc(5),M.ac(),M.bc(6,"mat-icon",47),M.Vc(7,"cancel"),M.ac(),M.ac(),M.ac()}if(2&t){const t=e.index;M.Gb(1),M.uc("selectable",!0)("removable",!0),M.Gb(4),M.Xc("Archivo ",t+1,"")}}function Mt(t,e){if(1&t){const t=M.cc();M.bc(0,"button",51),M.jc("click",(function(e){return M.Mc(t),M.nc().saveTodo(!0)})),M.Vc(1,"Guardar y finalizar"),M.ac()}}const _t=function(t){return{"fill-color-warn":t}},Lt=function(t){return{"fill-color-accent":t}};let Gt=(()=>{class t{constructor(t,e,i,o,c,a,n,r,s,d,l,u){this.todoService=t,this.tagDialogue=e,this._userService=i,this._todoService=o,this._tagService=c,this._teamService=a,this._notificationService=n,this.router=r,this.snackBar=s,this.route=d,this._uploadService=l,this.cdr=u,this.todo={title:"",note:"",startDate:"",dueDate:"",done:!1,important:!1,starred:!1,read:!1,selected:!1,tags:[],users:[],usersWhoRead:[],files:[],company:""},this.url=w.a.url,this.teamName="",this.token=i.getToken(),this.identity=i.getIdentity(),this.agentsIn=new Array}ngOnInit(){this.getTodo(),this.getTags(),this.getTeams()}getTodo(){let t=this.route.snapshot.params.id;t&&this._todoService.getOne(this.token,t).subscribe(t=>{t.todo&&(this.todo=t.todo,this.cdr.markForCheck(),this.todo.users&&(this.agentsIn=this.todo.users),this.todo.team&&(this.teamName=this.todo.team.name,this.getAgents(this.todo.team.users)))},t=>{this.openSnackBar(t.message,"Cerrar")})}getAgents(t){this.agents=t}setAgent(t){this.agentsIn.push(t)}deleteAgent(t){this.agentsIn.splice(this.agentsIn.indexOf(t),1)}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(t=>{t.teams&&(this.teams=t.teams)},t=>{this.openSnackBar(t.message,"Cerrar")})}setTeam(t){this.todo.team=t._id,this.agentsIn=new Array,this.getAgents(t.users)}saveTodo(t){if(t&&(this.todo.done=!0),this.agentsIn){let t=new Array;this.agentsIn.forEach(e=>{t.push(e._id)}),this.todo.users=t}this.todo.company=this.identity.company._id,this.todo._id?this._todoService.edit(this.token,this.todo._id,this.todo).subscribe(t=>{t.todo&&(this.uploadFile(t.todo._id),this._notificationService.getList(this.token,{todo:this.todo._id}).subscribe(t=>{t.notifications&&(t.notifications.forEach(t=>{if(-1!=this.todo.users.indexOf(t.user)){this.todo.users.splice(this.todo.users.indexOf(t.user),1),t.message=this.todo.title;let e=W(this.todo.startDate).format("YYYY-MM-DD HH:mm");t.date=e,t.dateInit=e,this._notificationService.edit(this.token,t._id,t).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}else this._notificationService.delete(this.token,t._id).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}),this.todo.users.length>0&&this.todo.users.forEach(t=>{let e=W(this.todo.startDate).format("YYYY-MM-DD HH:mm"),i=new it.a("",this.todo.title,"list_alt",e,e,"todo/list/"+this.todo._id,"accent",t,null,this.todo._id);this._notificationService.add(this.token,i).subscribe(t=>{},t=>{})}))},t=>{this.openSnackBar(t.message,"Cerrar")}),this.router.navigateByUrl("/todo/list"))},t=>{this.openSnackBar(t.message,"Cerrar")}):this.repite?this.getRepiteDates().forEach(t=>{this.todo.startDate=W(t).format("YYYY-MM-DD"),this.todo.dueDate=W(t).format("YYYY-MM-DD"),this.addTodo()}):this.addTodo()}getRepiteDates(){var t=new Array;let e=W(this.repite.firstDate),i=this.repite.lastDate;if("Cada semana"==this.repite.type){let o=this.repite.dayOfWeek,c=[];if(o.lun&&c.push(1),o.mar&&c.push(2),o.mie&&c.push(3),o.jue&&c.push(4),o.vie&&c.push(5),o.sab&&c.push(6),!c.includes(e.weekday()))for(e.add(1,"day");!c.includes(e.weekday());)e.add(1,"day");for(;e.isBefore(i);)c.includes(e.weekday())&&t.push(e.format("YYYY-MM-DD")),e.add(1,"day")}else{let o=this.repite.forDays;for(t.push(e.format("YYYY-MM-DD"));e.isBefore(i);)e.add(o,"day"),0==e.weekday()&&e.add(1,"day"),t.push(e.format("YYYY-MM-DD"))}return t}addTodo(){this._todoService.add(this.token,this.todo).subscribe(t=>{t.todo&&(this.uploadFile(t.todo._id),this.todo.users.forEach(e=>{let i=W(this.todo.startDate).format("YYYY-MM-DD HH:mm"),o=new it.a("",this.todo.title,"list_alt",i,i,"todo/list/"+t.todo._id,"accent",e,null,t.todo._id);this._notificationService.add(this.token,o).subscribe(t=>{},t=>{})}),this.router.navigateByUrl("/todo/list"))},t=>{this.openSnackBar(t.message,"Cerrar")})}uploadFile(t){null!=this.files&&null!=this.files&&this._uploadService.makeFileRequest(this.url+"todo/file/"+t,[],this.files.files,this.token,"file").then(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}deleteTodo(){""!=this.todo._id?this._todoService.delete(this.token,this.todo._id).subscribe(t=>{t.todo&&this.router.navigateByUrl("/todo/list")},t=>{this.openSnackBar(t.message,"Cerrar")}):this.router.navigateByUrl("/todo/list")}getTags(){this._tagService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.tags&&(this.tagList=t.tags)},t=>{this.openSnackBar(t.message,"Cerrar")})}updateTodoTag(t){this._todoService.addTag(this.token,this.todo._id,t._id).subscribe(e=>{e.todo&&this.todo.tags.push(t)},t=>{this.openSnackBar(t.message,"Cerrar")})}removeTagFromTodo(t){this._todoService.removeTag(this.token,this.todo._id,t._id).subscribe(e=>{e.todo&&this.todo.tags.splice(this.todo.tags.indexOf(t),1)},t=>{this.openSnackBar(t.message,"Cerrar")})}openTagManaginDialogue(){this.tagDialogue.open(Z,{}).afterClosed().subscribe(t=>{this.getTags()})}openRepiteTodos(){this.tagDialogue.open(bt,{width:"80%",data:{title:"Repetici\xf3n"}}).afterClosed().subscribe(t=>{t&&(this.repite=t,this.todo.startDate=this.repite.fistDate,this.todo.dueDate=this.repite.lastDate)})}toggleImportant(){this.userInTodo()?this.todo.important=!this.todo.important:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleStar(){this.userInTodo()?this.todo.starred=!this.todo.starred:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleRead(){this.userInTodo()?(1==this.todo.read?this.todo.usersWhoRead.splice(this.todo.usersWhoRead.indexOf(this.identity._id),1):this.todo.usersWhoRead.push(this.identity._id),this.todo.read=!this.todo.read):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleDone(){this.userInTodo()?this.todo.done=!this.todo.done:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}userInTodo(){var t;return!!this.todo.users&&-1!=(null===(t=this.todo.users)||void 0===t?void 0:t.map(t=>t._id).indexOf(this.identity._id))}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}checkExt(t){let e=t.split(".")[1];return("pdf"==e||"xlsx"==e||"xls"==e||"msg"==e||"docx"==e||"odt"==e||"rar"==e||"zip"==e||"png"==e||"jpge"==e||"jpeg"==e||"jpg"==e||"tif"==e||"tiff"==e)&&e}goToLink(t){window.open(this.url+"todo/file/"+t,"_blank")}removeFileFromTodo(t){this.todo.files.splice(this.todo.files.indexOf(t),1)}}return t.\u0275fac=function(e){return new(e||t)(M.Vb(L),M.Vb(l.b),M.Vb(I.a),M.Vb(F.a),M.Vb(j),M.Vb(tt.a),M.Vb(et.a),M.Vb(T.g),M.Vb(A.a),M.Vb(T.a),M.Vb(ct.a),M.Vb(M.h))},t.\u0275cmp=M.Pb({type:t,selectors:[["app-todo-details"]],features:[M.Fb([{provide:s.c,useClass:ot.b},{provide:s.f,useValue:ot.a},et.a,ct.a])],decls:80,vars:38,consts:[["mat-icon-button","","routerLink","/todo/list"],[2,"margin-left","16px","font-size","14px",3,"checked","change"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","end center"],["mat-icon-button","","matTooltip","A\xf1adir repetici\xf3n",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","A\xf1adir responsable",3,"matMenuTriggerFor",4,"ngIf"],[3,"xPosition"],["users","matMenu"],["style","text-transform: capitalize;","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"matTooltip","click"],[3,"ngClass"],["mat-icon-button","","matTooltip","Etiquetas",3,"click"],["mat-icon-button","","matTooltip","A\xf1adir etiqueta",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-icon-button","","matTooltip","Eliminar",3,"click"],[2,"margin","20px 0px 0px 16px"],["chipListTag",""],[4,"ngFor","ngForOf"],["chipListAgent",""],["fxLayout","column","fxLayoutGap","8px",2,"padding","0px 16px","margin-top","20px"],["type","text","name","title","matInput","","placeholder","T\xedtulo","required","",3,"ngModel","ngModelChange"],["name","note","matInput","","placeholder","Nota","matTextareaAutosize","",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","50px"],["name","startDate","matInput","","placeholder","Fecha de inicio","required","",3,"ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["name","dueDate","matInput","","placeholder","Fecha de vencimiento","required","",3,"ngModel","matDatepicker","ngModelChange"],["picker2",""],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["name","teamName",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["fxFlex","","name","files","placeholder","Adjuntar archivos","multiple","",3,"ngModel","ngModelChange"],["removableInput",""],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["fxFlex","6px"],["chipListFile",""],["fxFlex","",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["type","button","mat-button","","routerLink","/todo/list"],["color","primary","mat-raised-button","",3,"click"],["type","primary","color","accent","mat-raised-button","",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","A\xf1adir repetici\xf3n",3,"click"],[3,"color"],["mat-icon-button","","matTooltip","A\xf1adir responsable",3,"matMenuTriggerFor"],["mat-menu-item","",2,"text-transform","capitalize",3,"click"],["fxLayout","row","fxLayoutAlign","center center",3,"selectable","removable","removed"],[2,"font-size","18px"],["matChipRemove",""],[3,"value","click"],["mat-icon-button","","matSuffix","",3,"click"],["fxLayout","row","fxLayoutAlign","center center",3,"selectable","removable","click","removed"],["type","primary","color","accent","mat-raised-button","",3,"click"]],template:function(t,e){if(1&t&&(M.bc(0,"mat-toolbar"),M.bc(1,"button",0),M.bc(2,"mat-icon"),M.Vc(3,"arrow_back"),M.ac(),M.ac(),M.bc(4,"mat-checkbox",1),M.jc("change",(function(t){return e.toggleDone()})),M.bc(5,"span"),M.Vc(6),M.ac(),M.ac(),M.bc(7,"div",2),M.Tc(8,pt,3,1,"button",3),M.Tc(9,mt,3,1,"button",4),M.bc(10,"mat-menu",5,6),M.Tc(12,gt,2,2,"button",7),M.ac(),M.bc(13,"button",8),M.jc("click",(function(t){return e.toggleRead()})),M.bc(14,"mat-icon"),M.Vc(15),M.ac(),M.ac(),M.bc(16,"button",8),M.jc("click",(function(t){return e.toggleImportant()})),M.bc(17,"mat-icon",9),M.Vc(18),M.ac(),M.ac(),M.bc(19,"button",8),M.jc("click",(function(t){return e.toggleStar()})),M.bc(20,"mat-icon",9),M.Vc(21),M.ac(),M.ac(),M.bc(22,"button",10),M.jc("click",(function(t){return e.openTagManaginDialogue()})),M.bc(23,"mat-icon"),M.Vc(24,"library_add"),M.ac(),M.ac(),M.bc(25,"button",11),M.bc(26,"mat-icon"),M.Vc(27,"label"),M.ac(),M.ac(),M.bc(28,"mat-menu",5,12),M.Tc(30,ft,2,1,"button",7),M.ac(),M.bc(31,"button",13),M.jc("click",(function(t){return e.deleteTodo()})),M.bc(32,"mat-icon"),M.Vc(33,"delete_outline"),M.ac(),M.ac(),M.ac(),M.ac(),M.bc(34,"div",14),M.bc(35,"mat-chip-list",null,15),M.Tc(37,vt,8,3,"div",16),M.ac(),M.bc(38,"mat-chip-list",null,17),M.Tc(40,kt,8,4,"div",16),M.ac(),M.ac(),M.bc(41,"form",18),M.bc(42,"mat-form-field"),M.bc(43,"input",19),M.jc("ngModelChange",(function(t){return e.todo.title=t})),M.ac(),M.ac(),M.bc(44,"mat-form-field"),M.bc(45,"textarea",20),M.jc("ngModelChange",(function(t){return e.todo.note=t})),M.ac(),M.ac(),M.bc(46,"div",21),M.bc(47,"mat-form-field"),M.bc(48,"input",22),M.jc("ngModelChange",(function(t){return e.todo.startDate=t})),M.ac(),M.Wb(49,"mat-datepicker-toggle",23),M.Wb(50,"mat-datepicker",null,24),M.ac(),M.bc(52,"mat-form-field"),M.bc(53,"input",25),M.jc("ngModelChange",(function(t){return e.todo.dueDate=t})),M.ac(),M.Wb(54,"mat-datepicker-toggle",23),M.Wb(55,"mat-datepicker",null,26),M.ac(),M.ac(),M.bc(57,"div",27),M.bc(58,"mat-form-field",28),M.bc(59,"mat-label"),M.Vc(60,"Equipo"),M.ac(),M.bc(61,"mat-select",29),M.jc("ngModelChange",(function(t){return e.teamName=t})),M.bc(62,"mat-option"),M.Vc(63),M.ac(),M.Tc(64,yt,2,2,"mat-option",30),M.ac(),M.ac(),M.ac(),M.bc(65,"div",27),M.bc(66,"mat-form-field"),M.bc(67,"ngx-mat-file-input",31,32),M.jc("ngModelChange",(function(t){return e.files=t})),M.ac(),M.Tc(69,Tt,3,0,"button",33),M.ac(),M.Wb(70,"span",34),M.bc(71,"mat-chip-list",null,35),M.Tc(73,xt,8,3,"div",36),M.ac(),M.ac(),M.bc(74,"div",37),M.bc(75,"button",38),M.Vc(76,"Cancelar"),M.ac(),M.bc(77,"button",39),M.jc("click",(function(t){return e.saveTodo(!1)})),M.Vc(78,"Guardar"),M.ac(),M.Tc(79,Mt,2,0,"button",40),M.ac(),M.ac()),2&t){const t=M.Jc(29),i=M.Jc(51),o=M.Jc(56),c=M.Jc(68);M.Gb(4),M.uc("checked",e.todo.done),M.Gb(2),M.Xc(" ",e.todo.done?"Marcar como no realizado":"Marcar como realizado"," "),M.Gb(2),M.uc("ngIf",!e.todo._id),M.Gb(1),M.uc("ngIf",e.todo.team),M.Gb(1),M.uc("xPosition","before"),M.Gb(2),M.uc("ngForOf",e.agents),M.Gb(1),M.vc("matTooltip",null!=e.todo.usersWhoRead&&e.todo.usersWhoRead.includes(e.identity._id)?"Marcar como no le\xeddo":"Marcar como le\xeddo"),M.Gb(2),M.Wc(null!=e.todo.usersWhoRead&&e.todo.usersWhoRead.includes(e.identity._id)?"drafts":"markunread"),M.Gb(1),M.vc("matTooltip",e.todo.important?"Marcar como no importante":"Marcar como importante"),M.Gb(1),M.uc("ngClass",M.Ac(34,_t,null==e.todo?null:e.todo.important)),M.Gb(1),M.Wc(e.todo.important?"error":"error_outline"),M.Gb(1),M.vc("matTooltip",e.todo.starred?"Remover de favoritos":"Marcar como favorito"),M.Gb(1),M.uc("ngClass",M.Ac(36,Lt,null==e.todo?null:e.todo.starred)),M.Gb(1),M.Wc(e.todo.starred?"star":"star_outline"),M.Gb(4),M.uc("matMenuTriggerFor",t),M.Gb(3),M.uc("xPosition","before"),M.Gb(2),M.uc("ngForOf",e.tagList),M.Gb(7),M.uc("ngForOf",null==e.todo?null:e.todo.tags),M.Gb(3),M.uc("ngForOf",e.agentsIn),M.Gb(3),M.uc("ngModel",e.todo.title),M.Gb(2),M.uc("ngModel",e.todo.note),M.Gb(3),M.uc("ngModel",e.todo.startDate)("matDatepicker",i),M.Gb(1),M.uc("for",i),M.Gb(4),M.uc("ngModel",e.todo.dueDate)("matDatepicker",o),M.Gb(1),M.uc("for",o),M.Gb(7),M.uc("ngModel",e.teamName),M.Gb(2),M.Wc(e.teamName),M.Gb(1),M.uc("ngForOf",e.teams),M.Gb(3),M.uc("ngModel",e.files),M.Gb(2),M.uc("ngIf",!c.empty),M.Gb(4),M.uc("ngForOf",null==e.todo?null:e.todo.files),M.Gb(6),M.uc("ngIf",e.todo._id)}},directives:[g.a,a.b,T.h,b.a,n.a,G.d,G.b,G.c,v.m,m.d,v.l,f.a,v.k,R.a,m.c,r.b,c.x,c.o,c.p,G.e,h.a,p.b,c.c,c.u,c.n,c.q,p.d,d.b,d.d,h.e,d.a,h.d,at.a,s.p,k.a,m.a,r.a,r.c],styles:[""],changeDetection:0}),t})();const Ct=[{path:"",component:C,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:U},{path:"add",component:Gt},{path:"list/:id",component:Gt}]}];let Ot=(()=>{class t{}return t.\u0275mod=M.Tb({type:t}),t.\u0275inj=M.Sb({factory:function(e){return new(e||t)},imports:[[T.k.forChild(Ct)],T.k]}),t})();var St=i("YUcS");i.d(e,"TodoModule",(function(){return Vt}));let Vt=(()=>{class t{}return t.\u0275mod=M.Tb({type:t}),t.\u0275inj=M.Sb({factory:function(e){return new(e||t)},providers:[I.a,F.a,j,tt.a,bt],imports:[[v.c,Ot,b.b,n.b,c.j,y.e,m.b,a.c,k.b,h.c,u.b,O.d,St.a,s.v,g.b,p.c,d.c,s.n,p.c,c.t,f.b,l.f,at.b,r.d,o.c]]}),t})()}}]);