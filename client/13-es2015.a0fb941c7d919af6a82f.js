(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"3uMe":function(e,t,c){"use strict";c.d(t,"a",(function(){return s})),c("AJX/");var n=c("YFeJ"),a=c("tk/3"),i=c("fXoL");let s=(()=>{class e{constructor(e){this._httpClient=e,this.httpOptions={headers:new a.e({"Content-Type":"application/json",Authorization:"null"})},this.url=n.a.url}add(e,t){let c=JSON.stringify(t);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.post(this.url+"team/add",c,this.httpOptions)}edit(e,t,c){let n=JSON.stringify(c);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/update/"+t,n,this.httpOptions)}addUser(e,t,c){var n={user:c};return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/add-user/"+t,n,this.httpOptions)}removeUser(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/remove-user/"+t,{user:c},this.httpOptions)}delete(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.delete(this.url+"team/delete/"+t,this.httpOptions)}getForName(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/for-name/"+t+"/"+c,this.httpOptions)}getList(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/teams/"+t,this.httpOptions)}getTeamsOfUser(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/for-user/"+t,this.httpOptions)}getAgentsList(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/agents/"+t+"/"+c,this.httpOptions)}getOne(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/team/"+t,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(i.fc(a.c))},e.\u0275prov=i.Rb({token:e,factory:e.\u0275fac}),e})()},Q2c7:function(e,t,c){"use strict";c.d(t,"a",(function(){return s})),c("AJX/");var n=c("YFeJ"),a=c("fXoL"),i=c("qlzE");let s=(()=>{class e{constructor(e){this._http=e,this.url=n.a.url}makeFileRequest(e,t,c,n,a){return new Promise((function(t,i){for(var s=new FormData,r=new XMLHttpRequest,o=0;o<c.length;o++)s.append(a,c[o],c[o].name);r.onreadystatechange=function(){4==r.readyState&&(200==r.status?t(JSON.parse(r.response)):i(r.response))},r.open("POST",e,!0),r.setRequestHeader("Authorization",n),r.send(s)}))}}return e.\u0275fac=function(t){return new(t||e)(a.fc(i.a))},e.\u0275prov=a.Rb({token:e,factory:e.\u0275fac}),e})()},mtpT:function(e,t,c){"use strict";c.r(t);var n=c("ofXK"),a=c("tyNb"),i=c("bSwM"),s=c("QibW"),r=c("qFsG"),o=c("lDzL"),l=c("NFeN"),u=c("bTqV"),m=c("Wp6s"),d=c("f0Cb"),h=c("wZkO"),b=c("MutI"),p=c("YUcS"),f=c("aYsj"),g=c("kmnG"),v=c("d3UM"),w=c("3Pt+"),y=c("1jcm"),M=c("Qu3c"),k=c("PCNd"),x=c("wd/R"),I=c("gU78"),C=c("fXoL"),G=c("dNgK");function _(e,t){if(1&e){const e=C.cc();C.bc(0,"div",5),C.bc(1,"button",6),C.jc("click",(function(t){return C.Mc(e),C.nc().toNew()})),C.Vc(2,"Nuevo"),C.ac(),C.ac()}}let O=(()=>{class e{constructor(e,t,c,n){this._userService=e,this._route=t,this._router=c,this.snackBar=n,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getUsers(),"ROLE_ADMIN"!=this.identity.role&&"ROLE_AGENT"!=this.identity.role||(this.canCreate=!0)}getUsers(){this._userService.getListReq(this.token,this.identity.company._id).subscribe(e=>{e.users&&(this.rows=e.users,this.temp=e.users)},e=>{this.openSnackBar(e.message,"Cerrar")})}setQuery(){this.query={}}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1},{prop:"surname",name:"Apellido",flexGrow:1},{prop:"email",name:"Email",flexGrow:1},{prop:"phone",name:"Interno",flexGrow:1},{prop:"userName",name:"Usuario",flexGrow:1}]}changeDate(e){return x(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}updateFilter(e){const t=e.target.value.toLowerCase();var c=Object.keys(this.temp[0]);if(c.splice(c.length-1),!c.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=c.length;n++){let a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}toNew(){this._router.navigate(["/user/new/requester"])}toProfile(e){"click"==e.type&&this._router.navigate(["/user/profile/",e.row._id])}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-req-list"]],features:[C.Fb([I.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(C.bc(0,"mat-form-field",0),C.bc(1,"input",1),C.jc("keyup",(function(e){return t.updateFilter(e)})),C.ac(),C.ac(),C.Tc(2,_,3,0,"div",2),C.bc(3,"div",3),C.bc(4,"ngx-datatable",4),C.jc("activate",(function(e){return t.toProfile(e)})),C.ac(),C.ac()),2&e&&(C.Gb(2),C.uc("ngIf",t.canCreate),C.Gb(2),C.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,r.b,n.m,o.d,u.b],styles:[""]}),e})();var S=c("+8wx"),T=c("O4PR"),V=c("YFeJ"),A=c("Q2c7"),j=c("jZsi");class R{constructor(e,t,c,n){this._id=e,this.hashtag=t,this.resp=c,this.user=n}}var N=c("3kSh"),E=c("XiUz"),U=c("FKr1");function F(e,t){if(1&e){const e=C.cc();C.bc(0,"button",42),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function L(e,t){if(1&e&&(C.bc(0,"div",39),C.Wb(1,"img",40),C.Tc(2,F,3,0,"button",41),C.ac()),2&e){const e=C.nc(2);C.Gb(2),C.uc("ngIf",e.isAdmin||e.isUser)}}function B(e,t){if(1&e){const e=C.cc();C.bc(0,"button",42),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function D(e,t){if(1&e&&(C.bc(0,"div",39),C.Wb(1,"img",43),C.Tc(2,B,3,0,"button",41),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.vc("src",e.url+"user/image/"+e.user.image,C.Oc),C.Gb(1),C.uc("ngIf",e.isAdmin||e.isUser)}}function P(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Wc(e.user.sector.name)}}function H(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-option",46),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(3).setSector(n._id)})),C.Vc(1),C.ac()}if(2&e){const e=t.$implicit;C.uc("value",e),C.Gb(1),C.Xc("",e.name," ")}}function q(e,t){if(1&e&&(C.bc(0,"mat-form-field",44),C.bc(1,"mat-label"),C.Vc(2,"Cambiar sector"),C.ac(),C.bc(3,"mat-select"),C.Tc(4,H,2,2,"mat-option",45),C.ac(),C.ac()),2&e){const e=C.nc(2);C.Gb(4),C.uc("ngForOf",e.sectors)}}function Y(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Xc(" ",e.user.email," ")}}function W(e,t){1&e&&(C.bc(0,"span"),C.Vc(1," - "),C.ac())}function z(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Xc(" ",e.user.phone," ")}}function $(e,t){1&e&&(C.bc(0,"span"),C.Vc(1," - "),C.ac())}function X(e,t){if(1&e){const e=C.cc();C.bc(0,"div",27),C.bc(1,"mat-card",28),C.Tc(2,L,3,1,"div",29),C.Tc(3,D,3,2,"div",29),C.bc(4,"input",30),C.jc("change",(function(t){return C.Mc(e),C.nc().fileChangeEvent(t)})),C.ac(),C.bc(5,"div",31),C.bc(6,"div",32),C.Vc(7),C.ac(),C.bc(8,"div",33),C.Tc(9,P,2,1,"span",34),C.Tc(10,q,5,1,"mat-form-field",35),C.ac(),C.ac(),C.ac(),C.bc(11,"mat-card",36),C.bc(12,"mat-card-title"),C.Vc(13,"Informaci\xf3n de contacto"),C.ac(),C.bc(14,"mat-card-content",37),C.bc(15,"mat-list"),C.bc(16,"mat-list-item"),C.bc(17,"mat-icon",38),C.Vc(18,"email"),C.ac(),C.Tc(19,Y,2,1,"span",34),C.Tc(20,W,2,0,"span",34),C.ac(),C.bc(21,"mat-list-item"),C.bc(22,"mat-icon",38),C.Vc(23,"phone"),C.ac(),C.Tc(24,z,2,1,"span",34),C.Tc(25,$,2,0,"span",34),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(2),C.uc("ngIf","null"==e.user.image),C.Gb(1),C.uc("ngIf","null"!=e.user.image),C.Gb(4),C.Yc("",e.user.surname,", ",e.user.name,""),C.Gb(2),C.uc("ngIf",e.user.sector),C.Gb(1),C.uc("ngIf",e.isAdmin),C.Gb(9),C.uc("ngIf",""!=e.user.email),C.Gb(1),C.uc("ngIf",""==e.user.email),C.Gb(4),C.uc("ngIf",null!=e.user.phone),C.Gb(1),C.uc("ngIf",!e.user.phone||null==e.user.phone)}}function Q(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-checkbox",47),C.jc("change",(function(t){return C.Mc(e),C.nc().changeAdm(t.checked)})),C.Vc(1,"Administrador "),C.ac()}if(2&e){const e=C.nc();C.uc("checked","ROLE_ADMIN"==e.user.role)("color","primary")("disabled",!e.isAdmin)}}function K(e,t){if(1&e){const e=C.cc();C.bc(0,"button",48),C.jc("click",(function(t){return C.Mc(e),C.nc().delete()})),C.bc(1,"mat-icon"),C.Vc(2,"delete"),C.ac(),C.ac()}}function J(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-form-field",6),C.bc(1,"input",49),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().password.new=t})),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(1),C.uc("readonly",!e.isAdmin&&!e.isUser)("ngModel",e.password.new)}}function Z(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-form-field",6),C.bc(1,"input",50),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().password.confirm=t})),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(1),C.uc("readonly",!e.isAdmin&&!e.isUser)("ngModel",e.password.confirm)}}function ee(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-tab",51),C.bc(1,"mat-card-content",5),C.bc(2,"form"),C.bc(3,"mat-form-field",6),C.bc(4,"input",52),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().newResponse.hashtag=t})),C.ac(),C.ac(),C.bc(5,"mat-form-field",6),C.bc(6,"input",53),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().newResponse.resp=t})),C.ac(),C.ac(),C.bc(7,"button",13),C.jc("click",(function(t){return C.Mc(e),C.nc().saveResponse()})),C.Vc(8,"A\xf1adir"),C.ac(),C.ac(),C.bc(9,"ngx-datatable",54),C.jc("activate",(function(t){return C.Mc(e),C.nc().deleteResponse(t)})),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(4),C.uc("ngModel",e.newResponse.hashtag),C.Gb(2),C.uc("ngModel",e.newResponse.resp),C.Gb(3),C.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",5)("rows",e.responses)("columns",e.responseColumns)}}let te=(()=>{class e{constructor(e,t,c,n,a,i,s,r){this._userService=e,this._sectorService=t,this.confirmService=c,this._uploadService=n,this._responseService=a,this._route=i,this.snackBar=s,this._router=r,this.responseColumns=[],this.responses=[],this.token=e.getToken(),this.identity=e.getIdentity(),this.url=V.a.url,this.user=new S.a("",null,"","",null,"","","",null,null,!1,"",[],"","",null,!0,"",!0,!0),this.newResponse=new R("","","",""),this.isAdmin=!1,this.isUser=!1,this.isNew=!1,this.password={new:"",confirm:""}}ngOnInit(){this.getUser(),this.getSectors(),this.getColumns(),this.getResponses()}getUser(){this._route.params.forEach(e=>{this._userService.getOne(this.token,e.id).subscribe(e=>{e.user&&(this.user=e.user,this.user.password="",("ROLE_ADMIN"==this.identity.role||"ROLE_REQUESTER"==this.user.role&&"ROLE_AGENT"==this.identity.role)&&this.identity.company&&"Sistemas"==this.identity.company.name&&(this.isAdmin=!0),this.user._id==this.identity._id&&(this.isUser=!0),this.role=this.user.role)},e=>{this.openSnackBar(e.message,"Cerrar")})})}getSectors(){this._sectorService.getList(this.token).subscribe(e=>{e.sectors&&(this.sectors=e.sectors)},e=>{this.openSnackBar(e.message,"Cerrar")})}getResponses(){this._responseService.getList(this.token,this.identity._id).subscribe(e=>{e.responses&&(this.responses=e.responses)},e=>{this.openSnackBar(e.message,"Cerrar")})}saveResponse(){""!=this.newResponse.hashtag&&""!=this.newResponse.resp?(this.newResponse.user=this.identity._id,this.newResponse.hashtag="#"+this.newResponse.hashtag.replace(" ",""),this._responseService.add(this.token,this.newResponse).subscribe(e=>{e.response&&(this.openSnackBar("Respuesta autom\xe1tica a\xf1adida","Cerrar"),this.getResponses(),this.newResponse.hashtag="",this.newResponse.resp="")},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}deleteResponse(e){"click"==e.type&&this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar "+e.row.hashtag+"?"}).subscribe(t=>{t&&this._responseService.delete(this.token,e.row._id).subscribe(e=>{e.response&&(this.getResponses(),this.openSnackBar("Respuesta autom\xe1tica eliminada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}setSector(e){this.user.sector=e,this.editUser()}getColumns(){this.responseColumns=[{prop:"hashtag",name:"Nombre",flexGrow:1},{prop:"resp",name:"Respuesta",flexGrow:4}]}editUser(){if(""!=this.user.name&&""!=this.user.surname&&""!=this.user.userName&&""!=this.user.email){(this.user.sign="")&&(this.user.sign=null);let e="";if(this.password.new!=this.password.confirm)return this.openSnackBar("La nueva contrase\xf1a no coincide con su confirmaci\xf3n","Cerrar");""!=this.password.new&&(e=this.user.password),delete this.user.password;let t=this.password.new;this.password.new="",this.password.confirm="",this._userService.edit(this.token,this.user).subscribe(c=>{c.user&&(""!=t?this.isAdmin?this._userService.edit(this.token,{_id:this.user._id,password:t}).subscribe(e=>{this.openSnackBar("Datos actualizados","Cerrar"),this.getUser()},e=>{}):this._userService.login({userName:this.user.userName,password:e}).subscribe(e=>{e.user?this._userService.edit(this.token,{_id:this.user._id,password:t}).subscribe(e=>{this.openSnackBar("Datos actualizados","Cerrar"),this.getUser()},e=>{}):this.openSnackBar("La contrase\xf1a actual no es la correcta.","Cerrar")},e=>{this.openSnackBar("La contrase\xf1a actual no es la correcta.","Cerrar")}):(this.openSnackBar("Datos actualizados","Cerrar"),this.getUser()))},e=>{this.openSnackBar(e.message,"Cerrar")})}else this.openSnackBar("Faltan campos para completar","Cerrar")}delete(){this.confirmService.confirm({message:`\xbfEstas seguro que quieres eliminar a ${this.user.name} ${this.user.surname}?`}).subscribe(e=>{e&&this._userService.edit(this.token,{_id:this.user._id,deleted:!0}).subscribe(e=>{this._router.navigateByUrl("ROLE_REQUESTER"!=this.user.role?"/user/list/agent":"/user/list/requester"),this.openSnackBar("Usuario eliminado","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")})})}openAttachment(){document.getElementById("attachment").click()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}setPermit(e,t){t?this.user.permits.push(e):this.user.permits.splice(this.user.permits.indexOf(e),1)}changeAdm(e){this.user.role=1==e?"ROLE_ADMIN":this.role}fileChangeEvent(e){this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"user/image/"+this.user._id,[],this.filesToUpload,this.token,"image"),setTimeout(()=>{this.getUser(),this.openSnackBar("Foto de perfil actualizada","Cerrar")},1e3)}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(T.a),C.Vb(N.a),C.Vb(A.a),C.Vb(j.a),C.Vb(a.a),C.Vb(G.a),C.Vb(a.g))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-user-profile"]],features:[C.Fb([I.a,T.a,A.a,j.a])],decls:59,vars:36,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","calc(100% - 300px)",3,"fxFlex.gt-sm"],[1,"p-0"],["label","Datos personales"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","surname","type","text","placeholder","Apellido",3,"readonly","ngModel","ngModelChange"],["matInput","","name","dni","type","number","placeholder","DNI",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","legajo","placeholder","Legajo",3,"readonly","ngModel","ngModelChange"],["matInput","","type","text","name","email","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","phone","placeholder","Tel\xe9fono",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Datos de sistema"],["matInput","","name","userName","type","text","placeholder","Nombre de usuario",3,"readonly","ngModel","ngModelChange"],[3,"checked","color","disabled","change",4,"ngIf"],["name","receiveMail",3,"ngModel","color","disabled","ngModelChange"],["name","sectorRef",3,"ngModel","color","disabled","ngModelChange"],["name","infoView",3,"ngModel","color","disabled","ngModelChange"],[2,"margin-top","10px"],[3,"checked","color","change"],["matTooltip","Eliminar usuario","mat-raised-button","","color","warn","style","float: right;",3,"click",4,"ngIf"],["label","Contrase\xf1a"],["matInput","","type","password","name","contrase\xf1a_anterior","placeholder","Contrase\xf1a actual",3,"readonly","ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["label","Respuestas autom\xe1ticas",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],[4,"ngIf"],["appearance","fill","class","full-width",4,"ngIf"],[1,"default"],[1,"pt-0"],[1,"mr-1"],[1,"propic","text-center"],["src","assets/images/system/user-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["appearance","fill",1,"full-width"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"checked","color","disabled","change"],["matTooltip","Eliminar usuario","mat-raised-button","","color","warn",2,"float","right",3,"click"],["matInput","","type","password","name","contrase\xf1a_nueva","placeholder","Nueva contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","type","password","name","contrase\xf1a_confirmar","placeholder","Confirmar contrase\xf1a nueva",3,"readonly","ngModel","ngModelChange"],["label","Respuestas autom\xe1ticas"],["matInput","","type","text","name","hashtag","placeholder","Nombre",3,"ngModel","ngModelChange"],["matInput","","type","text","name","resp","placeholder","Respuesta",3,"ngModel","ngModelChange"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(C.bc(0,"div",0),C.Tc(1,X,26,10,"div",1),C.bc(2,"div",2),C.bc(3,"mat-card",3),C.bc(4,"mat-tab-group"),C.bc(5,"mat-tab",4),C.bc(6,"mat-card-content",5),C.bc(7,"form"),C.bc(8,"mat-form-field",6),C.bc(9,"input",7),C.jc("ngModelChange",(function(e){return t.user.name=e})),C.ac(),C.ac(),C.bc(10,"mat-form-field",6),C.bc(11,"input",8),C.jc("ngModelChange",(function(e){return t.user.surname=e})),C.ac(),C.ac(),C.bc(12,"mat-form-field",6),C.bc(13,"input",9),C.jc("ngModelChange",(function(e){return t.user.dni=e})),C.ac(),C.ac(),C.bc(14,"mat-form-field",6),C.bc(15,"input",10),C.jc("ngModelChange",(function(e){return t.user.num=e})),C.ac(),C.ac(),C.bc(16,"mat-form-field",6),C.bc(17,"input",11),C.jc("ngModelChange",(function(e){return t.user.email=e})),C.ac(),C.ac(),C.bc(18,"mat-form-field",6),C.bc(19,"input",12),C.jc("ngModelChange",(function(e){return t.user.phone=e})),C.ac(),C.ac(),C.ac(),C.bc(20,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(21,"Guardar"),C.ac(),C.ac(),C.ac(),C.bc(22,"mat-tab",14),C.bc(23,"mat-card-content",5),C.bc(24,"form"),C.bc(25,"mat-form-field",6),C.bc(26,"input",15),C.jc("ngModelChange",(function(e){return t.user.userName=e})),C.ac(),C.ac(),C.Tc(27,Q,2,3,"mat-checkbox",16),C.Wb(28,"br"),C.bc(29,"mat-checkbox",17),C.jc("ngModelChange",(function(e){return t.user.receiveMail=e})),C.Vc(30,"Recibir notificaciones al correo electr\xf3nico "),C.ac(),C.Wb(31,"br"),C.bc(32,"mat-checkbox",18),C.jc("ngModelChange",(function(e){return t.user.sectorRef=e})),C.Vc(33,"Referente "),C.ac(),C.Wb(34,"br"),C.bc(35,"mat-checkbox",19),C.jc("ngModelChange",(function(e){return t.user.infoView=e})),C.Vc(36,"Visualizar mensajes de informaci\xf3n de tickets "),C.ac(),C.Wb(37,"mat-divider"),C.bc(38,"span"),C.bc(39,"h3",20),C.Vc(40,"Permisos:"),C.ac(),C.bc(41,"mat-checkbox",21),C.jc("change",(function(e){return t.setPermit("HELPDESK",e.checked)})),C.Vc(42,"Gestor de tickets "),C.ac(),C.Wb(43,"br"),C.bc(44,"mat-checkbox",21),C.jc("change",(function(e){return t.setPermit("TRACKING",e.checked)})),C.Vc(45,"Gestor de tracking "),C.ac(),C.ac(),C.ac(),C.bc(46,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(47,"Guardar"),C.ac(),C.Tc(48,K,3,0,"button",22),C.ac(),C.ac(),C.bc(49,"mat-tab",23),C.bc(50,"mat-card-content",5),C.bc(51,"form"),C.bc(52,"mat-form-field",6),C.bc(53,"input",24),C.jc("ngModelChange",(function(e){return t.user.password=e})),C.ac(),C.ac(),C.Tc(54,J,2,2,"mat-form-field",25),C.Tc(55,Z,2,2,"mat-form-field",25),C.ac(),C.bc(56,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(57,"Guardar"),C.ac(),C.ac(),C.ac(),C.Tc(58,ee,10,9,"mat-tab",26),C.ac(),C.ac(),C.ac(),C.ac()),2&e&&(C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(1),C.vc("fxFlex.gt-sm",1==t.isNew?100:50),C.Gb(7),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.name),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.surname),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.dni),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.num),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.email),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.phone),C.Gb(7),C.uc("readonly","ROLE_ADMIN"!=t.identity.role&&!t.isNew)("ngModel",t.user.userName),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(2),C.uc("ngModel",t.user.receiveMail)("color","primary")("disabled",!t.isAdmin&&!t.isUser),C.Gb(3),C.uc("ngModel",t.user.sectorRef)("color","primary")("disabled",!t.isAdmin),C.Gb(3),C.uc("ngModel",t.user.infoView)("color","primary")("disabled",!t.isAdmin&&!t.isUser),C.Gb(6),C.uc("checked",t.user.permits.includes("HELPDESK"))("color","primary"),C.Gb(3),C.uc("checked",t.user.permits.includes("TRACKING"))("color","primary"),C.Gb(4),C.uc("ngIf",!t.isNew),C.Gb(5),C.uc("readonly",!t.isUser)("ngModel",t.user.password),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(3),C.uc("ngIf",t.isUser&&"ROLE_REQUESTER"!=t.identity.role))},directives:[E.d,n.m,E.b,m.a,h.b,h.a,m.c,w.x,w.o,w.p,g.a,r.b,w.c,w.n,w.q,w.s,u.b,i.a,d.a,m.g,b.a,b.c,l.a,g.d,v.a,n.l,U.p,M.a,o.d],encapsulation:2}),e})();function ce(e,t){if(1&e){const e=C.cc();C.bc(0,"div",5),C.bc(1,"button",6),C.jc("click",(function(t){return C.Mc(e),C.nc().toNew()})),C.Vc(2,"Nuevo"),C.ac(),C.ac()}}let ne=(()=>{class e{constructor(e,t,c,n){this._userService=e,this._route=t,this._router=c,this.snackBar=n,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getUsers(),"Sistemas"==this.identity.company.name&&(this.canCreate=!0)}getUsers(){this._userService.getListAgents(this.token,this.identity.company._id).subscribe(e=>{e.users&&(this.rows=e.users,this.temp=e.users)},e=>{this.openSnackBar(e.message,"Cerrar")})}setQuery(){this.query={}}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1},{prop:"surname",name:"Apellido",flexGrow:1},{prop:"email",name:"Email",flexGrow:1},{prop:"phone",name:"Interno",flexGrow:1},{prop:"userName",name:"Usuario",flexGrow:1}]}changeDate(e){return x(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}updateFilter(e){const t=e.target.value.toLowerCase();var c=Object.keys(this.temp[0]);if(c.splice(c.length-1),!c.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=c.length;n++){let a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}toNew(){this._router.navigate(["/user/new/agent"])}toProfile(e){"click"==e.type&&this._router.navigate(["/user/profile/",e.row._id])}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-agent-list"]],features:[C.Fb([I.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(C.bc(0,"mat-form-field",0),C.bc(1,"input",1),C.jc("keyup",(function(e){return t.updateFilter(e)})),C.ac(),C.ac(),C.Tc(2,ce,3,0,"div",2),C.bc(3,"div",3),C.bc(4,"ngx-datatable",4),C.jc("activate",(function(e){return t.toProfile(e)})),C.ac(),C.ac()),2&e&&(C.Gb(2),C.uc("ngIf",t.canCreate),C.Gb(2),C.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,r.b,n.m,o.d,u.b],styles:[""]}),e})();var ae=c("3uMe");function ie(e,t){if(1&e){const e=C.cc();C.bc(0,"div",5),C.bc(1,"button",6),C.jc("click",(function(t){return C.Mc(e),C.nc().toNew()})),C.Vc(2,"Nuevo"),C.ac(),C.ac()}}class se{constructor(e,t,c,n,a,i){this._id=e,this.name=t,this.users=c,this.image=n,this.createDate=a,this.company=i}}function re(e,t){if(1&e){const e=C.cc();C.bc(0,"button",24),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function oe(e,t){if(1&e&&(C.bc(0,"div",21),C.Wb(1,"img",22),C.Tc(2,re,3,0,"button",23),C.ac()),2&e){const e=C.nc(2);C.Gb(2),C.uc("ngIf",e.isAdmin)}}function le(e,t){if(1&e){const e=C.cc();C.bc(0,"button",24),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function ue(e,t){if(1&e&&(C.bc(0,"div",21),C.Wb(1,"img",25),C.Tc(2,le,3,0,"button",23),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.vc("src",e.url+"team/image/"+e.team.image,C.Oc),C.Gb(1),C.uc("ngIf",e.isAdmin)}}function me(e,t){if(1&e&&C.Wb(0,"img",29),2&e){const e=C.nc().$implicit,t=C.nc(2);C.vc("src",t.url+"user/image/"+e.image,C.Oc)}}function de(e,t){1&e&&C.Wb(0,"img",30)}function he(e,t){if(1&e){const e=C.cc();C.bc(0,"tbody"),C.bc(1,"tr",26),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(2).selectOut(n._id)})),C.bc(2,"td"),C.Tc(3,me,1,1,"img",27),C.Tc(4,de,1,0,"img",28),C.Vc(5),C.ac(),C.ac(),C.ac()}if(2&e){const e=t.$implicit,c=C.nc(2);C.Gb(1),C.Ib(c.selectedOut==e._id?"active":""),C.Gb(2),C.uc("ngIf","null"!=e.image),C.Gb(1),C.uc("ngIf","null"==e.image),C.Gb(1),C.Yc(" ",e.surname," ",e.name," ")}}function be(e,t){if(1&e){const e=C.cc();C.bc(0,"a",31),C.jc("click",(function(t){return C.Mc(e),C.nc(2).include()})),C.Vc(1,">>"),C.ac()}}function pe(e,t){if(1&e){const e=C.cc();C.bc(0,"a",31),C.jc("click",(function(t){return C.Mc(e),C.nc(2).exclude()})),C.Vc(1,"<<"),C.ac()}}function fe(e,t){if(1&e&&C.Wb(0,"img",29),2&e){const e=C.nc().$implicit,t=C.nc(2);C.vc("src",t.url+"user/image/"+e.image,C.Oc)}}function ge(e,t){1&e&&C.Wb(0,"img",30)}function ve(e,t){if(1&e){const e=C.cc();C.bc(0,"tbody"),C.bc(1,"tr",26),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(2).selectIn(n._id)})),C.bc(2,"td"),C.Tc(3,fe,1,1,"img",27),C.Tc(4,ge,1,0,"img",28),C.Vc(5),C.ac(),C.ac(),C.ac()}if(2&e){const e=t.$implicit,c=C.nc(2);C.Gb(1),C.Ib(c.selectedIn==e._id?"active":""),C.Gb(2),C.uc("ngIf","null"!=e.image),C.Gb(1),C.uc("ngIf","null"==e.image),C.Gb(1),C.Yc(" ",e.surname," ",e.name," ")}}function we(e,t){if(1&e){const e=C.cc();C.bc(0,"div",1),C.bc(1,"div",2),C.bc(2,"mat-card",3),C.Tc(3,oe,3,1,"div",4),C.Tc(4,ue,3,2,"div",4),C.bc(5,"input",5),C.jc("change",(function(t){return C.Mc(e),C.nc().fileChangeEvent(t)})),C.ac(),C.bc(6,"div",6),C.bc(7,"div",7),C.Vc(8),C.ac(),C.bc(9,"div",8),C.bc(10,"span"),C.Vc(11),C.ac(),C.ac(),C.bc(12,"div",8),C.bc(13,"span"),C.Vc(14),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.bc(15,"div",9),C.bc(16,"mat-card",10),C.bc(17,"mat-card-content",11),C.bc(18,"div",12),C.bc(19,"div",13),C.bc(20,"div",14),C.bc(21,"table",15),C.bc(22,"thead"),C.bc(23,"tr"),C.bc(24,"th"),C.Vc(25,"Agentes fuera del equipo"),C.ac(),C.ac(),C.ac(),C.Tc(26,he,6,6,"tbody",16),C.ac(),C.ac(),C.ac(),C.bc(27,"div",17),C.bc(28,"div",18),C.Tc(29,be,2,0,"a",19),C.Tc(30,pe,2,0,"a",19),C.ac(),C.ac(),C.bc(31,"div",13),C.bc(32,"table",20),C.bc(33,"thead"),C.bc(34,"tr"),C.bc(35,"th"),C.Vc(36,"Agentes dentro del equipo"),C.ac(),C.ac(),C.ac(),C.Tc(37,ve,6,6,"tbody",16),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(3),C.uc("ngIf","null"==e.team.image),C.Gb(1),C.uc("ngIf","null"!=e.team.image),C.Gb(4),C.Wc(e.team.name),C.Gb(3),C.Wc(e.team.company.name),C.Gb(3),C.Xc("Alta: ",e.team.createDate,""),C.Gb(12),C.uc("ngForOf",e.usersOutTeam),C.Gb(3),C.uc("ngIf","ROLE_ADMIN"==e.identity.role),C.Gb(1),C.uc("ngIf","ROLE_ADMIN"==e.identity.role),C.Gb(7),C.uc("ngForOf",e.usersInTeam)}}function ye(e,t){if(1&e){const e=C.cc();C.bc(0,"div",1),C.bc(1,"div",9),C.bc(2,"mat-card",10),C.bc(3,"mat-card-content",11),C.bc(4,"form"),C.bc(5,"mat-form-field",32),C.bc(6,"input",33),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().team.name=t})),C.ac(),C.ac(),C.ac(),C.bc(7,"button",34),C.jc("click",(function(t){return C.Mc(e),C.nc().onSubmit()})),C.Vc(8,"Guardar"),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(6),C.uc("ngModel",e.team.name)}}function Me(e,t){if(1&e){const e=C.cc();C.bc(0,"button",42),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function ke(e,t){if(1&e&&(C.bc(0,"div",39),C.Wb(1,"img",40),C.Tc(2,Me,3,0,"button",41),C.ac()),2&e){const e=C.nc(2);C.Gb(2),C.uc("ngIf",e.isAdmin||e.isUser)}}function xe(e,t){if(1&e){const e=C.cc();C.bc(0,"button",42),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function Ie(e,t){if(1&e&&(C.bc(0,"div",39),C.Wb(1,"img",43),C.Tc(2,xe,3,0,"button",41),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.vc("src",e.url+"user/image/"+e.user.image,C.Oc),C.Gb(1),C.uc("ngIf",e.isAdmin||e.isUser)}}function Ce(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Wc(e.user.sector.name)}}function Ge(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-option",46),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(3).setSector(n._id)})),C.Vc(1),C.ac()}if(2&e){const e=t.$implicit;C.uc("value",e),C.Gb(1),C.Xc("",e.name," ")}}function _e(e,t){if(1&e&&(C.bc(0,"mat-form-field",44),C.bc(1,"mat-label"),C.Vc(2,"Cambiar sector"),C.ac(),C.bc(3,"mat-select"),C.Tc(4,Ge,2,2,"mat-option",45),C.ac(),C.ac()),2&e){const e=C.nc(2);C.Gb(4),C.uc("ngForOf",e.sectors)}}function Oe(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Xc(" ",e.user.email," ")}}function Se(e,t){1&e&&(C.bc(0,"span"),C.Vc(1," - "),C.ac())}function Te(e,t){if(1&e&&(C.bc(0,"span"),C.Vc(1),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.Xc(" ",e.user.phone," ")}}function Ve(e,t){1&e&&(C.bc(0,"span"),C.Vc(1," - "),C.ac())}function Ae(e,t){if(1&e){const e=C.cc();C.bc(0,"div",27),C.bc(1,"mat-card",28),C.Tc(2,ke,3,1,"div",29),C.Tc(3,Ie,3,2,"div",29),C.bc(4,"input",30),C.jc("change",(function(t){return C.Mc(e),C.nc().fileChangeEvent(t)})),C.ac(),C.bc(5,"div",31),C.bc(6,"div",32),C.Vc(7),C.ac(),C.bc(8,"div",33),C.Tc(9,Ce,2,1,"span",34),C.Tc(10,_e,5,1,"mat-form-field",35),C.ac(),C.ac(),C.ac(),C.bc(11,"mat-card",36),C.bc(12,"mat-card-title"),C.Vc(13,"Informaci\xf3n de contacto"),C.ac(),C.bc(14,"mat-card-content",37),C.bc(15,"mat-list"),C.bc(16,"mat-list-item"),C.bc(17,"mat-icon",38),C.Vc(18,"email"),C.ac(),C.Tc(19,Oe,2,1,"span",34),C.Tc(20,Se,2,0,"span",34),C.ac(),C.bc(21,"mat-list-item"),C.bc(22,"mat-icon",38),C.Vc(23,"phone"),C.ac(),C.Tc(24,Te,2,1,"span",34),C.Tc(25,Ve,2,0,"span",34),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(2),C.uc("ngIf","null"==e.user.image),C.Gb(1),C.uc("ngIf","null"!=e.user.image),C.Gb(4),C.Yc("",e.user.surname,", ",e.user.name,""),C.Gb(2),C.uc("ngIf",e.user.sector),C.Gb(1),C.uc("ngIf",e.isAdmin),C.Gb(9),C.uc("ngIf",""!=e.user.email),C.Gb(1),C.uc("ngIf",""==e.user.email),C.Gb(4),C.uc("ngIf",null!=e.user.phone),C.Gb(1),C.uc("ngIf",!e.user.phone||null==e.user.phone)}}function je(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-checkbox",47),C.jc("change",(function(t){return C.Mc(e),C.nc().changeAdm(t.checked)})),C.Vc(1,"Administrador "),C.ac()}if(2&e){const e=C.nc();C.uc("checked","ROLE_ADMIN"==e.user.role)("color","primary")("disabled",!e.isAdmin)}}function Re(e,t){if(1&e){const e=C.cc();C.bc(0,"button",48),C.jc("click",(function(t){return C.Mc(e),C.nc().delete()})),C.bc(1,"mat-icon"),C.Vc(2,"delete"),C.ac(),C.ac()}}function Ne(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-form-field",6),C.bc(1,"input",49),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().password.new=t})),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(1),C.uc("readonly",!e.isAdmin&&!e.isUser)("ngModel",e.password.new)}}function Ee(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-form-field",6),C.bc(1,"input",50),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().password.confirm=t})),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(1),C.uc("readonly",!e.isAdmin&&!e.isUser)("ngModel",e.password.confirm)}}function Ue(e,t){if(1&e){const e=C.cc();C.bc(0,"mat-tab",51),C.bc(1,"mat-card-content",5),C.bc(2,"form"),C.bc(3,"mat-form-field",6),C.bc(4,"input",52),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().newResponse.hashtag=t})),C.ac(),C.ac(),C.bc(5,"mat-form-field",6),C.bc(6,"input",53),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().newResponse.resp=t})),C.ac(),C.ac(),C.bc(7,"button",13),C.jc("click",(function(t){return C.Mc(e),C.nc().saveResponse()})),C.Vc(8,"A\xf1adir"),C.ac(),C.ac(),C.bc(9,"ngx-datatable",54),C.jc("activate",(function(t){return C.Mc(e),C.nc().deleteResponse(t)})),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(4),C.uc("ngModel",e.newResponse.hashtag),C.Gb(2),C.uc("ngModel",e.newResponse.resp),C.Gb(3),C.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",5)("rows",e.responses)("columns",e.responseColumns)}}function Fe(e,t){if(1&e){const e=C.cc();C.bc(0,"button",24),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function Le(e,t){if(1&e&&(C.bc(0,"div",21),C.Wb(1,"img",22),C.Tc(2,Fe,3,0,"button",23),C.ac()),2&e){const e=C.nc(2);C.Gb(2),C.uc("ngIf",e.isAdmin)}}function Be(e,t){if(1&e){const e=C.cc();C.bc(0,"button",24),C.jc("click",(function(t){return C.Mc(e),C.nc(3).openAttachment()})),C.bc(1,"mat-icon"),C.Vc(2,"edit"),C.ac(),C.ac()}}function De(e,t){if(1&e&&(C.bc(0,"div",21),C.Wb(1,"img",25),C.Tc(2,Be,3,0,"button",23),C.ac()),2&e){const e=C.nc(2);C.Gb(1),C.vc("src",e.url+"team/image/"+e.team.image,C.Oc),C.Gb(1),C.uc("ngIf",e.isAdmin)}}function Pe(e,t){if(1&e&&C.Wb(0,"img",29),2&e){const e=C.nc().$implicit,t=C.nc(2);C.vc("src",t.url+"user/image/"+e.image,C.Oc)}}function He(e,t){1&e&&C.Wb(0,"img",30)}function qe(e,t){if(1&e){const e=C.cc();C.bc(0,"tbody"),C.bc(1,"tr",26),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(2).selectOut(n._id)})),C.bc(2,"td"),C.Tc(3,Pe,1,1,"img",27),C.Tc(4,He,1,0,"img",28),C.Vc(5),C.ac(),C.ac(),C.ac()}if(2&e){const e=t.$implicit,c=C.nc(2);C.Gb(1),C.Ib(c.selectedOut==e._id?"active":""),C.Gb(2),C.uc("ngIf","null"!=e.image),C.Gb(1),C.uc("ngIf","null"==e.image),C.Gb(1),C.Yc(" ",e.surname," ",e.name," ")}}function Ye(e,t){if(1&e){const e=C.cc();C.bc(0,"a",31),C.jc("click",(function(t){return C.Mc(e),C.nc(2).include()})),C.Vc(1,">>"),C.ac()}}function We(e,t){if(1&e){const e=C.cc();C.bc(0,"a",31),C.jc("click",(function(t){return C.Mc(e),C.nc(2).exclude()})),C.Vc(1,"<<"),C.ac()}}function ze(e,t){if(1&e&&C.Wb(0,"img",29),2&e){const e=C.nc().$implicit,t=C.nc(2);C.vc("src",t.url+"user/image/"+e.image,C.Oc)}}function $e(e,t){1&e&&C.Wb(0,"img",30)}function Xe(e,t){if(1&e){const e=C.cc();C.bc(0,"tbody"),C.bc(1,"tr",26),C.jc("click",(function(c){C.Mc(e);const n=t.$implicit;return C.nc(2).selectIn(n._id)})),C.bc(2,"td"),C.Tc(3,ze,1,1,"img",27),C.Tc(4,$e,1,0,"img",28),C.Vc(5),C.ac(),C.ac(),C.ac()}if(2&e){const e=t.$implicit,c=C.nc(2);C.Gb(1),C.Ib(c.selectedIn==e._id?"active":""),C.Gb(2),C.uc("ngIf","null"!=e.image),C.Gb(1),C.uc("ngIf","null"==e.image),C.Gb(1),C.Yc(" ",e.surname," ",e.name," ")}}function Qe(e,t){if(1&e){const e=C.cc();C.bc(0,"div",1),C.bc(1,"div",2),C.bc(2,"mat-card",3),C.Tc(3,Le,3,1,"div",4),C.Tc(4,De,3,2,"div",4),C.bc(5,"input",5),C.jc("change",(function(t){return C.Mc(e),C.nc().fileChangeEvent(t)})),C.ac(),C.bc(6,"div",6),C.bc(7,"div",7),C.Vc(8),C.ac(),C.bc(9,"div",8),C.bc(10,"span"),C.Vc(11),C.ac(),C.ac(),C.bc(12,"div",8),C.bc(13,"span"),C.Vc(14),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.bc(15,"div",9),C.bc(16,"mat-card",10),C.bc(17,"mat-card-content",11),C.bc(18,"div",12),C.bc(19,"div",13),C.bc(20,"div",14),C.bc(21,"table",15),C.bc(22,"thead"),C.bc(23,"tr"),C.bc(24,"th"),C.Vc(25,"Agentes fuera del equipo"),C.ac(),C.ac(),C.ac(),C.Tc(26,qe,6,6,"tbody",16),C.ac(),C.ac(),C.ac(),C.bc(27,"div",17),C.bc(28,"div",18),C.Tc(29,Ye,2,0,"a",19),C.Tc(30,We,2,0,"a",19),C.ac(),C.ac(),C.bc(31,"div",13),C.bc(32,"table",20),C.bc(33,"thead"),C.bc(34,"tr"),C.bc(35,"th"),C.Vc(36,"Agentes dentro del equipo"),C.ac(),C.ac(),C.ac(),C.Tc(37,Xe,6,6,"tbody",16),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(3),C.uc("ngIf","null"==e.team.image),C.Gb(1),C.uc("ngIf","null"!=e.team.image),C.Gb(4),C.Wc(e.team.name),C.Gb(3),C.Wc(e.team.company.name),C.Gb(3),C.Xc("Alta: ",e.team.createDate,""),C.Gb(12),C.uc("ngForOf",e.usersOutTeam),C.Gb(3),C.uc("ngIf","ROLE_ADMIN"==e.identity.role),C.Gb(1),C.uc("ngIf","ROLE_ADMIN"==e.identity.role),C.Gb(7),C.uc("ngForOf",e.usersInTeam)}}function Ke(e,t){if(1&e){const e=C.cc();C.bc(0,"div",1),C.bc(1,"div",9),C.bc(2,"mat-card",10),C.bc(3,"mat-card-content",11),C.bc(4,"form"),C.bc(5,"mat-form-field",32),C.bc(6,"input",33),C.jc("ngModelChange",(function(t){return C.Mc(e),C.nc().team.name=t})),C.ac(),C.ac(),C.ac(),C.bc(7,"button",34),C.jc("click",(function(t){return C.Mc(e),C.nc().onSubmit()})),C.Vc(8,"Guardar"),C.ac(),C.ac(),C.ac(),C.ac(),C.ac()}if(2&e){const e=C.nc();C.Gb(6),C.uc("ngModel",e.team.name)}}const Je=[{path:"",children:[{path:"list/requester",component:O,data:{title:"Lista de solicitantes",breadcrumb:"LISTA DE SOLICITANTES"}},{path:"list/agent",component:ne,data:{title:"Lista de agentes",breadcrumb:"LISTA DE AGENTES"}},{path:"list/team",component:(()=>{class e{constructor(e,t,c,n,a){this._userService=e,this._teamService=t,this._route=c,this._router=n,this.snackBar=a,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getTeams(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(e=>{e.teams&&(this.rows=e.teams,this.temp=e.teams)},e=>{this.openSnackBar(e.message,"Cerrar")})}setQuery(){this.query={}}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1}]}changeDate(e){return x(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}updateFilter(e){const t=e.target.value.toLowerCase();var c=Object.keys(this.temp[0]);if(c.splice(c.length-1),!c.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=c.length;n++){let a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}toNew(){this._router.navigate(["/user/team/new"])}toProfile(e){"click"==e.type&&this._router.navigate(["/user/team/profile/",e.row._id])}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(ae.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-team-list"]],features:[C.Fb([I.a,ae.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(C.bc(0,"mat-form-field",0),C.bc(1,"input",1),C.jc("keyup",(function(e){return t.updateFilter(e)})),C.ac(),C.ac(),C.Tc(2,ie,3,0,"div",2),C.bc(3,"div",3),C.bc(4,"ngx-datatable",4),C.jc("activate",(function(e){return t.toProfile(e)})),C.ac(),C.ac()),2&e&&(C.Gb(2),C.uc("ngIf",t.canCreate),C.Gb(2),C.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,r.b,n.m,o.d,u.b],styles:[""]}),e})(),data:{title:"Lista de equipos",breadcrumb:"LISTA DE EQUIPOS"}},{path:"team/profile/:id",component:(()=>{class e{constructor(e,t,c,n,a,i){this._userService=e,this._teamService=t,this._uploadService=c,this._route=n,this._router=a,this.snackBar=i,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url=V.a.url,this.team=new se("","",[""],"null","",""),this.isDefault=!1,this.selectedOut="",this.selectedIn="",this.usersInTeam=[],this.usersOutTeam=[],this.isAdmin=!1,this.isNew=!1}ngOnInit(){this.getTeam(),this.getAgents()}getTeam(){this._route.params.forEach(e=>{this._teamService.getOne(this.token,e.id).subscribe(e=>{e.team&&(this.team=e.team,this.team.company._id==this.identity.company._id&&"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0))},e=>{this.openSnackBar(e.message,"Cerrar")})})}getAgents(){this._route.params.forEach(e=>{this._teamService.getAgentsList(this.token,e.id,this.identity.company._id).subscribe(e=>{!e.usersOut&&e.usersIn?this._router.navigate(["/"]):(this.usersInTeam=e.usersIn,this.usersOutTeam=e.usersOut)},e=>{this.openSnackBar(e.message,"Cerrar")})})}onSubmit(){this._route.params.forEach(e=>{this._teamService.edit(this.token,e.id,this.team).subscribe(e=>{this.getTeam(),this.openSnackBar("Datos actualizados","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")})})}selectOut(e){this.selectedOut=e}selectIn(e){this.selectedIn=e}include(){this.selectedOut&&this._route.params.forEach(e=>{this._teamService.addUser(this.token,e.id,this.selectedOut).subscribe(e=>{e.team&&(this.selectedOut="",this.getAgents())},e=>{this.openSnackBar(e.message,"Cerrar")})})}exclude(){this.selectedIn&&this._route.params.forEach(e=>{this._teamService.removeUser(this.token,e.id,this.selectedIn).subscribe(e=>{e.team&&(this.selectedIn="",this.getAgents())},e=>{this.openSnackBar(e.message,"Cerrar")})})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}openAttachment(){document.getElementById("attachment").click()}fileChangeEvent(e){this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"team/image/"+this.team._id,[],this.filesToUpload,this.token,"image"),setTimeout(()=>{this.getTeam(),this.openSnackBar("Foto de equipo actualizada","Cerrar")},1e3)}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(ae.a),C.Vb(A.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-team-profile"]],features:[C.Fb([I.a,ae.a,A.a])],decls:2,vars:2,consts:[["fxLayout","row wrap",4,"ngIf"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","100"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],[1,"mt-1"],[1,"form-row","agent-system"],[1,"col-xl-5","offset-xl-0"],["id","dataTable",1,"table-responsive","table"],["id","dataTable",1,"table","dataTable"],[4,"ngFor","ngForOf"],[1,"col-xl-2"],["role","group",1,"btn-group-vertical","d-block"],["class","btn btn-primary dark","role","button",3,"click",4,"ngIf"],["id","dataTable",1,"table","dataTable","my-0"],[1,"propic","text-center"],["src","assets/images/system/team-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],[3,"click"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],["role","button",1,"btn","btn-primary","dark",3,"click"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(C.Tc(0,we,38,9,"div",0),C.Tc(1,ye,9,1,"div",0)),2&e&&(C.uc("ngIf",!t.isNew),C.Gb(1),C.uc("ngIf",t.isNew))},directives:[n.m,E.d,E.b,m.a,m.c,n.l,u.b,l.a,w.x,w.o,w.p,g.a,r.b,w.c,w.n,w.q],styles:[".img-profile[_ngcontent-%COMP%]{width:100%}.card-profile[_ngcontent-%COMP%]{margin-top:20px}.text-chat[_ngcontent-%COMP%]{overflow-x:auto}.acept[_ngcontent-%COMP%]{margin-right:15px}.active[_ngcontent-%COMP%]{background-color:#2d9df1;color:#fff}.newimg[_ngcontent-%COMP%]{display:none}.required[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),e})(),data:{title:"Perfil de equipo",breadcrumb:"PERFIL DE EQUIPO"}},{path:"profile/:id",component:te,data:{title:"Perfil de usuario",breadcrumb:"PERFIL DE USUARIO"}},{path:"new/:type",component:(()=>{class e{constructor(e,t,c,n,a,i){this._userService=e,this._sectorService=t,this._uploadService=c,this._route=n,this._router=a,this.snackBar=i,this.token=e.getToken(),this.identity=e.getIdentity(),this.url=V.a.url,this.user=new S.a("",null,"","",null,"","","",null,null,!1,"",["HELPDESK"],"","",null,!0,"",!0,!0),this.isNew=!0,this.isUser=!0,this.isAdmin=!0,this.newResponse=new R("","","","")}ngOnInit(){this.getUser(),this.getSectors()}getUser(){this._route.params.forEach(e=>{"requester"==e.type?this.user.role="ROLE_REQUESTER":(this.user.role="ROLE_AGENT",this.user.company=this.identity.company._id)})}delete(){}editUser(){""!=this.user.name&&""!=this.user.surname&&""!=this.user.userName&&""!=this.user.email&&""!=this.user.password?(""==this.user.sign&&(this.user.sign=null),this._userService.add(this.token,this.user).subscribe(e=>{e.user&&(this.openSnackBar("Usuario creado","Cerrar"),this._router.navigate(["/user/profile/",e.user._id]))},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}getSectors(){this._sectorService.getList(this.token).subscribe(e=>{e.sectors&&(this.sectors=e.sectors)},e=>{this.openSnackBar(e.message,"Cerrar")})}setSector(e){this.user.sector=e}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}changeAdm(e){this.user.role=1==e?"ROLE_ADMIN":"ROLE_AGENT"}setPermit(e,t){t?this.user.permits.push(e):this.user.permits.splice(this.user.permits.indexOf(e),1)}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(T.a),C.Vb(A.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-user-profile"]],features:[C.Fb([I.a,T.a,A.a])],decls:59,vars:36,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","calc(100% - 300px)",3,"fxFlex.gt-sm"],[1,"p-0"],["label","Datos personales"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","surname","type","text","placeholder","Apellido",3,"readonly","ngModel","ngModelChange"],["matInput","","name","dni","type","number","placeholder","DNI",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","legajo","placeholder","Legajo",3,"readonly","ngModel","ngModelChange"],["matInput","","type","text","name","email","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","phone","placeholder","Tel\xe9fono",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Datos de sistema"],["matInput","","name","userName","type","text","placeholder","Nombre de usuario",3,"readonly","ngModel","ngModelChange"],[3,"checked","color","disabled","change",4,"ngIf"],["name","receiveMail",3,"ngModel","color","disabled","ngModelChange"],["name","sectorRef",3,"ngModel","color","disabled","ngModelChange"],["name","infoView",3,"ngModel","color","disabled","ngModelChange"],[2,"margin-top","10px"],[3,"checked","color","change"],["matTooltip","Eliminar usuario","mat-raised-button","","color","warn","style","float: right;",3,"click",4,"ngIf"],["label","Contrase\xf1a"],["matInput","","type","password","name","contrase\xf1a_anterior","placeholder","Contrase\xf1a actual",3,"readonly","ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["label","Respuestas autom\xe1ticas",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],[4,"ngIf"],["appearance","fill","class","full-width",4,"ngIf"],[1,"default"],[1,"pt-0"],[1,"mr-1"],[1,"propic","text-center"],["src","assets/images/system/user-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["appearance","fill",1,"full-width"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"checked","color","disabled","change"],["matTooltip","Eliminar usuario","mat-raised-button","","color","warn",2,"float","right",3,"click"],["matInput","","type","password","name","contrase\xf1a_nueva","placeholder","Nueva contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","type","password","name","contrase\xf1a_confirmar","placeholder","Confirmar contrase\xf1a nueva",3,"readonly","ngModel","ngModelChange"],["label","Respuestas autom\xe1ticas"],["matInput","","type","text","name","hashtag","placeholder","Nombre",3,"ngModel","ngModelChange"],["matInput","","type","text","name","resp","placeholder","Respuesta",3,"ngModel","ngModelChange"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(C.bc(0,"div",0),C.Tc(1,Ae,26,10,"div",1),C.bc(2,"div",2),C.bc(3,"mat-card",3),C.bc(4,"mat-tab-group"),C.bc(5,"mat-tab",4),C.bc(6,"mat-card-content",5),C.bc(7,"form"),C.bc(8,"mat-form-field",6),C.bc(9,"input",7),C.jc("ngModelChange",(function(e){return t.user.name=e})),C.ac(),C.ac(),C.bc(10,"mat-form-field",6),C.bc(11,"input",8),C.jc("ngModelChange",(function(e){return t.user.surname=e})),C.ac(),C.ac(),C.bc(12,"mat-form-field",6),C.bc(13,"input",9),C.jc("ngModelChange",(function(e){return t.user.dni=e})),C.ac(),C.ac(),C.bc(14,"mat-form-field",6),C.bc(15,"input",10),C.jc("ngModelChange",(function(e){return t.user.num=e})),C.ac(),C.ac(),C.bc(16,"mat-form-field",6),C.bc(17,"input",11),C.jc("ngModelChange",(function(e){return t.user.email=e})),C.ac(),C.ac(),C.bc(18,"mat-form-field",6),C.bc(19,"input",12),C.jc("ngModelChange",(function(e){return t.user.phone=e})),C.ac(),C.ac(),C.ac(),C.bc(20,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(21,"Guardar"),C.ac(),C.ac(),C.ac(),C.bc(22,"mat-tab",14),C.bc(23,"mat-card-content",5),C.bc(24,"form"),C.bc(25,"mat-form-field",6),C.bc(26,"input",15),C.jc("ngModelChange",(function(e){return t.user.userName=e})),C.ac(),C.ac(),C.Tc(27,je,2,3,"mat-checkbox",16),C.Wb(28,"br"),C.bc(29,"mat-checkbox",17),C.jc("ngModelChange",(function(e){return t.user.receiveMail=e})),C.Vc(30,"Recibir notificaciones al correo electr\xf3nico "),C.ac(),C.Wb(31,"br"),C.bc(32,"mat-checkbox",18),C.jc("ngModelChange",(function(e){return t.user.sectorRef=e})),C.Vc(33,"Referente "),C.ac(),C.Wb(34,"br"),C.bc(35,"mat-checkbox",19),C.jc("ngModelChange",(function(e){return t.user.infoView=e})),C.Vc(36,"Visualizar mensajes de informaci\xf3n de tickets "),C.ac(),C.Wb(37,"mat-divider"),C.bc(38,"span"),C.bc(39,"h3",20),C.Vc(40,"Permisos:"),C.ac(),C.bc(41,"mat-checkbox",21),C.jc("change",(function(e){return t.setPermit("HELPDESK",e.checked)})),C.Vc(42,"Gestor de tickets "),C.ac(),C.Wb(43,"br"),C.bc(44,"mat-checkbox",21),C.jc("change",(function(e){return t.setPermit("TRACKING",e.checked)})),C.Vc(45,"Gestor de tracking "),C.ac(),C.ac(),C.ac(),C.bc(46,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(47,"Guardar"),C.ac(),C.Tc(48,Re,3,0,"button",22),C.ac(),C.ac(),C.bc(49,"mat-tab",23),C.bc(50,"mat-card-content",5),C.bc(51,"form"),C.bc(52,"mat-form-field",6),C.bc(53,"input",24),C.jc("ngModelChange",(function(e){return t.user.password=e})),C.ac(),C.ac(),C.Tc(54,Ne,2,2,"mat-form-field",25),C.Tc(55,Ee,2,2,"mat-form-field",25),C.ac(),C.bc(56,"button",13),C.jc("click",(function(e){return t.editUser()})),C.Vc(57,"Guardar"),C.ac(),C.ac(),C.ac(),C.Tc(58,Ue,10,9,"mat-tab",26),C.ac(),C.ac(),C.ac(),C.ac()),2&e&&(C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(1),C.vc("fxFlex.gt-sm",1==t.isNew?100:50),C.Gb(7),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.name),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.surname),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.dni),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.num),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.email),C.Gb(2),C.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.phone),C.Gb(7),C.uc("readonly","ROLE_ADMIN"!=t.identity.role&&!t.isNew)("ngModel",t.user.userName),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(2),C.uc("ngModel",t.user.receiveMail)("color","primary")("disabled",!t.isAdmin&&!t.isUser),C.Gb(3),C.uc("ngModel",t.user.sectorRef)("color","primary")("disabled",!t.isAdmin),C.Gb(3),C.uc("ngModel",t.user.infoView)("color","primary")("disabled",!t.isAdmin&&!t.isUser),C.Gb(6),C.uc("checked",t.user.permits.includes("HELPDESK"))("color","primary"),C.Gb(3),C.uc("checked",t.user.permits.includes("TRACKING"))("color","primary"),C.Gb(4),C.uc("ngIf",!t.isNew),C.Gb(5),C.uc("readonly",!t.isUser)("ngModel",t.user.password),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(1),C.uc("ngIf",!t.isNew),C.Gb(3),C.uc("ngIf",t.isUser&&"ROLE_REQUESTER"!=t.identity.role))},directives:[E.d,n.m,E.b,m.a,h.b,h.a,m.c,w.x,w.o,w.p,g.a,r.b,w.c,w.n,w.q,w.s,u.b,i.a,d.a,m.g,b.a,b.c,l.a,g.d,v.a,n.l,U.p,M.a,o.d],encapsulation:2}),e})(),data:{title:"Nuevo usuario",breadcrumb:"NUEVO USUARIO"}},{path:"team/new",component:(()=>{class e{constructor(e,t,c,n,a){this._userService=e,this._teamService=t,this._route=c,this._router=n,this.snackBar=a,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url=V.a.url,this.team=new se("","",[""],"null","",this.identity.company._id),this.isAdmin=!0,this.isNew=!0}ngOnInit(){}onSubmit(){this._teamService.add(this.token,this.team).subscribe(e=>{e.team&&(this.openSnackBar("Equipo creado","Cerrar"),this._router.navigate(["/user/team/",e.team._id]))},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(C.Vb(I.a),C.Vb(ae.a),C.Vb(a.a),C.Vb(a.g),C.Vb(G.a))},e.\u0275cmp=C.Pb({type:e,selectors:[["app-new-team-profile"]],features:[C.Fb([I.a,ae.a])],decls:2,vars:2,consts:[["fxLayout","row wrap",4,"ngIf"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","100"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],[1,"mt-1"],[1,"form-row","agent-system"],[1,"col-xl-5","offset-xl-0"],["id","dataTable",1,"table-responsive","table"],["id","dataTable",1,"table","dataTable"],[4,"ngFor","ngForOf"],[1,"col-xl-2"],["role","group",1,"btn-group-vertical","d-block"],["class","btn btn-primary dark","role","button",3,"click",4,"ngIf"],["id","dataTable",1,"table","dataTable","my-0"],[1,"propic","text-center"],["src","assets/images/system/team-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],[3,"click"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],["role","button",1,"btn","btn-primary","dark",3,"click"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(C.Tc(0,Qe,38,9,"div",0),C.Tc(1,Ke,9,1,"div",0)),2&e&&(C.uc("ngIf",!t.isNew),C.Gb(1),C.uc("ngIf",t.isNew))},directives:[n.m,E.d,E.b,m.a,m.c,n.l,u.b,l.a,w.x,w.o,w.p,g.a,r.b,w.c,w.n,w.q],styles:[".img-profile[_ngcontent-%COMP%]{width:100%}.card-profile[_ngcontent-%COMP%]{margin-top:20px}.text-chat[_ngcontent-%COMP%]{overflow-x:auto}.acept[_ngcontent-%COMP%]{margin-right:15px}.active[_ngcontent-%COMP%]{background-color:#2d9df1;color:#fff}.newimg[_ngcontent-%COMP%]{display:none}.required[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),e})(),data:{title:"Nuevo equipo",breadcrumb:"NUEVO EQUIPO"}}]}];c.d(t,"AppUserModule",(function(){return Ze}));let Ze=(()=>{class e{}return e.\u0275mod=C.Tb({type:e}),e.\u0275inj=C.Sb({factory:function(t){return new(t||e)},imports:[[n.c,w.t,g.c,w.j,d.b,v.b,k.a,b.d,M.b,l.b,u.c,m.e,y.a,i.b,s.c,h.c,r.c,p.a,o.e,f.a,a.k.forChild(Je)]]}),e})()}}]);