function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"3uMe":function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c("AJX/");var n=c("YFeJ"),a=c("tk/3"),i=c("fXoL"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this._httpClient=t,this.httpOptions={headers:new a.e({"Content-Type":"application/json",Authorization:"null"})},this.url=n.a.url}return _createClass(e,[{key:"add",value:function(e,t){var c=JSON.stringify(t);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.post(this.url+"team/add",c,this.httpOptions)}},{key:"edit",value:function(e,t,c){var n=JSON.stringify(c);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/update/"+t,n,this.httpOptions)}},{key:"addUser",value:function(e,t,c){var n={user:c};return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/add-user/"+t,n,this.httpOptions)}},{key:"removeUser",value:function(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.put(this.url+"team/remove-user/"+t,{user:c},this.httpOptions)}},{key:"delete",value:function(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.delete(this.url+"team/delete/"+t,this.httpOptions)}},{key:"getForName",value:function(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/for-name/"+t+"/"+c,this.httpOptions)}},{key:"getList",value:function(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/teams/"+t,this.httpOptions)}},{key:"getTeamsOfUser",value:function(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/for-user/"+t,this.httpOptions)}},{key:"getAgentsList",value:function(e,t,c){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/agents/"+t+"/"+c,this.httpOptions)}},{key:"getOne",value:function(e,t){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",e),this._httpClient.get(this.url+"team/team/"+t,this.httpOptions)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.fc(a.c))},e.\u0275prov=i.Rb({token:e,factory:e.\u0275fac}),e}()},Q2c7:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c("AJX/");var n=c("YFeJ"),a=c("fXoL"),i=c("qlzE"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this._http=t,this.url=n.a.url}return _createClass(e,[{key:"makeFileRequest",value:function(e,t,c,n,a){return new Promise((function(t,i){for(var r=new FormData,s=new XMLHttpRequest,o=0;o<c.length;o++)r.append(a,c[o],c[o].name);s.onreadystatechange=function(){4==s.readyState&&(200==s.status?t(JSON.parse(s.response)):i(s.response))},s.open("POST",e,!0),s.setRequestHeader("Authorization",n),s.send(r)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.fc(i.a))},e.\u0275prov=a.Rb({token:e,factory:e.\u0275fac}),e}()},mtpT:function(e,t,c){"use strict";c.r(t);var n=c("ofXK"),a=c("tyNb"),i=c("bSwM"),r=c("QibW"),s=c("qFsG"),o=c("lDzL"),u=c("NFeN"),l=c("bTqV"),m=c("Wp6s"),d=c("f0Cb"),f=c("wZkO"),p=c("MutI"),b=c("YUcS"),h=c("aYsj"),g=c("kmnG"),v=c("d3UM"),y=c("3Pt+"),k=c("1jcm"),w=c("Qu3c"),M=c("PCNd"),C=c("wd/R"),x=c("gU78"),I=c("fXoL"),_=c("dNgK");function G(e,t){if(1&e){var c=I.cc();I.bc(0,"div",5),I.bc(1,"button",6),I.jc("click",(function(e){return I.Mc(c),I.nc().toNew()})),I.Vc(2,"Nuevo"),I.ac(),I.ac()}}var O,S=((O=function(){function e(t,c,n,a){_classCallCheck(this,e),this._userService=t,this._route=c,this._router=n,this.snackBar=a,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=t.getToken(),this.identity=t.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getUsers(),"ROLE_ADMIN"!=this.identity.role&&"ROLE_AGENT"!=this.identity.role||(this.canCreate=!0)}},{key:"getUsers",value:function(){var e=this;this._userService.getListReq(this.token,this.identity.company._id).subscribe((function(t){t.users&&(e.rows=t.users,e.temp=t.users)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setQuery",value:function(){this.query={}}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1},{prop:"surname",name:"Apellido",flexGrow:1},{prop:"email",name:"Email",flexGrow:1},{prop:"phone",name:"Interno",flexGrow:1},{prop:"userName",name:"Usuario",flexGrow:1}]}},{key:"changeDate",value:function(e){return C(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),c=Object.keys(this.temp[0]);if(c.splice(c.length-1),c.length){var n=this.temp.filter((function(e){for(var n=0;n<=c.length;n++){var a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}}},{key:"toNew",value:function(){this._router.navigate(["/user/new/requester"])}},{key:"toProfile",value:function(e){"click"==e.type&&this._router.navigate(["/user/profile/",e.row._id])}}]),e}()).\u0275fac=function(e){return new(e||O)(I.Vb(x.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},O.\u0275cmp=I.Pb({type:O,selectors:[["app-req-list"]],features:[I.Fb([x.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(I.bc(0,"mat-form-field",0),I.bc(1,"input",1),I.jc("keyup",(function(e){return t.updateFilter(e)})),I.ac(),I.ac(),I.Tc(2,G,3,0,"div",2),I.bc(3,"div",3),I.bc(4,"ngx-datatable",4),I.jc("activate",(function(e){return t.toProfile(e)})),I.ac(),I.ac()),2&e&&(I.Gb(2),I.uc("ngIf",t.canCreate),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,s.b,n.m,o.d,l.b],styles:[""]}),O),T=c("+8wx"),V=c("O4PR"),A=c("YFeJ"),j=c("Q2c7"),R=c("jZsi"),N=function e(t,c,n,a){_classCallCheck(this,e),this._id=t,this.hashtag=c,this.resp=n,this.user=a},E=c("3kSh"),U=c("XiUz"),F=c("FKr1");function L(e,t){if(1&e){var c=I.cc();I.bc(0,"button",41),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function B(e,t){if(1&e&&(I.bc(0,"div",38),I.Wb(1,"img",39),I.Tc(2,L,3,0,"button",40),I.ac()),2&e){var c=I.nc(2);I.Gb(2),I.uc("ngIf",c.isAdmin||c.isUser)}}function P(e,t){if(1&e){var c=I.cc();I.bc(0,"button",41),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function D(e,t){if(1&e&&(I.bc(0,"div",38),I.Wb(1,"img",42),I.Tc(2,P,3,0,"button",40),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.vc("src",c.url+"user/image/"+c.user.image,I.Oc),I.Gb(1),I.uc("ngIf",c.isAdmin||c.isUser)}}function H(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Wc(c.user.sector.name)}}function Y(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-option",45),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(3).setSector(n._id)})),I.Vc(1),I.ac()}if(2&e){var n=t.$implicit;I.uc("value",n),I.Gb(1),I.Xc("",n.name," ")}}function W(e,t){if(1&e&&(I.bc(0,"mat-form-field",43),I.bc(1,"mat-label"),I.Vc(2,"Cambiar sector"),I.ac(),I.bc(3,"mat-select"),I.Tc(4,Y,2,2,"mat-option",44),I.ac(),I.ac()),2&e){var c=I.nc(2);I.Gb(4),I.uc("ngForOf",c.sectors)}}function q(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Xc(" ",c.user.email," ")}}function z(e,t){1&e&&(I.bc(0,"span"),I.Vc(1," - "),I.ac())}function X(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Xc(" ",c.user.phone," ")}}function $(e,t){1&e&&(I.bc(0,"span"),I.Vc(1," - "),I.ac())}function Q(e,t){if(1&e){var c=I.cc();I.bc(0,"div",26),I.bc(1,"mat-card",27),I.Tc(2,B,3,1,"div",28),I.Tc(3,D,3,2,"div",28),I.bc(4,"input",29),I.jc("change",(function(e){return I.Mc(c),I.nc().fileChangeEvent(e)})),I.ac(),I.bc(5,"div",30),I.bc(6,"div",31),I.Vc(7),I.ac(),I.bc(8,"div",32),I.Tc(9,H,2,1,"span",33),I.Tc(10,W,5,1,"mat-form-field",34),I.ac(),I.ac(),I.ac(),I.bc(11,"mat-card",35),I.bc(12,"mat-card-title"),I.Vc(13,"Informaci\xf3n de contacto"),I.ac(),I.bc(14,"mat-card-content",36),I.bc(15,"mat-list"),I.bc(16,"mat-list-item"),I.bc(17,"mat-icon",37),I.Vc(18,"email"),I.ac(),I.Tc(19,q,2,1,"span",33),I.Tc(20,z,2,0,"span",33),I.ac(),I.bc(21,"mat-list-item"),I.bc(22,"mat-icon",37),I.Vc(23,"phone"),I.ac(),I.Tc(24,X,2,1,"span",33),I.Tc(25,$,2,0,"span",33),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(2),I.uc("ngIf","null"==n.user.image),I.Gb(1),I.uc("ngIf","null"!=n.user.image),I.Gb(4),I.Yc("",n.user.surname,", ",n.user.name,""),I.Gb(2),I.uc("ngIf",n.user.sector),I.Gb(1),I.uc("ngIf",n.isAdmin),I.Gb(9),I.uc("ngIf",""!=n.user.email),I.Gb(1),I.uc("ngIf",""==n.user.email),I.Gb(4),I.uc("ngIf",null!=n.user.phone),I.Gb(1),I.uc("ngIf",!n.user.phone||null==n.user.phone)}}function K(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-checkbox",46),I.jc("change",(function(e){return I.Mc(c),I.nc().changeAdm(e.checked)})),I.Vc(1,"Administrador "),I.ac()}if(2&e){var n=I.nc();I.uc("checked","ROLE_ADMIN"==n.user.role)("color","primary")("disabled",!n.isAdmin)}}function J(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-form-field",6),I.bc(1,"input",47),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().password.new=e})),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(1),I.uc("readonly",!n.isAdmin&&!n.isUser)("ngModel",n.password.new)}}function Z(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-form-field",6),I.bc(1,"input",48),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().password.confirm=e})),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(1),I.uc("readonly",!n.isAdmin&&!n.isUser)("ngModel",n.password.confirm)}}function ee(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-tab",49),I.bc(1,"mat-card-content",5),I.bc(2,"form"),I.bc(3,"mat-form-field",6),I.bc(4,"input",50),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().newResponse.hashtag=e})),I.ac(),I.ac(),I.bc(5,"mat-form-field",6),I.bc(6,"input",51),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().newResponse.resp=e})),I.ac(),I.ac(),I.bc(7,"button",13),I.jc("click",(function(e){return I.Mc(c),I.nc().saveResponse()})),I.Vc(8,"A\xf1adir"),I.ac(),I.ac(),I.bc(9,"ngx-datatable",52),I.jc("activate",(function(e){return I.Mc(c),I.nc().deleteResponse(e)})),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(4),I.uc("ngModel",n.newResponse.hashtag),I.Gb(2),I.uc("ngModel",n.newResponse.resp),I.Gb(3),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",5)("rows",n.responses)("columns",n.responseColumns)}}var te,ce=((te=function(){function e(t,c,n,a,i,r,s){_classCallCheck(this,e),this._userService=t,this._sectorService=c,this.confirmService=n,this._uploadService=a,this._responseService=i,this._route=r,this.snackBar=s,this.responseColumns=[],this.responses=[],this.token=t.getToken(),this.identity=t.getIdentity(),this.url=A.a.url,this.user=new T.a("",null,"","",null,"","","",null,null,!1,"",[],"","",null,!0,"",!0,!0),this.newResponse=new N("","","",""),this.isAdmin=!1,this.isUser=!1,this.isNew=!1,this.password={new:"",confirm:""}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUser(),this.getSectors(),this.getColumns(),this.getResponses()}},{key:"getUser",value:function(){var e=this;this._route.params.forEach((function(t){e._userService.getOne(e.token,t.id).subscribe((function(t){t.user&&(e.user=t.user,e.user.password="",("ROLE_ADMIN"==e.identity.role||"ROLE_REQUESTER"==e.user.role&&"ROLE_AGENT"==e.identity.role)&&e.identity.company&&"Sistemas"==e.identity.company.name&&(e.isAdmin=!0),e.user._id==e.identity._id&&(e.isUser=!0),e.role=e.user.role)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"getSectors",value:function(){var e=this;this._sectorService.getList(this.token).subscribe((function(t){t.sectors&&(e.sectors=t.sectors)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"getResponses",value:function(){var e=this;this._responseService.getList(this.token,this.identity._id).subscribe((function(t){t.responses&&(e.responses=t.responses)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"saveResponse",value:function(){var e=this;""!=this.newResponse.hashtag&&""!=this.newResponse.resp?(this.newResponse.user=this.identity._id,this.newResponse.hashtag="#"+this.newResponse.hashtag.replace(" ",""),this._responseService.add(this.token,this.newResponse).subscribe((function(t){t.response&&(e.openSnackBar("Respuesta autom\xe1tica a\xf1adida","Cerrar"),e.getResponses(),e.newResponse.hashtag="",e.newResponse.resp="")}),(function(t){e.openSnackBar(t.message,"Cerrar")}))):this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"deleteResponse",value:function(e){var t=this;"click"==e.type&&this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar "+e.row.hashtag+"?"}).subscribe((function(c){c&&t._responseService.delete(t.token,e.row._id).subscribe((function(e){e.response&&(t.getResponses(),t.openSnackBar("Respuesta autom\xe1tica eliminada","Cerrar"))}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}))}},{key:"setSector",value:function(e){this.user.sector=e,this.editUser()}},{key:"getColumns",value:function(){this.responseColumns=[{prop:"hashtag",name:"Nombre",flexGrow:1},{prop:"resp",name:"Respuesta",flexGrow:4}]}},{key:"editUser",value:function(){var e=this;if(""!=this.user.name&&""!=this.user.surname&&""!=this.user.userName&&""!=this.user.email){(this.user.sign="")&&(this.user.sign=null);var t="";if(this.isAdmin&&""!=this.password.new){if(this.password.new!=this.password.confirm)return this.openSnackBar("La nueva contrase\xf1a no coincide con su confirmaci\xf3n","Cerrar");t=this.user.password}else if(""!=this.user.password){if(this.password.new!=this.password.confirm)return this.openSnackBar("La nueva contrase\xf1a no coincide con su confirmaci\xf3n","Cerrar");t=this.user.password}delete this.user.password;var c=this.password.new;this.password.new="",this.password.confirm="",this._userService.edit(this.token,this.user).subscribe((function(n){n.user&&(""!=t?e._userService.login({userName:e.user.userName,password:t}).subscribe((function(t){t.user?e._userService.edit(e.token,{_id:e.user._id,password:c}).subscribe((function(t){e.openSnackBar("Contrase\xf1a cambiada.","Cerrar"),e.openSnackBar("Datos actualizados","Cerrar"),e.getUser()}),(function(e){})):e.openSnackBar("La contrase\xf1a actual no es la correcta.","Cerrar")}),(function(t){e.openSnackBar("La contrase\xf1a actual no es la correcta.","Cerrar")})):(e.openSnackBar("Datos actualizados","Cerrar"),e.getUser()))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}else this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"openAttachment",value:function(){document.getElementById("attachment").click()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"setPermit",value:function(e,t){t?this.user.permits.push(e):this.user.permits.splice(this.user.permits.indexOf(e),1)}},{key:"changeAdm",value:function(e){this.user.role=1==e?"ROLE_ADMIN":this.role}},{key:"fileChangeEvent",value:function(e){var t=this;this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"user/image/"+this.user._id,[],this.filesToUpload,this.token,"image"),setTimeout((function(){t.getUser(),t.openSnackBar("Foto de perfil actualizada","Cerrar")}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||te)(I.Vb(x.a),I.Vb(V.a),I.Vb(E.a),I.Vb(j.a),I.Vb(R.a),I.Vb(a.a),I.Vb(_.a))},te.\u0275cmp=I.Pb({type:te,selectors:[["app-user-profile"]],features:[I.Fb([x.a,V.a,j.a,R.a])],decls:58,vars:35,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","calc(100% - 300px)",3,"fxFlex.gt-sm"],[1,"p-0"],["label","Datos personales"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","surname","type","text","placeholder","Apellido",3,"readonly","ngModel","ngModelChange"],["matInput","","name","dni","type","number","placeholder","DNI",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","legajo","placeholder","Legajo",3,"readonly","ngModel","ngModelChange"],["matInput","","type","text","name","email","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","phone","placeholder","Tel\xe9fono",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Datos de sistema"],["matInput","","name","userName","type","text","placeholder","Nombre de usuario",3,"readonly","ngModel","ngModelChange"],[3,"checked","color","disabled","change",4,"ngIf"],["name","receiveMail",3,"ngModel","color","disabled","ngModelChange"],["name","sectorRef",3,"ngModel","color","disabled","ngModelChange"],["name","infoView",3,"ngModel","color","disabled","ngModelChange"],[2,"margin-top","10px"],[3,"checked","color","change"],["label","Contrase\xf1a"],["matInput","","type","password","name","contrase\xf1a_anterior","placeholder","Contrase\xf1a actual",3,"readonly","ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["label","Respuestas autom\xe1ticas",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],[4,"ngIf"],["appearance","fill","class","full-width",4,"ngIf"],[1,"default"],[1,"pt-0"],[1,"mr-1"],[1,"propic","text-center"],["src","assets/images/system/user-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["appearance","fill",1,"full-width"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"checked","color","disabled","change"],["matInput","","type","password","name","contrase\xf1a_nueva","placeholder","Nueva contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","type","password","name","contrase\xf1a_confirmar","placeholder","Confirmar contrase\xf1a nueva",3,"readonly","ngModel","ngModelChange"],["label","Respuestas autom\xe1ticas"],["matInput","","type","text","name","hashtag","placeholder","Nombre",3,"ngModel","ngModelChange"],["matInput","","type","text","name","resp","placeholder","Respuesta",3,"ngModel","ngModelChange"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(I.bc(0,"div",0),I.Tc(1,Q,26,10,"div",1),I.bc(2,"div",2),I.bc(3,"mat-card",3),I.bc(4,"mat-tab-group"),I.bc(5,"mat-tab",4),I.bc(6,"mat-card-content",5),I.bc(7,"form"),I.bc(8,"mat-form-field",6),I.bc(9,"input",7),I.jc("ngModelChange",(function(e){return t.user.name=e})),I.ac(),I.ac(),I.bc(10,"mat-form-field",6),I.bc(11,"input",8),I.jc("ngModelChange",(function(e){return t.user.surname=e})),I.ac(),I.ac(),I.bc(12,"mat-form-field",6),I.bc(13,"input",9),I.jc("ngModelChange",(function(e){return t.user.dni=e})),I.ac(),I.ac(),I.bc(14,"mat-form-field",6),I.bc(15,"input",10),I.jc("ngModelChange",(function(e){return t.user.num=e})),I.ac(),I.ac(),I.bc(16,"mat-form-field",6),I.bc(17,"input",11),I.jc("ngModelChange",(function(e){return t.user.email=e})),I.ac(),I.ac(),I.bc(18,"mat-form-field",6),I.bc(19,"input",12),I.jc("ngModelChange",(function(e){return t.user.phone=e})),I.ac(),I.ac(),I.ac(),I.bc(20,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(21,"Guardar"),I.ac(),I.ac(),I.ac(),I.bc(22,"mat-tab",14),I.bc(23,"mat-card-content",5),I.bc(24,"form"),I.bc(25,"mat-form-field",6),I.bc(26,"input",15),I.jc("ngModelChange",(function(e){return t.user.userName=e})),I.ac(),I.ac(),I.Tc(27,K,2,3,"mat-checkbox",16),I.Wb(28,"br"),I.bc(29,"mat-checkbox",17),I.jc("ngModelChange",(function(e){return t.user.receiveMail=e})),I.Vc(30,"Recibir notificaciones al correo electr\xf3nico "),I.ac(),I.Wb(31,"br"),I.bc(32,"mat-checkbox",18),I.jc("ngModelChange",(function(e){return t.user.sectorRef=e})),I.Vc(33,"Referente "),I.ac(),I.Wb(34,"br"),I.bc(35,"mat-checkbox",19),I.jc("ngModelChange",(function(e){return t.user.infoView=e})),I.Vc(36,"Visualizar mensajes de informaci\xf3n de tickets "),I.ac(),I.Wb(37,"mat-divider"),I.bc(38,"span"),I.bc(39,"h3",20),I.Vc(40,"Permisos:"),I.ac(),I.bc(41,"mat-checkbox",21),I.jc("change",(function(e){return t.setPermit("HELPDESK",e.checked)})),I.Vc(42,"Gestor de tickets "),I.ac(),I.Wb(43,"br"),I.bc(44,"mat-checkbox",21),I.jc("change",(function(e){return t.setPermit("TRACKING",e.checked)})),I.Vc(45,"Gestor de tracking "),I.ac(),I.ac(),I.ac(),I.bc(46,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(47,"Guardar"),I.ac(),I.ac(),I.ac(),I.bc(48,"mat-tab",22),I.bc(49,"mat-card-content",5),I.bc(50,"form"),I.bc(51,"mat-form-field",6),I.bc(52,"input",23),I.jc("ngModelChange",(function(e){return t.user.password=e})),I.ac(),I.ac(),I.Tc(53,J,2,2,"mat-form-field",24),I.Tc(54,Z,2,2,"mat-form-field",24),I.ac(),I.bc(55,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(56,"Guardar"),I.ac(),I.ac(),I.ac(),I.Tc(57,ee,10,9,"mat-tab",25),I.ac(),I.ac(),I.ac(),I.ac()),2&e&&(I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(1),I.vc("fxFlex.gt-sm",1==t.isNew?100:50),I.Gb(7),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.name),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.surname),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.dni),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.num),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.email),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.phone),I.Gb(7),I.uc("readonly","ROLE_ADMIN"!=t.identity.role)("ngModel",t.user.userName),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(2),I.uc("ngModel",t.user.receiveMail)("color","primary")("disabled",!t.isAdmin&&!t.isUser),I.Gb(3),I.uc("ngModel",t.user.sectorRef)("color","primary")("disabled",!t.isAdmin),I.Gb(3),I.uc("ngModel",t.user.infoView)("color","primary")("disabled",!t.isAdmin&&!t.isUser),I.Gb(6),I.uc("checked",t.user.permits.includes("HELPDESK"))("color","primary"),I.Gb(3),I.uc("checked",t.user.permits.includes("TRACKING"))("color","primary"),I.Gb(8),I.uc("readonly",!t.isUser)("ngModel",t.user.password),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(3),I.uc("ngIf",t.isUser&&"ROLE_REQUESTER"!=t.identity.role))},directives:[U.d,n.m,U.b,m.a,f.b,f.a,m.c,y.x,y.o,y.p,g.a,s.b,y.c,y.n,y.q,y.s,l.b,i.a,d.a,m.g,p.a,p.c,u.a,g.d,v.a,n.l,F.p,o.d],encapsulation:2}),te);function ne(e,t){if(1&e){var c=I.cc();I.bc(0,"div",5),I.bc(1,"button",6),I.jc("click",(function(e){return I.Mc(c),I.nc().toNew()})),I.Vc(2,"Nuevo"),I.ac(),I.ac()}}var ae,ie=((ae=function(){function e(t,c,n,a){_classCallCheck(this,e),this._userService=t,this._route=c,this._router=n,this.snackBar=a,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=t.getToken(),this.identity=t.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getUsers(),"Sistemas"==this.identity.company.name&&(this.canCreate=!0)}},{key:"getUsers",value:function(){var e=this;this._userService.getListAgents(this.token,this.identity.company._id).subscribe((function(t){t.users&&(e.rows=t.users,e.temp=t.users)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setQuery",value:function(){this.query={}}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1},{prop:"surname",name:"Apellido",flexGrow:1},{prop:"email",name:"Email",flexGrow:1},{prop:"phone",name:"Interno",flexGrow:1},{prop:"userName",name:"Usuario",flexGrow:1}]}},{key:"changeDate",value:function(e){return C(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),c=Object.keys(this.temp[0]);if(c.splice(c.length-1),c.length){var n=this.temp.filter((function(e){for(var n=0;n<=c.length;n++){var a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}}},{key:"toNew",value:function(){this._router.navigate(["/user/new/agent"])}},{key:"toProfile",value:function(e){"click"==e.type&&this._router.navigate(["/user/profile/",e.row._id])}}]),e}()).\u0275fac=function(e){return new(e||ae)(I.Vb(x.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},ae.\u0275cmp=I.Pb({type:ae,selectors:[["app-agent-list"]],features:[I.Fb([x.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(I.bc(0,"mat-form-field",0),I.bc(1,"input",1),I.jc("keyup",(function(e){return t.updateFilter(e)})),I.ac(),I.ac(),I.Tc(2,ne,3,0,"div",2),I.bc(3,"div",3),I.bc(4,"ngx-datatable",4),I.jc("activate",(function(e){return t.toProfile(e)})),I.ac(),I.ac()),2&e&&(I.Gb(2),I.uc("ngIf",t.canCreate),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,s.b,n.m,o.d,l.b],styles:[""]}),ae),re=c("3uMe");function se(e,t){if(1&e){var c=I.cc();I.bc(0,"div",5),I.bc(1,"button",6),I.jc("click",(function(e){return I.Mc(c),I.nc().toNew()})),I.Vc(2,"Nuevo"),I.ac(),I.ac()}}var oe=function e(t,c,n,a,i,r){_classCallCheck(this,e),this._id=t,this.name=c,this.users=n,this.image=a,this.createDate=i,this.company=r};function ue(e,t){if(1&e){var c=I.cc();I.bc(0,"button",24),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function le(e,t){if(1&e&&(I.bc(0,"div",21),I.Wb(1,"img",22),I.Tc(2,ue,3,0,"button",23),I.ac()),2&e){var c=I.nc(2);I.Gb(2),I.uc("ngIf",c.isAdmin)}}function me(e,t){if(1&e){var c=I.cc();I.bc(0,"button",24),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function de(e,t){if(1&e&&(I.bc(0,"div",21),I.Wb(1,"img",25),I.Tc(2,me,3,0,"button",23),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.vc("src",c.url+"team/image/"+c.team.image,I.Oc),I.Gb(1),I.uc("ngIf",c.isAdmin)}}function fe(e,t){if(1&e&&I.Wb(0,"img",29),2&e){var c=I.nc().$implicit,n=I.nc(2);I.vc("src",n.url+"user/image/"+c.image,I.Oc)}}function pe(e,t){1&e&&I.Wb(0,"img",30)}function be(e,t){if(1&e){var c=I.cc();I.bc(0,"tbody"),I.bc(1,"tr",26),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(2).selectOut(n._id)})),I.bc(2,"td"),I.Tc(3,fe,1,1,"img",27),I.Tc(4,pe,1,0,"img",28),I.Vc(5),I.ac(),I.ac(),I.ac()}if(2&e){var n=t.$implicit,a=I.nc(2);I.Gb(1),I.Ib(a.selectedOut==n._id?"active":""),I.Gb(2),I.uc("ngIf","null"!=n.image),I.Gb(1),I.uc("ngIf","null"==n.image),I.Gb(1),I.Yc(" ",n.surname," ",n.name," ")}}function he(e,t){if(1&e){var c=I.cc();I.bc(0,"a",31),I.jc("click",(function(e){return I.Mc(c),I.nc(2).include()})),I.Vc(1,">>"),I.ac()}}function ge(e,t){if(1&e){var c=I.cc();I.bc(0,"a",31),I.jc("click",(function(e){return I.Mc(c),I.nc(2).exclude()})),I.Vc(1,"<<"),I.ac()}}function ve(e,t){if(1&e&&I.Wb(0,"img",29),2&e){var c=I.nc().$implicit,n=I.nc(2);I.vc("src",n.url+"user/image/"+c.image,I.Oc)}}function ye(e,t){1&e&&I.Wb(0,"img",30)}function ke(e,t){if(1&e){var c=I.cc();I.bc(0,"tbody"),I.bc(1,"tr",26),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(2).selectIn(n._id)})),I.bc(2,"td"),I.Tc(3,ve,1,1,"img",27),I.Tc(4,ye,1,0,"img",28),I.Vc(5),I.ac(),I.ac(),I.ac()}if(2&e){var n=t.$implicit,a=I.nc(2);I.Gb(1),I.Ib(a.selectedIn==n._id?"active":""),I.Gb(2),I.uc("ngIf","null"!=n.image),I.Gb(1),I.uc("ngIf","null"==n.image),I.Gb(1),I.Yc(" ",n.surname," ",n.name," ")}}function we(e,t){if(1&e){var c=I.cc();I.bc(0,"div",1),I.bc(1,"div",2),I.bc(2,"mat-card",3),I.Tc(3,le,3,1,"div",4),I.Tc(4,de,3,2,"div",4),I.bc(5,"input",5),I.jc("change",(function(e){return I.Mc(c),I.nc().fileChangeEvent(e)})),I.ac(),I.bc(6,"div",6),I.bc(7,"div",7),I.Vc(8),I.ac(),I.bc(9,"div",8),I.bc(10,"span"),I.Vc(11),I.ac(),I.ac(),I.bc(12,"div",8),I.bc(13,"span"),I.Vc(14),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.bc(15,"div",9),I.bc(16,"mat-card",10),I.bc(17,"mat-card-content",11),I.bc(18,"div",12),I.bc(19,"div",13),I.bc(20,"div",14),I.bc(21,"table",15),I.bc(22,"thead"),I.bc(23,"tr"),I.bc(24,"th"),I.Vc(25,"Agentes fuera del equipo"),I.ac(),I.ac(),I.ac(),I.Tc(26,be,6,6,"tbody",16),I.ac(),I.ac(),I.ac(),I.bc(27,"div",17),I.bc(28,"div",18),I.Tc(29,he,2,0,"a",19),I.Tc(30,ge,2,0,"a",19),I.ac(),I.ac(),I.bc(31,"div",13),I.bc(32,"table",20),I.bc(33,"thead"),I.bc(34,"tr"),I.bc(35,"th"),I.Vc(36,"Agentes dentro del equipo"),I.ac(),I.ac(),I.ac(),I.Tc(37,ke,6,6,"tbody",16),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(3),I.uc("ngIf","null"==n.team.image),I.Gb(1),I.uc("ngIf","null"!=n.team.image),I.Gb(4),I.Wc(n.team.name),I.Gb(3),I.Wc(n.team.company.name),I.Gb(3),I.Xc("Alta: ",n.team.createDate,""),I.Gb(12),I.uc("ngForOf",n.usersOutTeam),I.Gb(3),I.uc("ngIf","ROLE_ADMIN"==n.identity.role),I.Gb(1),I.uc("ngIf","ROLE_ADMIN"==n.identity.role),I.Gb(7),I.uc("ngForOf",n.usersInTeam)}}function Me(e,t){if(1&e){var c=I.cc();I.bc(0,"div",1),I.bc(1,"div",9),I.bc(2,"mat-card",10),I.bc(3,"mat-card-content",11),I.bc(4,"form"),I.bc(5,"mat-form-field",32),I.bc(6,"input",33),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().team.name=e})),I.ac(),I.ac(),I.ac(),I.bc(7,"button",34),I.jc("click",(function(e){return I.Mc(c),I.nc().onSubmit()})),I.Vc(8,"Guardar"),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(6),I.uc("ngModel",n.team.name)}}function Ce(e,t){if(1&e){var c=I.cc();I.bc(0,"button",41),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function xe(e,t){if(1&e&&(I.bc(0,"div",38),I.Wb(1,"img",39),I.Tc(2,Ce,3,0,"button",40),I.ac()),2&e){var c=I.nc(2);I.Gb(2),I.uc("ngIf",c.isAdmin||c.isUser)}}function Ie(e,t){if(1&e){var c=I.cc();I.bc(0,"button",41),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function _e(e,t){if(1&e&&(I.bc(0,"div",38),I.Wb(1,"img",42),I.Tc(2,Ie,3,0,"button",40),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.vc("src",c.url+"user/image/"+c.user.image,I.Oc),I.Gb(1),I.uc("ngIf",c.isAdmin||c.isUser)}}function Ge(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Wc(c.user.sector.name)}}function Oe(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-option",45),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(3).setSector(n._id)})),I.Vc(1),I.ac()}if(2&e){var n=t.$implicit;I.uc("value",n),I.Gb(1),I.Xc("",n.name," ")}}function Se(e,t){if(1&e&&(I.bc(0,"mat-form-field",43),I.bc(1,"mat-label"),I.Vc(2,"Cambiar sector"),I.ac(),I.bc(3,"mat-select"),I.Tc(4,Oe,2,2,"mat-option",44),I.ac(),I.ac()),2&e){var c=I.nc(2);I.Gb(4),I.uc("ngForOf",c.sectors)}}function Te(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Xc(" ",c.user.email," ")}}function Ve(e,t){1&e&&(I.bc(0,"span"),I.Vc(1," - "),I.ac())}function Ae(e,t){if(1&e&&(I.bc(0,"span"),I.Vc(1),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.Xc(" ",c.user.phone," ")}}function je(e,t){1&e&&(I.bc(0,"span"),I.Vc(1," - "),I.ac())}function Re(e,t){if(1&e){var c=I.cc();I.bc(0,"div",26),I.bc(1,"mat-card",27),I.Tc(2,xe,3,1,"div",28),I.Tc(3,_e,3,2,"div",28),I.bc(4,"input",29),I.jc("change",(function(e){return I.Mc(c),I.nc().fileChangeEvent(e)})),I.ac(),I.bc(5,"div",30),I.bc(6,"div",31),I.Vc(7),I.ac(),I.bc(8,"div",32),I.Tc(9,Ge,2,1,"span",33),I.Tc(10,Se,5,1,"mat-form-field",34),I.ac(),I.ac(),I.ac(),I.bc(11,"mat-card",35),I.bc(12,"mat-card-title"),I.Vc(13,"Informaci\xf3n de contacto"),I.ac(),I.bc(14,"mat-card-content",36),I.bc(15,"mat-list"),I.bc(16,"mat-list-item"),I.bc(17,"mat-icon",37),I.Vc(18,"email"),I.ac(),I.Tc(19,Te,2,1,"span",33),I.Tc(20,Ve,2,0,"span",33),I.ac(),I.bc(21,"mat-list-item"),I.bc(22,"mat-icon",37),I.Vc(23,"phone"),I.ac(),I.Tc(24,Ae,2,1,"span",33),I.Tc(25,je,2,0,"span",33),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(2),I.uc("ngIf","null"==n.user.image),I.Gb(1),I.uc("ngIf","null"!=n.user.image),I.Gb(4),I.Yc("",n.user.surname,", ",n.user.name,""),I.Gb(2),I.uc("ngIf",n.user.sector),I.Gb(1),I.uc("ngIf",n.isAdmin),I.Gb(9),I.uc("ngIf",""!=n.user.email),I.Gb(1),I.uc("ngIf",""==n.user.email),I.Gb(4),I.uc("ngIf",null!=n.user.phone),I.Gb(1),I.uc("ngIf",!n.user.phone||null==n.user.phone)}}function Ne(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-checkbox",46),I.jc("change",(function(e){return I.Mc(c),I.nc().changeAdm(e.checked)})),I.Vc(1,"Administrador "),I.ac()}if(2&e){var n=I.nc();I.uc("checked","ROLE_ADMIN"==n.user.role)("color","primary")("disabled",!n.isAdmin)}}function Ee(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-form-field",6),I.bc(1,"input",47),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().password.new=e})),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(1),I.uc("readonly",!n.isAdmin&&!n.isUser)("ngModel",n.password.new)}}function Ue(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-form-field",6),I.bc(1,"input",48),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().password.confirm=e})),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(1),I.uc("readonly",!n.isAdmin&&!n.isUser)("ngModel",n.password.confirm)}}function Fe(e,t){if(1&e){var c=I.cc();I.bc(0,"mat-tab",49),I.bc(1,"mat-card-content",5),I.bc(2,"form"),I.bc(3,"mat-form-field",6),I.bc(4,"input",50),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().newResponse.hashtag=e})),I.ac(),I.ac(),I.bc(5,"mat-form-field",6),I.bc(6,"input",51),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().newResponse.resp=e})),I.ac(),I.ac(),I.bc(7,"button",13),I.jc("click",(function(e){return I.Mc(c),I.nc().saveResponse()})),I.Vc(8,"A\xf1adir"),I.ac(),I.ac(),I.bc(9,"ngx-datatable",52),I.jc("activate",(function(e){return I.Mc(c),I.nc().deleteResponse(e)})),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(4),I.uc("ngModel",n.newResponse.hashtag),I.Gb(2),I.uc("ngModel",n.newResponse.resp),I.Gb(3),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",5)("rows",n.responses)("columns",n.responseColumns)}}function Le(e,t){if(1&e){var c=I.cc();I.bc(0,"button",24),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function Be(e,t){if(1&e&&(I.bc(0,"div",21),I.Wb(1,"img",22),I.Tc(2,Le,3,0,"button",23),I.ac()),2&e){var c=I.nc(2);I.Gb(2),I.uc("ngIf",c.isAdmin)}}function Pe(e,t){if(1&e){var c=I.cc();I.bc(0,"button",24),I.jc("click",(function(e){return I.Mc(c),I.nc(3).openAttachment()})),I.bc(1,"mat-icon"),I.Vc(2,"edit"),I.ac(),I.ac()}}function De(e,t){if(1&e&&(I.bc(0,"div",21),I.Wb(1,"img",25),I.Tc(2,Pe,3,0,"button",23),I.ac()),2&e){var c=I.nc(2);I.Gb(1),I.vc("src",c.url+"team/image/"+c.team.image,I.Oc),I.Gb(1),I.uc("ngIf",c.isAdmin)}}function He(e,t){if(1&e&&I.Wb(0,"img",29),2&e){var c=I.nc().$implicit,n=I.nc(2);I.vc("src",n.url+"user/image/"+c.image,I.Oc)}}function Ye(e,t){1&e&&I.Wb(0,"img",30)}function We(e,t){if(1&e){var c=I.cc();I.bc(0,"tbody"),I.bc(1,"tr",26),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(2).selectOut(n._id)})),I.bc(2,"td"),I.Tc(3,He,1,1,"img",27),I.Tc(4,Ye,1,0,"img",28),I.Vc(5),I.ac(),I.ac(),I.ac()}if(2&e){var n=t.$implicit,a=I.nc(2);I.Gb(1),I.Ib(a.selectedOut==n._id?"active":""),I.Gb(2),I.uc("ngIf","null"!=n.image),I.Gb(1),I.uc("ngIf","null"==n.image),I.Gb(1),I.Yc(" ",n.surname," ",n.name," ")}}function qe(e,t){if(1&e){var c=I.cc();I.bc(0,"a",31),I.jc("click",(function(e){return I.Mc(c),I.nc(2).include()})),I.Vc(1,">>"),I.ac()}}function ze(e,t){if(1&e){var c=I.cc();I.bc(0,"a",31),I.jc("click",(function(e){return I.Mc(c),I.nc(2).exclude()})),I.Vc(1,"<<"),I.ac()}}function Xe(e,t){if(1&e&&I.Wb(0,"img",29),2&e){var c=I.nc().$implicit,n=I.nc(2);I.vc("src",n.url+"user/image/"+c.image,I.Oc)}}function $e(e,t){1&e&&I.Wb(0,"img",30)}function Qe(e,t){if(1&e){var c=I.cc();I.bc(0,"tbody"),I.bc(1,"tr",26),I.jc("click",(function(e){I.Mc(c);var n=t.$implicit;return I.nc(2).selectIn(n._id)})),I.bc(2,"td"),I.Tc(3,Xe,1,1,"img",27),I.Tc(4,$e,1,0,"img",28),I.Vc(5),I.ac(),I.ac(),I.ac()}if(2&e){var n=t.$implicit,a=I.nc(2);I.Gb(1),I.Ib(a.selectedIn==n._id?"active":""),I.Gb(2),I.uc("ngIf","null"!=n.image),I.Gb(1),I.uc("ngIf","null"==n.image),I.Gb(1),I.Yc(" ",n.surname," ",n.name," ")}}function Ke(e,t){if(1&e){var c=I.cc();I.bc(0,"div",1),I.bc(1,"div",2),I.bc(2,"mat-card",3),I.Tc(3,Be,3,1,"div",4),I.Tc(4,De,3,2,"div",4),I.bc(5,"input",5),I.jc("change",(function(e){return I.Mc(c),I.nc().fileChangeEvent(e)})),I.ac(),I.bc(6,"div",6),I.bc(7,"div",7),I.Vc(8),I.ac(),I.bc(9,"div",8),I.bc(10,"span"),I.Vc(11),I.ac(),I.ac(),I.bc(12,"div",8),I.bc(13,"span"),I.Vc(14),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.bc(15,"div",9),I.bc(16,"mat-card",10),I.bc(17,"mat-card-content",11),I.bc(18,"div",12),I.bc(19,"div",13),I.bc(20,"div",14),I.bc(21,"table",15),I.bc(22,"thead"),I.bc(23,"tr"),I.bc(24,"th"),I.Vc(25,"Agentes fuera del equipo"),I.ac(),I.ac(),I.ac(),I.Tc(26,We,6,6,"tbody",16),I.ac(),I.ac(),I.ac(),I.bc(27,"div",17),I.bc(28,"div",18),I.Tc(29,qe,2,0,"a",19),I.Tc(30,ze,2,0,"a",19),I.ac(),I.ac(),I.bc(31,"div",13),I.bc(32,"table",20),I.bc(33,"thead"),I.bc(34,"tr"),I.bc(35,"th"),I.Vc(36,"Agentes dentro del equipo"),I.ac(),I.ac(),I.ac(),I.Tc(37,Qe,6,6,"tbody",16),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(3),I.uc("ngIf","null"==n.team.image),I.Gb(1),I.uc("ngIf","null"!=n.team.image),I.Gb(4),I.Wc(n.team.name),I.Gb(3),I.Wc(n.team.company.name),I.Gb(3),I.Xc("Alta: ",n.team.createDate,""),I.Gb(12),I.uc("ngForOf",n.usersOutTeam),I.Gb(3),I.uc("ngIf","ROLE_ADMIN"==n.identity.role),I.Gb(1),I.uc("ngIf","ROLE_ADMIN"==n.identity.role),I.Gb(7),I.uc("ngForOf",n.usersInTeam)}}function Je(e,t){if(1&e){var c=I.cc();I.bc(0,"div",1),I.bc(1,"div",9),I.bc(2,"mat-card",10),I.bc(3,"mat-card-content",11),I.bc(4,"form"),I.bc(5,"mat-form-field",32),I.bc(6,"input",33),I.jc("ngModelChange",(function(e){return I.Mc(c),I.nc().team.name=e})),I.ac(),I.ac(),I.ac(),I.bc(7,"button",34),I.jc("click",(function(e){return I.Mc(c),I.nc().onSubmit()})),I.Vc(8,"Guardar"),I.ac(),I.ac(),I.ac(),I.ac(),I.ac()}if(2&e){var n=I.nc();I.Gb(6),I.uc("ngModel",n.team.name)}}var Ze,et,tt,ct,nt=[{path:"",children:[{path:"list/requester",component:S,data:{title:"Lista de solicitantes",breadcrumb:"LISTA DE SOLICITANTES"}},{path:"list/agent",component:ie,data:{title:"Lista de agentes",breadcrumb:"LISTA DE AGENTES"}},{path:"list/team",component:(ct=function(){function e(t,c,n,a,i){_classCallCheck(this,e),this._userService=t,this._teamService=c,this._route=n,this._router=a,this.snackBar=i,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=t.getToken(),this.identity=t.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getTeams(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}},{key:"getTeams",value:function(){var e=this;this._teamService.getList(this.token,this.identity.company._id).subscribe((function(t){t.teams&&(e.rows=t.teams,e.temp=t.teams)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setQuery",value:function(){this.query={}}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:1}]}},{key:"changeDate",value:function(e){return C(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),c=Object.keys(this.temp[0]);if(c.splice(c.length-1),c.length){var n=this.temp.filter((function(e){for(var n=0;n<=c.length;n++){var a=c[n];if(e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}}},{key:"toNew",value:function(){this._router.navigate(["/user/team/new"])}},{key:"toProfile",value:function(e){"click"==e.type&&this._router.navigate(["/user/team/profile/",e.row._id])}}]),e}(),ct.\u0275fac=function(e){return new(e||ct)(I.Vb(x.a),I.Vb(re.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},ct.\u0275cmp=I.Pb({type:ct,selectors:[["app-team-list"]],features:[I.Fb([x.a,re.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(I.bc(0,"mat-form-field",0),I.bc(1,"input",1),I.jc("keyup",(function(e){return t.updateFilter(e)})),I.ac(),I.ac(),I.Tc(2,se,3,0,"div",2),I.bc(3,"div",3),I.bc(4,"ngx-datatable",4),I.jc("activate",(function(e){return t.toProfile(e)})),I.ac(),I.ac()),2&e&&(I.Gb(2),I.uc("ngIf",t.canCreate),I.Gb(2),I.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[g.a,s.b,n.m,o.d,l.b],styles:[""]}),ct),data:{title:"Lista de equipos",breadcrumb:"LISTA DE EQUIPOS"}},{path:"team/profile/:id",component:(tt=function(){function e(t,c,n,a,i,r){_classCallCheck(this,e),this._userService=t,this._teamService=c,this._uploadService=n,this._route=a,this._router=i,this.snackBar=r,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url=A.a.url,this.team=new oe("","",[""],"null","",""),this.isDefault=!1,this.selectedOut="",this.selectedIn="",this.usersInTeam=[],this.usersOutTeam=[],this.isAdmin=!1,this.isNew=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTeam(),this.getAgents()}},{key:"getTeam",value:function(){var e=this;this._route.params.forEach((function(t){e._teamService.getOne(e.token,t.id).subscribe((function(t){t.team&&(e.team=t.team,e.team.company._id==e.identity.company._id&&"ROLE_ADMIN"==e.identity.role&&(e.isAdmin=!0))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"getAgents",value:function(){var e=this;this._route.params.forEach((function(t){e._teamService.getAgentsList(e.token,t.id,e.identity.company._id).subscribe((function(t){!t.usersOut&&t.usersIn?e._router.navigate(["/"]):(e.usersInTeam=t.usersIn,e.usersOutTeam=t.usersOut)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"onSubmit",value:function(){var e=this;this._route.params.forEach((function(t){e._teamService.edit(e.token,t.id,e.team).subscribe((function(t){e.getTeam(),e.openSnackBar("Datos actualizados","Cerrar")}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"selectOut",value:function(e){this.selectedOut=e}},{key:"selectIn",value:function(e){this.selectedIn=e}},{key:"include",value:function(){var e=this;this.selectedOut&&this._route.params.forEach((function(t){e._teamService.addUser(e.token,t.id,e.selectedOut).subscribe((function(t){t.team&&(e.selectedOut="",e.getAgents())}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"exclude",value:function(){var e=this;this.selectedIn&&this._route.params.forEach((function(t){e._teamService.removeUser(e.token,t.id,e.selectedIn).subscribe((function(t){t.team&&(e.selectedIn="",e.getAgents())}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"openAttachment",value:function(){document.getElementById("attachment").click()}},{key:"fileChangeEvent",value:function(e){var t=this;this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"team/image/"+this.team._id,[],this.filesToUpload,this.token,"image"),setTimeout((function(){t.getTeam(),t.openSnackBar("Foto de equipo actualizada","Cerrar")}),1e3)}}]),e}(),tt.\u0275fac=function(e){return new(e||tt)(I.Vb(x.a),I.Vb(re.a),I.Vb(j.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},tt.\u0275cmp=I.Pb({type:tt,selectors:[["app-team-profile"]],features:[I.Fb([x.a,re.a,j.a])],decls:2,vars:2,consts:[["fxLayout","row wrap",4,"ngIf"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","100"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],[1,"mt-1"],[1,"form-row","agent-system"],[1,"col-xl-5","offset-xl-0"],["id","dataTable",1,"table-responsive","table"],["id","dataTable",1,"table","dataTable"],[4,"ngFor","ngForOf"],[1,"col-xl-2"],["role","group",1,"btn-group-vertical","d-block"],["class","btn btn-primary dark","role","button",3,"click",4,"ngIf"],["id","dataTable",1,"table","dataTable","my-0"],[1,"propic","text-center"],["src","assets/images/system/team-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],[3,"click"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],["role","button",1,"btn","btn-primary","dark",3,"click"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(I.Tc(0,we,38,9,"div",0),I.Tc(1,Me,9,1,"div",0)),2&e&&(I.uc("ngIf",!t.isNew),I.Gb(1),I.uc("ngIf",t.isNew))},directives:[n.m,U.d,U.b,m.a,m.c,n.l,l.b,u.a,y.x,y.o,y.p,g.a,s.b,y.c,y.n,y.q],styles:[".img-profile[_ngcontent-%COMP%]{width:100%}.card-profile[_ngcontent-%COMP%]{margin-top:20px}.text-chat[_ngcontent-%COMP%]{overflow-x:auto}.acept[_ngcontent-%COMP%]{margin-right:15px}.active[_ngcontent-%COMP%]{background-color:#2d9df1;color:#fff}.newimg[_ngcontent-%COMP%]{display:none}.required[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),tt),data:{title:"Perfil de equipo",breadcrumb:"PERFIL DE EQUIPO"}},{path:"profile/:id",component:ce,data:{title:"Perfil de usuario",breadcrumb:"PERFIL DE USUARIO"}},{path:"new/:type",component:(et=function(){function e(t,c,n,a,i,r){_classCallCheck(this,e),this._userService=t,this._sectorService=c,this._uploadService=n,this._route=a,this._router=i,this.snackBar=r,this.token=t.getToken(),this.identity=t.getIdentity(),this.url=A.a.url,this.user=new T.a("",null,"","",null,"","","",null,null,!1,"",["HELPDESK"],"","",null,!0,"",!0,!0),this.isNew=!0,this.isUser=!0,this.isAdmin=!0,this.newResponse=new N("","","","")}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUser(),this.getSectors()}},{key:"getUser",value:function(){var e=this;this._route.params.forEach((function(t){"requester"==t.type?e.user.role="ROLE_REQUESTER":(e.user.role="ROLE_AGENT",e.user.company=e.identity.company._id)}))}},{key:"editUser",value:function(){var e=this;""!=this.user.name&&""!=this.user.surname&&""!=this.user.userName&&""!=this.user.email&&""!=this.user.password?(""==this.user.sign&&(this.user.sign=null),this._userService.add(this.token,this.user).subscribe((function(t){t.user&&(e.openSnackBar("Usuario creado","Cerrar"),e._router.navigate(["/user/profile/",t.user._id]))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))):this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"getSectors",value:function(){var e=this;this._sectorService.getList(this.token).subscribe((function(t){t.sectors&&(e.sectors=t.sectors)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setSector",value:function(e){this.user.sector=e}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"changeAdm",value:function(e){this.user.role=1==e?"ROLE_ADMIN":"ROLE_AGENT"}},{key:"setPermit",value:function(e,t){t?this.user.permits.push(e):this.user.permits.splice(this.user.permits.indexOf(e),1)}}]),e}(),et.\u0275fac=function(e){return new(e||et)(I.Vb(x.a),I.Vb(V.a),I.Vb(j.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},et.\u0275cmp=I.Pb({type:et,selectors:[["app-user-profile"]],features:[I.Fb([x.a,V.a,j.a])],decls:58,vars:35,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","calc(100% - 300px)",3,"fxFlex.gt-sm"],[1,"p-0"],["label","Datos personales"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","surname","type","text","placeholder","Apellido",3,"readonly","ngModel","ngModelChange"],["matInput","","name","dni","type","number","placeholder","DNI",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","legajo","placeholder","Legajo",3,"readonly","ngModel","ngModelChange"],["matInput","","type","text","name","email","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["matInput","","type","number","name","phone","placeholder","Tel\xe9fono",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Datos de sistema"],["matInput","","name","userName","type","text","placeholder","Nombre de usuario",3,"readonly","ngModel","ngModelChange"],[3,"checked","color","disabled","change",4,"ngIf"],["name","receiveMail",3,"ngModel","color","disabled","ngModelChange"],["name","sectorRef",3,"ngModel","color","disabled","ngModelChange"],["name","infoView",3,"ngModel","color","disabled","ngModelChange"],[2,"margin-top","10px"],[3,"checked","color","change"],["label","Contrase\xf1a"],["matInput","","type","password","name","contrase\xf1a_anterior","placeholder","Contrase\xf1a actual",3,"readonly","ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["label","Respuestas autom\xe1ticas",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],[4,"ngIf"],["appearance","fill","class","full-width",4,"ngIf"],[1,"default"],[1,"pt-0"],[1,"mr-1"],[1,"propic","text-center"],["src","assets/images/system/user-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["appearance","fill",1,"full-width"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"checked","color","disabled","change"],["matInput","","type","password","name","contrase\xf1a_nueva","placeholder","Nueva contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","type","password","name","contrase\xf1a_confirmar","placeholder","Confirmar contrase\xf1a nueva",3,"readonly","ngModel","ngModelChange"],["label","Respuestas autom\xe1ticas"],["matInput","","type","text","name","hashtag","placeholder","Nombre",3,"ngModel","ngModelChange"],["matInput","","type","text","name","resp","placeholder","Respuesta",3,"ngModel","ngModelChange"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(I.bc(0,"div",0),I.Tc(1,Re,26,10,"div",1),I.bc(2,"div",2),I.bc(3,"mat-card",3),I.bc(4,"mat-tab-group"),I.bc(5,"mat-tab",4),I.bc(6,"mat-card-content",5),I.bc(7,"form"),I.bc(8,"mat-form-field",6),I.bc(9,"input",7),I.jc("ngModelChange",(function(e){return t.user.name=e})),I.ac(),I.ac(),I.bc(10,"mat-form-field",6),I.bc(11,"input",8),I.jc("ngModelChange",(function(e){return t.user.surname=e})),I.ac(),I.ac(),I.bc(12,"mat-form-field",6),I.bc(13,"input",9),I.jc("ngModelChange",(function(e){return t.user.dni=e})),I.ac(),I.ac(),I.bc(14,"mat-form-field",6),I.bc(15,"input",10),I.jc("ngModelChange",(function(e){return t.user.num=e})),I.ac(),I.ac(),I.bc(16,"mat-form-field",6),I.bc(17,"input",11),I.jc("ngModelChange",(function(e){return t.user.email=e})),I.ac(),I.ac(),I.bc(18,"mat-form-field",6),I.bc(19,"input",12),I.jc("ngModelChange",(function(e){return t.user.phone=e})),I.ac(),I.ac(),I.ac(),I.bc(20,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(21,"Guardar"),I.ac(),I.ac(),I.ac(),I.bc(22,"mat-tab",14),I.bc(23,"mat-card-content",5),I.bc(24,"form"),I.bc(25,"mat-form-field",6),I.bc(26,"input",15),I.jc("ngModelChange",(function(e){return t.user.userName=e})),I.ac(),I.ac(),I.Tc(27,Ne,2,3,"mat-checkbox",16),I.Wb(28,"br"),I.bc(29,"mat-checkbox",17),I.jc("ngModelChange",(function(e){return t.user.receiveMail=e})),I.Vc(30,"Recibir notificaciones al correo electr\xf3nico "),I.ac(),I.Wb(31,"br"),I.bc(32,"mat-checkbox",18),I.jc("ngModelChange",(function(e){return t.user.sectorRef=e})),I.Vc(33,"Referente "),I.ac(),I.Wb(34,"br"),I.bc(35,"mat-checkbox",19),I.jc("ngModelChange",(function(e){return t.user.infoView=e})),I.Vc(36,"Visualizar mensajes de informaci\xf3n de tickets "),I.ac(),I.Wb(37,"mat-divider"),I.bc(38,"span"),I.bc(39,"h3",20),I.Vc(40,"Permisos:"),I.ac(),I.bc(41,"mat-checkbox",21),I.jc("change",(function(e){return t.setPermit("HELPDESK",e.checked)})),I.Vc(42,"Gestor de tickets "),I.ac(),I.Wb(43,"br"),I.bc(44,"mat-checkbox",21),I.jc("change",(function(e){return t.setPermit("TRACKING",e.checked)})),I.Vc(45,"Gestor de tracking "),I.ac(),I.ac(),I.ac(),I.bc(46,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(47,"Guardar"),I.ac(),I.ac(),I.ac(),I.bc(48,"mat-tab",22),I.bc(49,"mat-card-content",5),I.bc(50,"form"),I.bc(51,"mat-form-field",6),I.bc(52,"input",23),I.jc("ngModelChange",(function(e){return t.user.password=e})),I.ac(),I.ac(),I.Tc(53,Ee,2,2,"mat-form-field",24),I.Tc(54,Ue,2,2,"mat-form-field",24),I.ac(),I.bc(55,"button",13),I.jc("click",(function(e){return t.editUser()})),I.Vc(56,"Guardar"),I.ac(),I.ac(),I.ac(),I.Tc(57,Fe,10,9,"mat-tab",25),I.ac(),I.ac(),I.ac(),I.ac()),2&e&&(I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(1),I.vc("fxFlex.gt-sm",1==t.isNew?100:50),I.Gb(7),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.name),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.surname),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.dni),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.num),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.email),I.Gb(2),I.uc("readonly",!t.isAdmin&&!t.isUser)("ngModel",t.user.phone),I.Gb(7),I.uc("readonly","ROLE_ADMIN"!=t.identity.role)("ngModel",t.user.userName),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(2),I.uc("ngModel",t.user.receiveMail)("color","primary")("disabled",!t.isAdmin&&!t.isUser),I.Gb(3),I.uc("ngModel",t.user.sectorRef)("color","primary")("disabled",!t.isAdmin),I.Gb(3),I.uc("ngModel",t.user.infoView)("color","primary")("disabled",!t.isAdmin&&!t.isUser),I.Gb(6),I.uc("checked",t.user.permits.includes("HELPDESK"))("color","primary"),I.Gb(3),I.uc("checked",t.user.permits.includes("TRACKING"))("color","primary"),I.Gb(8),I.uc("readonly",!t.isUser)("ngModel",t.user.password),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(1),I.uc("ngIf",!t.isNew),I.Gb(3),I.uc("ngIf",t.isUser&&"ROLE_REQUESTER"!=t.identity.role))},directives:[U.d,n.m,U.b,m.a,f.b,f.a,m.c,y.x,y.o,y.p,g.a,s.b,y.c,y.n,y.q,y.s,l.b,i.a,d.a,m.g,p.a,p.c,u.a,g.d,v.a,n.l,F.p,o.d],encapsulation:2}),et),data:{title:"Nuevo usuario",breadcrumb:"NUEVO USUARIO"}},{path:"team/new",component:(Ze=function(){function e(t,c,n,a,i){_classCallCheck(this,e),this._userService=t,this._teamService=c,this._route=n,this._router=a,this.snackBar=i,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url=A.a.url,this.team=new oe("","",[""],"null","",this.identity.company._id),this.isAdmin=!0,this.isNew=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var e=this;this._teamService.add(this.token,this.team).subscribe((function(t){t.team&&(e.openSnackBar("Equipo creado","Cerrar"),e._router.navigate(["/user/team/",t.team._id]))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}}]),e}(),Ze.\u0275fac=function(e){return new(e||Ze)(I.Vb(x.a),I.Vb(re.a),I.Vb(a.a),I.Vb(a.g),I.Vb(_.a))},Ze.\u0275cmp=I.Pb({type:Ze,selectors:[["app-new-team-profile"]],features:[I.Fb([x.a,re.a])],decls:2,vars:2,consts:[["fxLayout","row wrap",4,"ngIf"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","100"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],[1,"subtitle","mb-05"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],[1,"mt-1"],[1,"form-row","agent-system"],[1,"col-xl-5","offset-xl-0"],["id","dataTable",1,"table-responsive","table"],["id","dataTable",1,"table","dataTable"],[4,"ngFor","ngForOf"],[1,"col-xl-2"],["role","group",1,"btn-group-vertical","d-block"],["class","btn btn-primary dark","role","button",3,"click",4,"ngIf"],["id","dataTable",1,"table","dataTable","my-0"],[1,"propic","text-center"],["src","assets/images/system/team-placeholder.png"],["mat-mini-fab","","color","accent","style","position: relative; left: -50px;top: 50px;",3,"click",4,"ngIf"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],[3,"click"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],["role","button",1,"btn","btn-primary","dark",3,"click"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(I.Tc(0,Ke,38,9,"div",0),I.Tc(1,Je,9,1,"div",0)),2&e&&(I.uc("ngIf",!t.isNew),I.Gb(1),I.uc("ngIf",t.isNew))},directives:[n.m,U.d,U.b,m.a,m.c,n.l,l.b,u.a,y.x,y.o,y.p,g.a,s.b,y.c,y.n,y.q],styles:[".img-profile[_ngcontent-%COMP%]{width:100%}.card-profile[_ngcontent-%COMP%]{margin-top:20px}.text-chat[_ngcontent-%COMP%]{overflow-x:auto}.acept[_ngcontent-%COMP%]{margin-right:15px}.active[_ngcontent-%COMP%]{background-color:#2d9df1;color:#fff}.newimg[_ngcontent-%COMP%]{display:none}.required[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),Ze),data:{title:"Nuevo equipo",breadcrumb:"NUEVO EQUIPO"}}]}];c.d(t,"AppUserModule",(function(){return it}));var at,it=((at=function e(){_classCallCheck(this,e)}).\u0275mod=I.Tb({type:at}),at.\u0275inj=I.Sb({factory:function(e){return new(e||at)},imports:[[n.c,y.t,g.c,y.j,d.b,v.b,M.a,p.d,w.b,u.b,l.c,m.e,k.a,i.b,r.c,f.c,s.c,b.a,o.e,h.a,a.k.forChild(nt)]]}),at)}}]);