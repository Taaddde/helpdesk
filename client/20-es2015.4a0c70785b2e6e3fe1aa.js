(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{VVaf:function(e,r,t){"use strict";t.r(r);var a=t("bFKe"),s=t("ofXK"),n=t("3Pt+"),c=t("tyNb"),o=t("zMWy"),i=t("YUcS"),u=t("bTqV"),l=t("bv9b"),d=t("YFeJ"),m=t("gU78"),b=t("fXoL"),p=t("dNgK"),g=t("Wp6s"),f=t("kmnG"),h=t("qFsG");let v=(()=>{class e{constructor(e,r){this._userService=e,this.snackBar=r,this.url=d.a.url,this.forgotUserName=""}ngOnInit(){}submitEmail(){this.submitButton.disabled=!0,this.progressBar.mode="indeterminate",this._userService.forgotPassword(this.forgotUserName).subscribe(e=>{e.mail?(this.openSnackBar("Se envi\xf3 el correo de restablecimiento","Cerrar"),this.forgotUserName="",this.submitButton.disabled=!1,this.progressBar.mode="determinate"):(this.openSnackBar("Nombre de usuario o email inv\xe1lido","Cerrar"),this.submitButton.disabled=!1,this.progressBar.mode="determinate")},e=>{this.openSnackBar(e.message,"Cerrar"),this.submitButton.disabled=!1,this.progressBar.mode="determinate"})}onSubmit(){}openSnackBar(e,r){this.snackBar.open(e,r,{duration:1e4})}}return e.\u0275fac=function(r){return new(r||e)(b.Vb(m.a),b.Vb(p.a))},e.\u0275cmp=b.Pb({type:e,selectors:[["app-forgot-password"]],viewQuery:function(e,r){var t;1&e&&(b.bd(l.a,!0),b.bd(u.b,!0)),2&e&&(b.Ic(t=b.kc())&&(r.progressBar=t.first),b.Ic(t=b.kc())&&(r.submitButton=t.first))},features:[b.Fb([m.a])],decls:20,vars:3,consts:[[1,"page-wrap","height-100","black"],[1,"session-form-hold"],["mode","determinate",1,"session-progress"],[1,"text-center","pt-8","pb-16"],["width","60px","src","assets/images/system/header.png","alt","",1,"mb-05"],[1,"text-muted","m-0"],[3,"ngSubmit"],["fpForm","ngForm"],[1,""],[1,"full-width"],["matInput","","name","forgotUserName","placeholder","Nombre de usuario/email","value","",3,"ngModel","ngModelChange"],["email","ngModel"],["mat-raised-button","",1,"mat-primary","full-width","mb-1",3,"disabled"],[1,"text-center"],[1,"mat-primary","text-center","full-width",3,"routerLink"]],template:function(e,r){1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.Wb(2,"mat-progress-bar",2),b.bc(3,"mat-card"),b.bc(4,"mat-card-content"),b.bc(5,"div",3),b.Wb(6,"img",4),b.bc(7,"p",5),b.Vc(8,"Se te enviar\xe1 la nueva contrase\xf1a a tu email"),b.ac(),b.ac(),b.bc(9,"form",6,7),b.jc("ngSubmit",(function(e){return r.submitEmail()})),b.bc(11,"div",8),b.bc(12,"mat-form-field",9),b.bc(13,"input",10,11),b.jc("ngModelChange",(function(e){return r.forgotUserName=e})),b.ac(),b.ac(),b.ac(),b.bc(15,"button",12),b.Vc(16,"Enviar"),b.ac(),b.bc(17,"div",13),b.bc(18,"a",14),b.Vc(19,"Ingresar"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()),2&e&&(b.Gb(13),b.uc("ngModel",r.forgotUserName),b.Gb(2),b.uc("disabled",""==r.forgotUserName),b.Gb(3),b.uc("routerLink","/sessions/signin"))},directives:[l.a,g.a,g.c,n.x,n.o,n.p,f.a,h.b,n.c,n.n,n.q,u.b,c.j],styles:[""]}),e})();var w=t("XiUz");function k(e,r){1&e&&(b.bc(0,"small",17),b.Vc(1," Password is required "),b.ac())}let B=(()=>{class e{constructor(){this.lockscreenData={password:""}}ngOnInit(){}unlock(){console.log(this.lockscreenData),this.submitButton.disabled=!0,this.progressBar.mode="indeterminate"}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=b.Pb({type:e,selectors:[["app-lockscreen"]],viewQuery:function(e,r){var t;1&e&&(b.bd(l.a,!0),b.bd(u.b,!0)),2&e&&(b.Ic(t=b.kc())&&(r.progressBar=t.first),b.Ic(t=b.kc())&&(r.submitButton=t.first))},decls:23,vars:4,consts:[[1,"page-wrap","height-100","black"],[1,"session-form-hold","session-lockscreen"],["mode","determinate",1,"session-progress"],["fxFlex","column","fxFlexWrap","wrap"],["fxFlexWrap","wrap",1,"lockscreen-user"],["src","assets/images/face-3.jpg","alt","",1,"lockscreen-face"],[1,"m-0","font-normal"],[1,"text-muted"],[3,"ngSubmit"],["lockscreenForm","ngForm"],[1,""],[1,"full-width"],["type","password","name","password","required","","matInput","","placeholder","Password",3,"ngModel","ngModelChange"],["password","ngModel"],["class","form-error-msg",4,"ngIf"],["mat-raised-button","",1,"mat-primary","full-width","mb-05",3,"disabled"],["mat-raised-button","","color","accent",1,"mat-primary","full-width",3,"routerLink"],[1,"form-error-msg"]],template:function(e,r){if(1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.Wb(2,"mat-progress-bar",2),b.bc(3,"mat-card"),b.bc(4,"mat-card-content"),b.bc(5,"div",3),b.bc(6,"div",4),b.Wb(7,"img",5),b.bc(8,"h5",6),b.Vc(9,"John Doe"),b.ac(),b.bc(10,"small",7),b.Vc(11,"Last seen 1 hour ago"),b.ac(),b.ac(),b.bc(12,"form",8,9),b.jc("ngSubmit",(function(e){return r.unlock()})),b.bc(14,"div",10),b.bc(15,"mat-form-field",11),b.bc(16,"input",12,13),b.jc("ngModelChange",(function(e){return r.lockscreenData.password=e})),b.ac(),b.ac(),b.Tc(18,k,2,0,"small",14),b.ac(),b.bc(19,"button",15),b.Vc(20,"Unlock"),b.ac(),b.bc(21,"button",16),b.Vc(22,"It's not me!"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()),2&e){const e=b.Jc(13),t=b.Jc(17);b.Gb(16),b.uc("ngModel",r.lockscreenData.password),b.Gb(2),b.uc("ngIf",t.errors&&(t.dirty||t.touched)&&(null==t?null:null==t.errors?null:t.errors.required)),b.Gb(1),b.uc("disabled",e.invalid),b.Gb(2),b.uc("routerLink","/sessions/signin")}},directives:[l.a,g.a,g.c,w.b,n.x,n.o,n.p,f.a,h.b,n.c,n.u,n.n,n.q,s.m,u.b,c.h],styles:[""]}),e})();var S=t("XNiG"),y=t("1G5W"),I=t("+8wx"),V=t("bSwM");function x(e,r){if(1&e&&(b.bc(0,"p",16),b.bc(1,"small",18),b.Vc(2),b.ac(),b.ac()),2&e){const e=b.nc();b.Gb(2),b.Wc(e.errorMsg)}}function G(e,r){1&e&&(b.bc(0,"small",19),b.Vc(1," Usuario requerido "),b.ac())}function C(e,r){1&e&&(b.bc(0,"small",19),b.Vc(1," Contrase\xf1a requerida "),b.ac())}let M=(()=>{class e{constructor(e,r,t,a){this.router=e,this.route=r,this._userService=t,this.snackBar=a,this.errorMsg="",this._unsubscribeAll=new S.a}ngOnInit(){this.signinForm=new n.h({userName:new n.e("",n.v.required),password:new n.e("",n.v.required),rememberMe:new n.e(!0)}),this.route.queryParams.pipe(Object(y.a)(this._unsubscribeAll)).subscribe(e=>this.return=e.return||"/")}ngAfterViewInit(){this.autoSignIn()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}openSnackBar(e,r){this.snackBar.open(e,r,{duration:2e3})}signin(){let e=new I.a("",null,"","",null,"","","",null,null,!1,"",[],"","",null,!0,"",!0,!0);e.userName=this.signinForm.value.userName,e.password=this.signinForm.value.password,this.submitButton.disabled=!0,this.progressBar.mode="indeterminate",this._userService.login(e).subscribe(r=>{let t=r.user;r.user.permits.includes("HELPDESK")?t._id?(localStorage.setItem("identity",JSON.stringify(t)),this._userService.login(e,"true").subscribe(r=>{let t=r.token;t.lenght<=0?(this.submitButton.disabled=!1,this.progressBar.mode="determinate",this.openSnackBar("El token no se ha generado correctamente","Cerrar")):(localStorage.setItem("token",t),e=new I.a("",null,"","",null,"","","",null,"",!1,"",[],"","","",!1,"",!1,!0),this.router.navigateByUrl("/home"))},e=>{this.submitButton.disabled=!1,this.progressBar.mode="determinate",this.openSnackBar("Credenciales incorrecta, revise si su usuario y/o contrase\xf1a es correcto","Cerrar")})):(this.openSnackBar("El usuario no esta correctamente identificado","Cerrar"),this.submitButton.disabled=!1,this.progressBar.mode="determinate"):(this.openSnackBar("El usuario no tiene permitido acceder a esta aplicaci\xf3n.","Cerrar"),this.submitButton.disabled=!1,this.progressBar.mode="determinate")},e=>{this.submitButton.disabled=!1,this.progressBar.mode="determinate",this.openSnackBar("Credenciales incorrecta, revise si su usuario y/o contrase\xf1a es correcto","Cerrar")})}autoSignIn(){this._userService.getIdentity()&&this._userService.getToken()&&this.router.navigateByUrl("/tracking/analytics")}}return e.\u0275fac=function(r){return new(r||e)(b.Vb(c.g),b.Vb(c.a),b.Vb(m.a),b.Vb(p.a))},e.\u0275cmp=b.Pb({type:e,selectors:[["app-signin"]],viewQuery:function(e,r){var t;1&e&&(b.bd(l.a,!0),b.bd(u.b,!0)),2&e&&(b.Ic(t=b.kc())&&(r.progressBar=t.first),b.Ic(t=b.kc())&&(r.submitButton=t.first))},features:[b.Fb([m.a])],decls:27,vars:9,consts:[[1,"page-wrap","height-100","black"],[1,"session-form-hold"],["mode","determinate",1,"session-progress"],[1,"text-center","pt-8","pb-16"],["width","60px","src","assets/images/system/header.png","alt",""],[1,"text-muted","m-0"],["class","text-center",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,""],[1,"full-width"],["matInput","","name","username","placeholder","Usuario","value","",3,"formControl"],["class","form-error-msg",4,"ngIf"],["type","password","name","password","matInput","","placeholder","Contrase\xf1a","value","",3,"formControl"],[1,"pb-1"],["name","rememberMe",1,"pb-1",3,"formControl"],["mat-raised-button","",1,"mat-primary","full-width","mb-1",3,"disabled"],[1,"text-center"],[1,"mat-primary","text-center","full-width",3,"routerLink"],[1,"text-red"],[1,"form-error-msg"]],template:function(e,r){1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.Wb(2,"mat-progress-bar",2),b.bc(3,"mat-card"),b.bc(4,"mat-card-content"),b.bc(5,"div",3),b.Wb(6,"img",4),b.bc(7,"p",5),b.Vc(8,"Ingresa con tu cuenta"),b.ac(),b.ac(),b.Tc(9,x,3,1,"p",6),b.bc(10,"form",7),b.jc("ngSubmit",(function(e){return r.signin()})),b.bc(11,"div",8),b.bc(12,"mat-form-field",9),b.Wb(13,"input",10),b.ac(),b.Tc(14,G,2,0,"small",11),b.ac(),b.bc(15,"div",8),b.bc(16,"mat-form-field",9),b.Wb(17,"input",12),b.ac(),b.Tc(18,C,2,0,"small",11),b.ac(),b.bc(19,"div",13),b.bc(20,"mat-checkbox",14),b.Vc(21,"Recordar en esta computadora"),b.ac(),b.ac(),b.bc(22,"button",15),b.Vc(23,"Ingresar"),b.ac(),b.bc(24,"div",16),b.bc(25,"a",17),b.Vc(26,"Recuperar contrase\xf1a"),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()),2&e&&(b.Gb(9),b.uc("ngIf",r.errorMsg),b.Gb(1),b.uc("formGroup",r.signinForm),b.Gb(3),b.uc("formControl",r.signinForm.controls.userName),b.Gb(1),b.uc("ngIf",r.signinForm.controls.userName.hasError("required")&&r.signinForm.controls.userName.touched),b.Gb(3),b.uc("formControl",r.signinForm.controls.password),b.Gb(1),b.uc("ngIf",r.signinForm.controls.password.hasError("required")&&r.signinForm.controls.password.touched),b.Gb(2),b.uc("formControl",r.signinForm.controls.rememberMe),b.Gb(2),b.uc("disabled",r.signinForm.invalid),b.Gb(3),b.uc("routerLink","/sessions/forgot-password"))},directives:[l.a,g.a,g.c,s.m,n.x,n.o,n.i,f.a,h.b,n.c,n.n,n.f,V.a,u.b,c.j],styles:["mat-form-field.dialog[_ngcontent-%COMP%]{margin-right:12px}"]}),e})();var F=t("NFeN");const U=function(){return["/home"]},N=function(){return["/ticket/new"]};let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=b.Pb({type:e,selectors:[["app-not-found"]],decls:15,vars:4,consts:[[1,"page-wrap","height-100","default-bg"],[1,"app-error"],[1,"fix"],["color","warn",1,"error-icon"],[1,"error-text"],[1,"error-title"],[1,"error-subtitle"],[1,"error-actions"],["mat-raised-button","","color","primary",1,"mb-1","mr-05",3,"routerLink"],["mat-raised-button","","color","warn",3,"routerLink"]],template:function(e,r){1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.bc(2,"div",2),b.bc(3,"mat-icon",3),b.Vc(4,"error"),b.ac(),b.bc(5,"div",4),b.bc(6,"h1",5),b.Vc(7,"404"),b.ac(),b.bc(8,"div",6),b.Vc(9,"Pagina no encontrada"),b.ac(),b.ac(),b.ac(),b.bc(10,"div",7),b.bc(11,"button",8),b.Vc(12,"Volver a principal"),b.ac(),b.bc(13,"button",9),b.Vc(14,"Reportar este problema"),b.ac(),b.ac(),b.ac(),b.ac()),2&e&&(b.Gb(11),b.uc("routerLink",b.zc(2,U)),b.Gb(2),b.uc("routerLink",b.zc(3,N)))},directives:[F.a,u.b,c.h],styles:[""]}),e})();const L=function(){return["/"]};let _=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=b.Pb({type:e,selectors:[["app-error"]],decls:15,vars:2,consts:[[1,"page-wrap","height-100","default-bg"],[1,"app-error"],[1,"fix"],["color","warn",1,"error-icon"],[1,"error-text"],[1,"error-title"],[1,"error-subtitle"],[1,"error-actions"],["mat-raised-button","","color","primary",1,"mb-1","mr-05",3,"routerLink"],["mat-raised-button","","color","warn"]],template:function(e,r){1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.bc(2,"div",2),b.bc(3,"mat-icon",3),b.Vc(4,"warning"),b.ac(),b.bc(5,"div",4),b.bc(6,"h1",5),b.Vc(7,"500"),b.ac(),b.bc(8,"div",6),b.Vc(9,"Server Error!"),b.ac(),b.ac(),b.ac(),b.bc(10,"div",7),b.bc(11,"button",8),b.Vc(12,"Back to Dashboard"),b.ac(),b.bc(13,"button",9),b.Vc(14,"Report this Problem"),b.ac(),b.ac(),b.ac(),b.ac()),2&e&&(b.Gb(11),b.uc("routerLink",b.zc(1,L)))},directives:[F.a,u.b,c.h],styles:[""]}),e})();function q(e,r){if(1&e&&(b.bc(0,"p",12),b.Vc(1),b.ac()),2&e){const e=b.nc();b.Gb(1),b.Wc(e.title)}}function W(e,r){1&e&&(b.bc(0,"p",12),b.Vc(1,"El link expir\xf3 o ya se cambi\xf3 la contrase\xf1a."),b.ac())}function T(e,r){if(1&e){const e=b.cc();b.bc(0,"mat-form-field",13),b.bc(1,"input",14,15),b.jc("ngModelChange",(function(r){return b.Mc(e),b.nc().user.password=r})),b.ac(),b.ac()}if(2&e){const e=b.nc();b.Gb(1),b.uc("ngModel",e.user.password)}}function j(e,r){if(1&e){const e=b.cc();b.bc(0,"mat-form-field",13),b.bc(1,"input",16),b.jc("ngModelChange",(function(r){return b.Mc(e),b.nc().confirmPass=r})),b.ac(),b.ac()}if(2&e){const e=b.nc();b.Gb(1),b.uc("ngModel",e.confirmPass)}}function E(e,r){if(1&e&&(b.bc(0,"button",17),b.Vc(1,"Enviar"),b.ac()),2&e){const e=b.nc();b.uc("disabled",""==e.user.password||""==e.confirmPass)}}function O(e,r){1&e&&(b.bc(0,"div",18),b.bc(1,"a",19),b.Vc(2,"Volver al inicio"),b.ac(),b.ac()),2&e&&(b.Gb(1),b.uc("routerLink","/sessions/signin"))}const D=[{path:"",children:[{path:"signin",component:M,data:{title:"Login"}},{path:"forgot-password",component:v,data:{title:"Olvide mi contrase\xf1a"}},{path:"reset-password/:id/:passToken",component:(()=>{class e{constructor(e,r,t){this._userService=e,this._route=r,this.snackBar=t,this.title="Recuperaci\xf3n de contrase\xf1a",this.validUrl=!1,this.confirmPass="",this.url=d.a.url,this.user=new I.a("",null,"","",null,"","","",null,"",!1,"",[],"","","",!1,"",!1,!0)}ngOnInit(){this.validateUrl(),(localStorage.getItem("identity")||localStorage.getItem("token"))&&(localStorage.clear(),location.reload())}validateUrl(){this._route.params.forEach(e=>{this._userService.validUser(e.id,e.passToken).subscribe(e=>{e.user?(this.user=e.user,this.title="\xa1Hola "+this.user.name+"! recuperemos tu contrase\xf1a",this.validUrl=!0):this.validUrl=!1},e=>{this.validUrl=!1})})}onSubmit(){this.user.password!=this.confirmPass?this.openSnackBar("La contrase\xf1a ingresada no coincide con la contrase\xf1a de confirmaci\xf3n","Cerrar"):this._userService.resetPass(this.user._id,this.user.passToken,this.confirmPass).subscribe(e=>{e.user?(this.openSnackBar("Contrase\xf1a modificada","Cerrar"),window.location.href="/home"):this.openSnackBar("Hubo un problema en el servidor, contacte con el administrador","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,r){this.snackBar.open(e,r,{duration:1e4})}}return e.\u0275fac=function(r){return new(r||e)(b.Vb(m.a),b.Vb(c.a),b.Vb(p.a))},e.\u0275cmp=b.Pb({type:e,selectors:[["app-reset-password"]],viewQuery:function(e,r){var t;1&e&&(b.bd(l.a,!0),b.bd(u.b,!0)),2&e&&(b.Ic(t=b.kc())&&(r.progressBar=t.first),b.Ic(t=b.kc())&&(r.submitButton=t.first))},features:[b.Fb([m.a])],decls:16,vars:6,consts:[[1,"page-wrap","height-100","black"],[1,"session-form-hold"],["mode","determinate",1,"session-progress"],[1,"text-center","pt-8","pb-16"],["width","60px","src","assets/images/system/header.png","alt","",1,"mb-05"],["class","text-muted m-0",4,"ngIf"],[3,"ngSubmit"],["fpForm","ngForm"],[1,""],["class","full-width",4,"ngIf"],["mat-raised-button","","class","mat-primary full-width mb-1",3,"disabled",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-muted","m-0"],[1,"full-width"],["matInput","","name","password","type","password","required","","placeholder","Nueva contrase\xf1a","value","",3,"ngModel","ngModelChange"],["password","ngModel"],["matInput","","name","confirmPass","type","password","required","","placeholder","Confirmar contrase\xf1a","value","",3,"ngModel","ngModelChange"],["mat-raised-button","",1,"mat-primary","full-width","mb-1",3,"disabled"],[1,"text-center"],[1,"mat-primary","text-center","full-width",3,"routerLink"]],template:function(e,r){1&e&&(b.bc(0,"div",0),b.bc(1,"div",1),b.Wb(2,"mat-progress-bar",2),b.bc(3,"mat-card"),b.bc(4,"mat-card-content"),b.bc(5,"div",3),b.Wb(6,"img",4),b.Tc(7,q,2,1,"p",5),b.Tc(8,W,2,0,"p",5),b.ac(),b.bc(9,"form",6,7),b.jc("ngSubmit",(function(e){return r.onSubmit()})),b.bc(11,"div",8),b.Tc(12,T,3,1,"mat-form-field",9),b.Tc(13,j,2,1,"mat-form-field",9),b.ac(),b.Tc(14,E,2,1,"button",10),b.Tc(15,O,3,1,"div",11),b.ac(),b.ac(),b.ac(),b.ac(),b.ac()),2&e&&(b.Gb(7),b.uc("ngIf",r.validUrl),b.Gb(1),b.uc("ngIf",!r.validUrl),b.Gb(4),b.uc("ngIf",r.validUrl),b.Gb(1),b.uc("ngIf",r.validUrl),b.Gb(1),b.uc("ngIf",r.validUrl),b.Gb(1),b.uc("ngIf",!r.validUrl))},directives:[l.a,g.a,g.c,s.m,n.x,n.o,n.p,f.a,h.b,n.c,n.u,n.n,n.q,u.b,c.j],encapsulation:2}),e})(),data:{title:"Recuperar contrase\xf1a"}},{path:"lockscreen",component:B,data:{title:"Lockscreen"}},{path:"404",component:P,data:{title:"Not Found"}},{path:"error",component:_,data:{title:"Error"}}]}];t.d(r,"SessionsModule",(function(){return J}));let J=(()=>{class e{}return e.\u0275mod=b.Tb({type:e}),e.\u0275inj=b.Sb({factory:function(r){return new(r||e)},imports:[[s.c,n.j,n.t,o.a,i.a,a.c,c.k.forChild(D)]]}),e})()}}]);