function _defineProperties(e,t){for(var a=0;a<t.length;a++){var c=t[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Ty4v:function(e,t,a){"use strict";a.r(t);var c,n=a("ofXK"),i=a("tyNb"),o=a("bSwM"),r=a("qFsG"),s=a("M9IT"),u=a("Dh3D"),l=a("+0xr"),p=a("lDzL"),d=a("NFeN"),b=a("bTqV"),h=a("Wp6s"),m=a("f0Cb"),f=a("wZkO"),g=a("7EHt"),y=a("MutI"),k=a("YUcS"),v=a("aYsj"),C=a("kmnG"),S=a("d3UM"),T=a("3Pt+"),M=a("1jcm"),_=a("Qu3c"),w=a("PCNd"),G=a("gU78"),V=a("O4PR"),x=a("0IaG"),I=a("1yaQ"),B=a("FKr1"),j=function e(t,a,c,n){_classCallCheck(this,e),this._id=t,this.name=a,this.initials=c,this.email=n},O=a("fXoL"),F=a("dNgK"),A=a("XiUz"),P=((c=function(){function e(t,a,c,n){_classCallCheck(this,e),this.data=t,this.dialogRef=a,this._userService=c,this.snackBar=n,this.sector=new j("","","","")}return _createClass(e,[{key:"ngOnInit",value:function(){this.buildSector(this.data.payload)}},{key:"buildSector",value:function(e){e&&(this.sector=e)}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"submit",value:function(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({sector:this.sector})}},{key:"check",value:function(){return""!=this.sector.name&&""!=this.sector.initials&&""!=this.sector.email}}]),e}()).\u0275fac=function(e){return new(e||c)(O.Vb(x.a),O.Vb(x.g),O.Vb(G.a),O.Vb(F.a))},c.\u0275cmp=O.Pb({type:c,selectors:[["app-sector-popop"]],features:[O.Fb([{provide:B.c,useClass:I.c,deps:[B.g]},{provide:B.f,useValue:I.a},G.a])],decls:17,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","text","placeholder","Iniciales","aria-label","Text","matInput","","name","initials",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","email",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"h1",0),O.Vc(1),O.ac(),O.bc(2,"mat-card",1),O.bc(3,"mat-card-content"),O.bc(4,"form"),O.bc(5,"div",2),O.bc(6,"div",3),O.bc(7,"mat-form-field",4),O.bc(8,"input",5),O.jc("ngModelChange",(function(e){return t.sector.name=e})),O.ac(),O.ac(),O.ac(),O.bc(9,"div",3),O.bc(10,"mat-form-field",4),O.bc(11,"input",6),O.jc("ngModelChange",(function(e){return t.sector.initials=e})),O.ac(),O.ac(),O.ac(),O.bc(12,"div",3),O.bc(13,"mat-form-field",4),O.bc(14,"input",7),O.jc("ngModelChange",(function(e){return t.sector.email=e})),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(15,"button",8),O.jc("click",(function(e){return t.submit()})),O.Vc(16,"Guardar"),O.ac(),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(1),O.Wc(t.data.title),O.Gb(7),O.uc("ngModel",t.sector.name),O.Gb(3),O.uc("ngModel",t.sector.initials),O.Gb(3),O.uc("ngModel",t.sector.email))},directives:[h.a,h.c,T.x,T.o,T.p,A.d,A.b,C.a,r.b,T.c,T.n,T.q,b.b],encapsulation:2}),c),E=a("3sEA");function L(e,t){if(1&e){var a=O.cc();O.bc(0,"div",5),O.bc(1,"button",6),O.jc("click",(function(e){return O.Mc(a),O.nc().toNew()})),O.Vc(2,"Nuevo"),O.ac(),O.ac()}}var N,D=((N=function(){function e(t,a,c,n,i,o,r){_classCallCheck(this,e),this._userService=t,this._sectorService=a,this._route=c,this._router=n,this.loader=i,this.snackBar=o,this.dialog=r,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=t.getToken(),this.identity=t.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getSectors(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}},{key:"getSectors",value:function(){var e=this;this._sectorService.getList(this.token).subscribe((function(t){t.sectors&&(e.rows=t.sectors,e.temp=t.sectors)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"initials",name:"Iniciales",flexGrow:1},{prop:"email",name:"Email",flexGrow:2}]}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),a=Object.keys(this.temp[0]);if(a.splice(a.length-1),a.length){var c=this.temp.filter((function(e){for(var c=0;c<=a.length;c++){var n=a[c];if(e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=c}}},{key:"toNew",value:function(){this.openPopUp(!0)}},{key:"openPopUp",value:function(e,t){var a=this;this.dialog.open(P,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo sector":"Editar sector"}}).afterClosed().subscribe((function(t){t&&(a.loader.open(),e?a._sectorService.add(a.token,t.sector).subscribe((function(e){e.sector&&(a.openSnackBar("Sector creado","Cerrar"),a.getSectors())}),(function(e){a.openSnackBar(e.message,"Cerrar")})):a._sectorService.edit(a.token,t.sector._id,t.sector).subscribe((function(e){e.sector&&(a.openSnackBar("Sector actualizado","Cerrar"),a.getSectors())}),(function(e){a.openSnackBar(e.message,"Cerrar")})),a.loader.close())}))}},{key:"toProfile",value:function(e,t){"click"==e.type&&this.openPopUp(!1,e.row)}}]),e}()).\u0275fac=function(e){return new(e||N)(O.Vb(G.a),O.Vb(V.a),O.Vb(i.a),O.Vb(i.g),O.Vb(E.a),O.Vb(F.a),O.Vb(x.b))},N.\u0275cmp=O.Pb({type:N,selectors:[["app-sector-list"]],features:[O.Fb([G.a,V.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"mat-form-field",0),O.bc(1,"input",1),O.jc("keyup",(function(e){return t.updateFilter(e)})),O.ac(),O.ac(),O.Tc(2,L,3,0,"div",2),O.bc(3,"div",3),O.bc(4,"ngx-datatable",4),O.jc("activate",(function(e){return t.toProfile(e)})),O.ac(),O.ac()),2&e&&(O.Gb(2),O.uc("ngIf",t.canCreate),O.Gb(2),O.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[C.a,r.b,n.m,p.d,b.b],encapsulation:2}),N),q=a("wd/R"),R=a("YFeJ"),H=a("Q2c7"),U=a("wkIo");function $(e,t){if(1&e){var a=O.cc();O.bc(0,"div",20),O.Wb(1,"img",21),O.bc(2,"button",22),O.jc("click",(function(e){return O.Mc(a),O.nc().openAttachment()})),O.bc(3,"mat-icon"),O.Vc(4,"edit"),O.ac(),O.ac(),O.ac()}}function W(e,t){if(1&e){var a=O.cc();O.bc(0,"div",20),O.Wb(1,"img",23),O.bc(2,"button",22),O.jc("click",(function(e){return O.Mc(a),O.nc().openAttachment()})),O.bc(3,"mat-icon"),O.Vc(4,"edit"),O.ac(),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(1),O.vc("src",c.url+"company/image/"+c.company.image,O.Oc)}}function z(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-form-field",11),O.bc(1,"input",24),O.jc("ngModelChange",(function(e){return O.Mc(a),O.nc().company.password=e})),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(1),O.uc("readonly",!c.isAdmin)("ngModel",c.company.password)}}function X(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-form-field",11),O.bc(1,"input",25),O.jc("ngModelChange",(function(e){return O.Mc(a),O.nc().company.chatScheduleFrom=e})),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(1),O.uc("readonly",!c.isAdmin)("ngModel",c.company.chatScheduleFrom)}}function K(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-form-field",11),O.bc(1,"input",26),O.jc("ngModelChange",(function(e){return O.Mc(a),O.nc().company.chatScheduleTo=e})),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(1),O.uc("readonly",!c.isAdmin)("ngModel",c.company.chatScheduleTo)}}var Q,Y,J=((Q=function(){function e(t,a,c,n,i){_classCallCheck(this,e),this._userService=t,this._companyService=a,this._uploadService=c,this._route=n,this.snackBar=i,this.token=t.getToken(),this.identity=t.getIdentity(),this.url=R.a.url,this.isAdmin=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getCompany()}},{key:"getCompany",value:function(){var e=this;this._companyService.getOne(this.token,this.identity.company._id).subscribe((function(t){t.company&&(e.company=t.company,"ROLE_ADMIN"==e.identity.role&&(e.isAdmin=!0))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"editCompany",value:function(){var e=this;!this.company.chat||this.company.chat&&q(this.company.chatScheduleFrom,"HH:mm").isValid()&&q(this.company.chatScheduleTo,"HH:mm").isValid()?(0==this.company.mailSender&&(this.company.password=""),this._companyService.edit(this.token,this.company._id,this.company).subscribe((function(t){t.company&&e.openSnackBar("Datos actualizados","Cerrar")}),(function(t){e.openSnackBar(t.message,"Cerrar")}))):this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"openAttachment",value:function(){document.getElementById("attachment").click()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"fileChangeEvent",value:function(e){var t=this;this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"company/image/"+this.company._id,[],this.filesToUpload,this.token,"image"),setTimeout((function(){t.getCompany(),t.openSnackBar("Foto de departamento actualizada","Cerrar")}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||Q)(O.Vb(G.a),O.Vb(U.a),O.Vb(H.a),O.Vb(i.a),O.Vb(F.a))},Q.\u0275cmp=O.Pb({type:Q,selectors:[["app-user-profile"]],features:[O.Fb([G.a,U.a,H.a])],decls:38,vars:16,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1",2,"margin-top","20px"],[1,"main-title"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],["label","Informaci\xf3n"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","email","type","text","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Servidor de correo"],["name","mailSender",3,"ngModel","color","disabled","ngModelChange"],["class","full-width",4,"ngIf"],["label","Chat online"],["name","chat",3,"ngModel","color","disabled","ngModelChange"],[1,"propic","text-center"],["src","assets/images/system/company-placeholder.png"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["matInput","","name","name","type","password","placeholder","Contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleFrom","type","text","placeholder","08:30",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleTo","type","text","placeholder","18:00",3,"readonly","ngModel","ngModelChange"]],template:function(e,t){1&e&&(O.bc(0,"div",0),O.bc(1,"div",1),O.bc(2,"mat-card",2),O.Tc(3,$,5,0,"div",3),O.Tc(4,W,5,1,"div",3),O.bc(5,"input",4),O.jc("change",(function(e){return t.fileChangeEvent(e)})),O.ac(),O.bc(6,"div",5),O.bc(7,"div",6),O.Vc(8),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(9,"div",7),O.bc(10,"mat-card",8),O.bc(11,"mat-tab-group"),O.bc(12,"mat-tab",9),O.bc(13,"mat-card-content",10),O.bc(14,"form"),O.bc(15,"mat-form-field",11),O.bc(16,"input",12),O.jc("ngModelChange",(function(e){return t.company.name=e})),O.ac(),O.ac(),O.bc(17,"mat-form-field",11),O.bc(18,"input",13),O.jc("ngModelChange",(function(e){return t.company.email=e})),O.ac(),O.ac(),O.ac(),O.bc(19,"button",14),O.jc("click",(function(e){return t.editCompany()})),O.Vc(20,"Guardar"),O.ac(),O.ac(),O.ac(),O.bc(21,"mat-tab",15),O.bc(22,"mat-card-content",10),O.bc(23,"form"),O.bc(24,"mat-checkbox",16),O.jc("ngModelChange",(function(e){return t.company.mailSender=e})),O.Vc(25,"Habilitar env\xedo de correos electr\xf3nicos "),O.ac(),O.Tc(26,z,2,2,"mat-form-field",17),O.ac(),O.bc(27,"button",14),O.jc("click",(function(e){return t.editCompany()})),O.Vc(28,"Guardar"),O.ac(),O.ac(),O.ac(),O.bc(29,"mat-tab",18),O.bc(30,"mat-card-content",10),O.bc(31,"form"),O.bc(32,"mat-checkbox",19),O.jc("ngModelChange",(function(e){return t.company.chat=e})),O.Vc(33,"Habilitar env\xedo de correos electr\xf3nicos "),O.ac(),O.Tc(34,X,2,2,"mat-form-field",17),O.Tc(35,K,2,2,"mat-form-field",17),O.ac(),O.bc(36,"button",14),O.jc("click",(function(e){return t.editCompany()})),O.Vc(37,"Guardar"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(3),O.uc("ngIf","null"==t.company.image),O.Gb(1),O.uc("ngIf","null"!=t.company.image),O.Gb(4),O.Wc(t.company.name),O.Gb(8),O.uc("readonly",!t.isAdmin)("ngModel",t.company.name),O.Gb(2),O.uc("readonly",!t.isAdmin)("ngModel",t.company.email),O.Gb(6),O.uc("ngModel",t.company.mailSender)("color","primary")("disabled",!t.isAdmin),O.Gb(2),O.uc("ngIf",t.company.mailSender),O.Gb(6),O.uc("ngModel",t.company.chat)("color","primary")("disabled",!t.isAdmin),O.Gb(2),O.uc("ngIf",t.company.chat),O.Gb(1),O.uc("ngIf",t.company.chat))},directives:[A.d,A.b,h.a,n.m,f.b,f.a,h.c,T.x,T.o,T.p,C.a,r.b,T.c,T.n,T.q,b.b,o.a,d.a],encapsulation:2}),Q),Z=a("rpG9"),ee=a("Xwq+"),te=function e(t,a,c){_classCallCheck(this,e),this._id=t,this.name=a,this.company=c},ae=function e(t,a,c,n,i,o,r,s,u,l,p,d,b){_classCallCheck(this,e),this._id=t,this.name=a,this.team=c,this.resolveDays=n,this.typeTicket=i,this.checks=o,this.goodChecks=r,this.requireAttach=s,this.desc=u,this.autoSub=l,this.autoDesc=p,this.autoChange=d,this.workTime=b},ce=a("3kSh"),ne=((Y=function(){function e(t,a){_classCallCheck(this,e),this.data=t,this.dialogRef=a,this.type=new te("","","")}return _createClass(e,[{key:"ngOnInit",value:function(){this.build(this.data.payload)}},{key:"build",value:function(e){e&&(this.type=e)}},{key:"submit",value:function(){this.dialogRef.close({type:this.type})}}]),e}()).\u0275fac=function(e){return new(e||Y)(O.Vb(x.a),O.Vb(x.g))},Y.\u0275cmp=O.Pb({type:Y,selectors:[["app-type-popup"]],features:[O.Fb([{provide:B.c,useClass:I.c,deps:[B.g]},{provide:B.f,useValue:I.a}])],decls:12,vars:2,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["fxLayout","row"],["mat-raised-button","","color","primary","matStepperNext","",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"h1",0),O.Vc(1),O.ac(),O.bc(2,"mat-card",1),O.bc(3,"mat-card-content"),O.bc(4,"form"),O.bc(5,"div",2),O.bc(6,"div",3),O.bc(7,"mat-form-field",4),O.bc(8,"input",5),O.jc("ngModelChange",(function(e){return t.type.name=e})),O.ac(),O.ac(),O.ac(),O.bc(9,"div",6),O.bc(10,"button",7),O.jc("click",(function(e){return t.submit()})),O.Vc(11,"Guardar"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(1),O.Wc(t.data.title),O.Gb(7),O.uc("ngModel",t.type.name))},directives:[h.a,h.c,T.x,T.o,T.p,A.d,A.b,C.a,r.b,T.c,T.n,T.q,b.b],encapsulation:2}),Y);function ie(e,t){if(1&e&&(O.bc(0,"div",8),O.Vc(1),O.ac()),2&e){var a=O.nc().$implicit;O.Gb(1),O.Xc(" ",a.team.name," ")}}var oe=function(e){return["/settings/ticket/subtype",e]};function re(e,t){if(1&e&&(O.bc(0,"mat-list-item"),O.bc(1,"button",7),O.bc(2,"a",3),O.bc(3,"mat-icon",1),O.Vc(4,"settings"),O.ac(),O.ac(),O.ac(),O.bc(5,"div",8),O.Vc(6),O.ac(),O.Tc(7,ie,2,1,"div",9),O.ac()),2&e){var a=t.$implicit;O.Gb(2),O.uc("routerLink",O.Ac(3,oe,a._id)),O.Gb(4),O.Wc(a.name),O.Gb(1),O.uc("ngIf",a.team)}}var se=function(e){return["/settings/ticket/newsubtype",e]};function ue(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-expansion-panel"),O.bc(1,"mat-expansion-panel-header"),O.Vc(2),O.ac(),O.bc(3,"mat-list"),O.Tc(4,re,8,5,"mat-list-item",2),O.bc(5,"mat-list-item"),O.bc(6,"a",3),O.bc(7,"button",4),O.bc(8,"mat-icon",1),O.Vc(9,"add"),O.ac(),O.ac(),O.ac(),O.bc(10,"button",5),O.jc("click",(function(e){O.Mc(a);var c=t.$implicit;return O.nc().openPopUp(c,!1)})),O.bc(11,"mat-icon",1),O.Vc(12,"settings"),O.ac(),O.ac(),O.bc(13,"button",6),O.jc("click",(function(e){O.Mc(a);var c=t.$implicit;return O.nc().deleteType(c)})),O.bc(14,"mat-icon",1),O.Vc(15,"delete"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()}if(2&e){var c=t.$implicit,n=t.index,i=O.nc();O.Gb(2),O.Xc(" ",c.name," "),O.Gb(2),O.uc("ngForOf",i.subtypes[n]),O.Gb(2),O.uc("routerLink",O.Ac(6,se,c._id)),O.Gb(1),O.uc("matTooltip","Nuevo subtipo en "+c.name),O.Gb(3),O.uc("matTooltip","Configurar tipo "+c.name),O.Gb(3),O.uc("matTooltip","Eliminar tipo "+c.name)}}var le,pe=((le=function(){function e(t,a,c,n,i,o,r){_classCallCheck(this,e),this.dialog=t,this.loader=a,this._userService=c,this._typeTicketService=n,this._subTypeTicketService=i,this.confirmService=o,this.snackBar=r,this.token=c.getToken(),this.identity=c.getIdentity(),this.url=R.a.url,this.subtypes=new Array,this.newType=new te("","",this.identity.company._id),this.newSubtype=new ae("","","",0,"",String[""],0,!1,"","","",!1,null)}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTypes()}},{key:"getTypes",value:function(){var e=this;this._typeTicketService.getList(this.token,this.identity.company._id).subscribe((function(t){if(t.typeTickets){e.types=t.typeTickets;for(var a=0;a<e.types.length;a++)e.getSubTypes(e.types[a]._id,a)}}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"getSubTypes",value:function(e,t){var a=this;this._subTypeTicketService.getList(this.token,e).subscribe((function(e){e.subTypeTickets&&a.subtypes.push(e.subTypeTickets)}),(function(e){a.openSnackBar(e.message,"Cerrar")}))}},{key:"deleteType",value:function(e){var t=this;this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar el tipo "+e.name+"?"}).subscribe((function(a){a&&t._typeTicketService.delete(t.token,e._id).subscribe((function(e){e.typeTicket&&(t.getTypes(),t.openSnackBar("Tipo eliminado","Cerrar"))}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}))}},{key:"addType",value:function(e){var t=this,a=new te("",e,this.identity.company._id);this._typeTicketService.add(this.token,a).subscribe((function(e){e.typeTicket&&(t.getTypes(),t.openSnackBar("Tipo de ticket a\xf1adido","Cerrar"))}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}},{key:"editType",value:function(e,t){var a=this,c=new te(e,t,this.identity.company._id);this._typeTicketService.edit(this.token,e,c).subscribe((function(e){e.typeTicket&&(a.getTypes(),a.openSnackBar("Tipo de ticket editado","Cerrar"))}),(function(e){a.openSnackBar(e.message,"Cerrar")}))}},{key:"openPopUp",value:function(e,t){var a=this;this.dialog.open(ne,{width:"500px",data:{payload:e,title:t?"Nuevo tipo de ticket":"Editar tipo de ticket"}}).afterClosed().subscribe((function(e){e&&(a.loader.open(),t?a.addType(e.type.name):a.editType(e.type._id,e.type.name),a.loader.close())}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}}]),e}()).\u0275fac=function(e){return new(e||le)(O.Vb(x.b),O.Vb(E.a),O.Vb(G.a),O.Vb(Z.a),O.Vb(ee.a),O.Vb(ce.a),O.Vb(F.a))},le.\u0275cmp=O.Pb({type:le,selectors:[["app-type-ticket"]],features:[O.Fb([G.a,Z.a,ee.a])],decls:6,vars:1,consts:[["mat-raised-button","","matTooltip","Nuevo tipo de ticket","color","primary",3,"click"],["mat-list-icon",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["mat-raised-button","","color","primary",3,"matTooltip"],["mat-raised-button","","color","accent",3,"matTooltip","click"],["mat-raised-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","","matTooltip","Configurar subtipo","color","accent"],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(e,t){1&e&&(O.bc(0,"mat-card"),O.bc(1,"button",0),O.jc("click",(function(e){return t.openPopUp(null,!0)})),O.bc(2,"mat-icon",1),O.Vc(3,"add"),O.ac(),O.ac(),O.ac(),O.bc(4,"mat-accordion"),O.Tc(5,ue,16,8,"mat-expansion-panel",2),O.ac()),2&e&&(O.Gb(5),O.uc("ngForOf",t.types))},directives:[h.a,b.b,_.a,d.a,y.b,g.a,n.l,g.c,g.d,y.a,y.c,i.j,B.l,n.m],styles:[".item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#d3d3d3}"]}),le),de=a("3uMe"),be=a("CzEO");function he(e,t){if(1&e&&(O.bc(0,"mat-label"),O.Vc(1),O.ac()),2&e){var a=O.nc();O.Gb(1),O.Wc(a.subtype.team.name)}}function me(e,t){1&e&&(O.bc(0,"mat-label"),O.Vc(1,"Sin equipo"),O.ac())}function fe(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-option",22),O.jc("click",(function(e){O.Mc(a);var c=t.$implicit;return O.nc().setTeam(c._id)})),O.Vc(1),O.ac()}if(2&e){var c=t.$implicit;O.uc("value",c._id),O.Gb(1),O.Xc("",c.name," ")}}function ge(e,t){1&e&&(O.bc(0,"th"),O.Vc(1,"Editar"),O.ac())}function ye(e,t){if(1&e){var a=O.cc();O.bc(0,"td",24),O.bc(1,"button",25),O.jc("click",(function(e){O.Mc(a);var t=O.nc().$implicit;return O.nc().deleteCheck(t)})),O.bc(2,"mat-icon",26),O.Vc(3,"delete"),O.ac(),O.ac(),O.ac()}}function ke(e,t){if(1&e&&(O.bc(0,"tr"),O.bc(1,"td"),O.Vc(2),O.ac(),O.Tc(3,ye,4,0,"td",23),O.ac()),2&e){var a=t.$implicit,c=O.nc();O.Gb(2),O.Xc(" ",a," "),O.Gb(1),O.uc("ngIf",c.isAdmin)}}function ve(e,t){if(1&e){var a=O.cc();O.bc(0,"tfoot"),O.bc(1,"tr"),O.bc(2,"td"),O.bc(3,"input",27),O.jc("ngModelChange",(function(e){return O.Mc(a),O.nc().check=e})),O.ac(),O.ac(),O.bc(4,"td",24),O.bc(5,"button",28),O.jc("click",(function(e){return O.Mc(a),O.nc().addCheck()})),O.bc(6,"mat-icon",26),O.Vc(7,"add"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(3),O.uc("ngModel",c.check)}}var Ce,Se=((Ce=function(){function e(t,a,c,n,i,o){_classCallCheck(this,e),this._userService=t,this._teamService=a,this.confirmService=c,this._route=n,this._subTypeTicketService=i,this.snackBar=o,this.isAdmin=!1,this.token=t.getToken(),this.identity=t.getIdentity(),this.subtype=new ae("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.getSubType(),this.getTeams(),"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0)}},{key:"getSubType",value:function(){var e=this;this._route.params.forEach((function(t){e._subTypeTicketService.getOne(e.token,t.id).subscribe((function(t){t.subTypeTicket&&(e.subtype=t.subTypeTicket)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"getTeams",value:function(){var e=this;this._teamService.getList(this.token,this.identity.company._id).subscribe((function(t){t.teams&&(e.teams=t.teams)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setTeam",value:function(e){this.subtype.team=e}},{key:"submit",value:function(){var e=this;""!=this.subtype.name?this._subTypeTicketService.edit(this.token,this.subtype._id,this.subtype).subscribe((function(t){t.subTypeTicket&&e.openSnackBar("Datos actualizados","Cerrar")}),(function(t){e.openSnackBar(t.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"deleteCheck",value:function(e){var t=this;this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe((function(a){a&&t._subTypeTicketService.deleteCheck(t.token,t.subtype._id,e).subscribe((function(a){a.check&&(t.subtype.checks.splice(t.subtype.checks.indexOf(e),1),t.openSnackBar("Validaci\xf3n eliminada","Cerrar"))}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}))}},{key:"addCheck",value:function(){var e=this;this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe((function(t){t.subTypeTicket&&(e.subtype.checks.push(e.check),e.check="",e.openSnackBar("Validaci\xf3n agregada","Cerrar"))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}}]),e}()).\u0275fac=function(e){return new(e||Ce)(O.Vb(G.a),O.Vb(de.a),O.Vb(ce.a),O.Vb(i.a),O.Vb(ee.a),O.Vb(F.a))},Ce.\u0275cmp=O.Pb({type:Ce,selectors:[["app-subtype"]],features:[O.Fb([{provide:B.c,useClass:I.c,deps:[B.g]},{provide:B.f,useValue:I.a},G.a,ee.a,de.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"div",0),O.bc(1,"div",1),O.bc(2,"mat-card",2),O.bc(3,"mat-tab-group"),O.bc(4,"mat-tab",3),O.bc(5,"mat-card-content",4),O.bc(6,"form"),O.bc(7,"mat-form-field",5),O.bc(8,"input",6),O.jc("ngModelChange",(function(e){return t.subtype.name=e})),O.ac(),O.ac(),O.bc(9,"mat-form-field",7),O.Tc(10,he,2,1,"mat-label",8),O.Tc(11,me,2,0,"mat-label",8),O.bc(12,"mat-select"),O.Tc(13,fe,2,2,"mat-option",9),O.ac(),O.ac(),O.bc(14,"mat-form-field",5),O.bc(15,"input",10),O.jc("ngModelChange",(function(e){return t.subtype.desc=e})),O.ac(),O.ac(),O.bc(16,"mat-checkbox",11),O.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),O.Vc(17,"Requiere adjunto "),O.ac(),O.ac(),O.bc(18,"button",12),O.jc("click",(function(e){return t.submit()})),O.Vc(19,"Guardar"),O.ac(),O.ac(),O.ac(),O.bc(20,"mat-tab",13),O.bc(21,"mat-card-content",4),O.bc(22,"div",14),O.bc(23,"div",15),O.bc(24,"table",16),O.bc(25,"thead"),O.bc(26,"tr"),O.bc(27,"th"),O.Vc(28,"Descripci\xf3n"),O.ac(),O.Tc(29,ge,2,0,"th",8),O.ac(),O.ac(),O.bc(30,"tbody"),O.Tc(31,ke,4,2,"tr",17),O.ac(),O.Tc(32,ve,8,1,"tfoot",8),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(33,"mat-tab",18),O.bc(34,"mat-card-content",4),O.bc(35,"form"),O.bc(36,"mat-checkbox",19),O.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),O.Vc(37,"Requiere modificaci\xf3n "),O.ac(),O.bc(38,"mat-form-field",5),O.bc(39,"input",20),O.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),O.ac(),O.ac(),O.bc(40,"mat-card-content",2),O.bc(41,"quill-editor",21),O.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),O.ac(),O.ac(),O.ac(),O.bc(42,"button",12),O.jc("click",(function(e){return t.submit()})),O.Vc(43,"Guardar"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(8),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),O.Gb(2),O.uc("ngIf",t.subtype.team),O.Gb(1),O.uc("ngIf",!t.subtype.team),O.Gb(2),O.uc("ngForOf",t.teams),O.Gb(2),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),O.Gb(1),O.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),O.Gb(4),O.uc("disabled",""==t.subtype._id),O.Gb(9),O.uc("ngIf",t.isAdmin),O.Gb(2),O.uc("ngForOf",t.subtype.checks),O.Gb(1),O.uc("ngIf",t.isAdmin),O.Gb(4),O.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),O.Gb(3),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),O.Gb(2),O.uc("ngModel",t.subtype.autoDesc))},directives:[A.d,A.b,h.a,f.b,f.a,h.c,T.x,T.o,T.p,C.a,r.b,T.c,T.n,T.q,n.m,S.a,n.l,o.a,b.b,be.a,C.d,B.p,_.a,d.a,y.b,T.u],encapsulation:2}),Ce);function Te(e,t){if(1&e&&(O.bc(0,"mat-label"),O.Vc(1),O.ac()),2&e){var a=O.nc();O.Gb(1),O.Wc(a.subtype.team.name)}}function Me(e,t){1&e&&(O.bc(0,"mat-label"),O.Vc(1,"Sin equipo"),O.ac())}function _e(e,t){if(1&e){var a=O.cc();O.bc(0,"mat-option",22),O.jc("click",(function(e){O.Mc(a);var c=t.$implicit;return O.nc().setTeam(c._id)})),O.Vc(1),O.ac()}if(2&e){var c=t.$implicit;O.uc("value",c._id),O.Gb(1),O.Xc("",c.name," ")}}function we(e,t){1&e&&(O.bc(0,"th"),O.Vc(1,"Editar"),O.ac())}function Ge(e,t){if(1&e){var a=O.cc();O.bc(0,"td",24),O.bc(1,"button",25),O.jc("click",(function(e){O.Mc(a);var t=O.nc().$implicit;return O.nc().deleteCheck(t)})),O.bc(2,"mat-icon",26),O.Vc(3,"delete"),O.ac(),O.ac(),O.ac()}}function Ve(e,t){if(1&e&&(O.bc(0,"tr"),O.bc(1,"td"),O.Vc(2),O.ac(),O.Tc(3,Ge,4,0,"td",23),O.ac()),2&e){var a=t.$implicit,c=O.nc();O.Gb(2),O.Xc(" ",a," "),O.Gb(1),O.uc("ngIf",c.isAdmin)}}function xe(e,t){if(1&e){var a=O.cc();O.bc(0,"tfoot"),O.bc(1,"tr"),O.bc(2,"td"),O.bc(3,"input",27),O.jc("ngModelChange",(function(e){return O.Mc(a),O.nc().check=e})),O.ac(),O.ac(),O.bc(4,"td",24),O.bc(5,"button",28),O.jc("click",(function(e){return O.Mc(a),O.nc().addCheck()})),O.bc(6,"mat-icon",26),O.Vc(7,"add"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()}if(2&e){var c=O.nc();O.Gb(3),O.uc("ngModel",c.check)}}var Ie,Be,je=((Ie=function(){function e(t,a,c,n,i,o,r){_classCallCheck(this,e),this._userService=t,this._teamService=a,this.confirmService=c,this._route=n,this._subTypeTicketService=i,this.snackBar=o,this._router=r,this.isAdmin=!0,this.token=t.getToken(),this.identity=t.getIdentity(),this.subtype=new ae("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.build(),this.getTeams()}},{key:"build",value:function(){var e=this;this._route.params.forEach((function(t){e.subtype.typeTicket=t.id}))}},{key:"getTeams",value:function(){var e=this;this._teamService.getList(this.token,this.identity.company._id).subscribe((function(t){t.teams&&(e.teams=t.teams)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"setTeam",value:function(e){this.subtype.team=e}},{key:"submit",value:function(){var e=this;""!=this.subtype.name?(""==this.subtype.team&&delete this.subtype.team,this._subTypeTicketService.add(this.token,this.subtype).subscribe((function(t){t.subTypeTicket&&(e.openSnackBar("Subtipo creado","Cerrar"),e._router.navigate(["/settings/ticket/types"]))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))):this.openSnackBar("Faltan campos para completar","Cerrar")}},{key:"deleteCheck",value:function(e){var t=this;this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe((function(a){a&&t._subTypeTicketService.deleteCheck(t.token,t.subtype._id,e).subscribe((function(a){a.check&&(t.subtype.checks.splice(t.subtype.checks.indexOf(e),1),t.openSnackBar("Validaci\xf3n eliminada","Cerrar"))}),(function(e){t.openSnackBar(e.message,"Cerrar")}))}))}},{key:"addCheck",value:function(){var e=this;this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe((function(t){t.subTypeTicket&&(e.subtype.checks.push(e.check),e.check="",e.openSnackBar("Validaci\xf3n agregada","Cerrar"))}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}}]),e}()).\u0275fac=function(e){return new(e||Ie)(O.Vb(G.a),O.Vb(de.a),O.Vb(ce.a),O.Vb(i.a),O.Vb(ee.a),O.Vb(F.a),O.Vb(i.g))},Ie.\u0275cmp=O.Pb({type:Ie,selectors:[["app-subtype"]],features:[O.Fb([{provide:B.c,useClass:I.c,deps:[B.g]},{provide:B.f,useValue:I.a},G.a,ee.a,de.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"div",0),O.bc(1,"div",1),O.bc(2,"mat-card",2),O.bc(3,"mat-tab-group"),O.bc(4,"mat-tab",3),O.bc(5,"mat-card-content",4),O.bc(6,"form"),O.bc(7,"mat-form-field",5),O.bc(8,"input",6),O.jc("ngModelChange",(function(e){return t.subtype.name=e})),O.ac(),O.ac(),O.bc(9,"mat-form-field",7),O.Tc(10,Te,2,1,"mat-label",8),O.Tc(11,Me,2,0,"mat-label",8),O.bc(12,"mat-select"),O.Tc(13,_e,2,2,"mat-option",9),O.ac(),O.ac(),O.bc(14,"mat-form-field",5),O.bc(15,"input",10),O.jc("ngModelChange",(function(e){return t.subtype.desc=e})),O.ac(),O.ac(),O.bc(16,"mat-checkbox",11),O.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),O.Vc(17,"Requiere adjunto "),O.ac(),O.ac(),O.bc(18,"button",12),O.jc("click",(function(e){return t.submit()})),O.Vc(19,"Guardar"),O.ac(),O.ac(),O.ac(),O.bc(20,"mat-tab",13),O.bc(21,"mat-card-content",4),O.bc(22,"div",14),O.bc(23,"div",15),O.bc(24,"table",16),O.bc(25,"thead"),O.bc(26,"tr"),O.bc(27,"th"),O.Vc(28,"Descripci\xf3n"),O.ac(),O.Tc(29,we,2,0,"th",8),O.ac(),O.ac(),O.bc(30,"tbody"),O.Tc(31,Ve,4,2,"tr",17),O.ac(),O.Tc(32,xe,8,1,"tfoot",8),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(33,"mat-tab",18),O.bc(34,"mat-card-content",4),O.bc(35,"form"),O.bc(36,"mat-checkbox",19),O.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),O.Vc(37,"Requiere modificaci\xf3n "),O.ac(),O.bc(38,"mat-form-field",5),O.bc(39,"input",20),O.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),O.ac(),O.ac(),O.bc(40,"mat-card-content",2),O.bc(41,"quill-editor",21),O.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),O.ac(),O.ac(),O.ac(),O.bc(42,"button",12),O.jc("click",(function(e){return t.submit()})),O.Vc(43,"Guardar"),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(8),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),O.Gb(2),O.uc("ngIf",t.subtype.team),O.Gb(1),O.uc("ngIf",!t.subtype.team),O.Gb(2),O.uc("ngForOf",t.teams),O.Gb(2),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),O.Gb(1),O.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),O.Gb(4),O.uc("disabled",""==t.subtype._id),O.Gb(9),O.uc("ngIf",t.isAdmin),O.Gb(2),O.uc("ngForOf",t.subtype.checks),O.Gb(1),O.uc("ngIf",t.isAdmin),O.Gb(4),O.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),O.Gb(3),O.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),O.Gb(2),O.uc("ngModel",t.subtype.autoDesc))},directives:[A.d,A.b,h.a,f.b,f.a,h.c,T.x,T.o,T.p,C.a,r.b,T.c,T.n,T.q,n.m,S.a,n.l,o.a,b.b,be.a,C.d,B.p,_.a,d.a,y.b,T.u],encapsulation:2}),Ie),Oe=function e(t,a,c,n){_classCallCheck(this,e),this._id=t,this.name=a,this.phoneGroup=c,this.phone=n},Fe=a("tk/3"),Ae=((Be=function(){function e(t){_classCallCheck(this,e),this._httpClient=t,this.httpOptions={headers:new Fe.e({"Content-Type":"application/json"})},this.url="http://10.0.0.98:1000/api/"}return _createClass(e,[{key:"add",value:function(e){return this._httpClient.post(this.url+"phone/add",e,this.httpOptions)}},{key:"edit",value:function(e,t){return this._httpClient.put(this.url+"phone/update/"+e,t,this.httpOptions)}},{key:"delete",value:function(e){return this._httpClient.delete(this.url+"phone/delete/"+e,this.httpOptions)}},{key:"getList",value:function(e){return this._httpClient.get(this.url+"phone/list",{headers:this.httpOptions.headers,params:e})}},{key:"getOne",value:function(e){return this._httpClient.get(this.url+"phone/get/"+e,this.httpOptions)}}]),e}()).\u0275fac=function(e){return new(e||Be)(O.fc(Fe.c))},Be.\u0275prov=O.Rb({token:Be,factory:Be.\u0275fac}),Be);function Pe(e,t){if(1&e){var a=O.cc();O.bc(0,"button",9),O.jc("click",(function(e){return O.Mc(a),O.nc().submit(!1)})),O.Vc(1,"Eliminar"),O.ac()}}var Ee,Le,Ne,De=((Le=function(){function e(t,a,c,n){_classCallCheck(this,e),this.data=t,this.dialogRef=a,this.snackBar=c,this._phoneService=n,this.phone=new Oe("","","",null)}return _createClass(e,[{key:"ngOnInit",value:function(){this.build(this.data.payload)}},{key:"build",value:function(e){e&&(this.phone=e)}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"submit",value:function(e){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");e?this.dialogRef.close({phone:this.phone}):""!=this.phone._id&&this.dialogRef.close({delete:!0})}},{key:"check",value:function(){return!(null==this.phone.name||this.phone.phone<1)}}]),e}()).\u0275fac=function(e){return new(e||Le)(O.Vb(x.a),O.Vb(x.g),O.Vb(F.a),O.Vb(Ae))},Le.\u0275cmp=O.Pb({type:Le,selectors:[["app-phone-popop"]],features:[O.Fb([Ae])],decls:14,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","number","min","0","placeholder","Marca","aria-label","Text","matInput","","name","phone",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","danger",3,"click",4,"ngIf"],["mat-raised-button","","color","danger",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"h1",0),O.Vc(1),O.ac(),O.bc(2,"mat-card",1),O.bc(3,"mat-card-content"),O.bc(4,"form"),O.bc(5,"div",2),O.bc(6,"div",3),O.bc(7,"mat-form-field",4),O.bc(8,"input",5),O.jc("ngModelChange",(function(e){return t.phone.name=e})),O.ac(),O.ac(),O.bc(9,"mat-form-field",4),O.bc(10,"input",6),O.jc("ngModelChange",(function(e){return t.phone.phone=e})),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(11,"button",7),O.jc("click",(function(e){return t.submit(!0)})),O.Vc(12,"Guardar"),O.ac(),O.Tc(13,Pe,2,0,"button",8),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(1),O.Wc(t.data.title),O.Gb(7),O.uc("ngModel",t.phone.name),O.Gb(2),O.uc("ngModel",t.phone.phone),O.Gb(3),O.uc("ngIf",""!=t.phone._id))},directives:[h.a,h.c,T.x,T.o,T.p,A.d,A.b,C.a,r.b,T.c,T.n,T.q,T.s,b.b,n.m],encapsulation:2}),Le),qe=((Ee=function(){function e(t,a,c,n,i){_classCallCheck(this,e),this._phoneService=t,this._route=a,this.loader=c,this.snackBar=n,this.dialog=i,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getPhones()}},{key:"getPhones",value:function(){var e=this;this._route.params.forEach((function(t){e.groupId=t.id,e._phoneService.getList({phoneGroup:t.id}).subscribe((function(t){t.phones&&(e.rows=t.phones,e.temp=t.phones)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"phone",name:"N\xfamero",flexGrow:1}]}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),a=Object.keys(this.temp[0]);if(a.splice(a.length-1),a.length){var c=this.temp.filter((function(e){for(var c=0;c<=a.length;c++){var n=a[c];if(e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=c}}},{key:"toNew",value:function(){this.openPopUp(!0)}},{key:"openPopUp",value:function(e,t){var a=this;this.dialog.open(De,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo tel\xe9fono":"Editar tel\xe9fono"}}).afterClosed().subscribe((function(c){if(c){if(a.loader.open(),e){var n=new Oe("",c.phone.name,a.groupId,c.phone.phone);a._phoneService.add(n).subscribe((function(e){e.phone&&(a.openSnackBar("Tel\xe9fono creado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")}))}else c.delete?a._phoneService.delete(t._id).subscribe((function(e){e.phone&&(a.openSnackBar("Tel\xe9fono eliminado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")})):a._phoneService.edit(c.phone._id,c.phone).subscribe((function(e){e.phone&&(a.openSnackBar("Tel\xe9fono actualizado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")}));a.loader.close()}}))}},{key:"toProfile",value:function(e,t){"click"==e.type&&this.openPopUp(!1,e.row)}}]),e}()).\u0275fac=function(e){return new(e||Ee)(O.Vb(Ae),O.Vb(i.a),O.Vb(E.a),O.Vb(F.a),O.Vb(x.b))},Ee.\u0275cmp=O.Pb({type:Ee,selectors:[["app-deposit-list"]],features:[O.Fb([Ae])],decls:7,vars:7,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(O.bc(0,"mat-form-field",0),O.bc(1,"input",1),O.jc("keyup",(function(e){return t.updateFilter(e)})),O.ac(),O.ac(),O.bc(2,"div",2),O.bc(3,"button",3),O.jc("click",(function(e){return t.toNew()})),O.Vc(4,"Nuevo"),O.ac(),O.ac(),O.bc(5,"div",4),O.bc(6,"ngx-datatable",5),O.jc("activate",(function(e){return t.toProfile(e)})),O.ac(),O.ac()),2&e&&(O.Gb(6),O.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[C.a,r.b,b.b,p.d],encapsulation:2}),Ee),Re=function e(t,a,c){_classCallCheck(this,e),this._id=t,this.name=a,this.branch=c},He=((Ne=function(){function e(t){_classCallCheck(this,e),this._httpClient=t,this.httpOptions={headers:new Fe.e({"Content-Type":"application/json"})},this.url="http://10.0.0.98:1000/api/"}return _createClass(e,[{key:"add",value:function(e){return this._httpClient.post(this.url+"phonegroup/add",e,this.httpOptions)}},{key:"edit",value:function(e,t){return this._httpClient.put(this.url+"phonegroup/update/"+e,t,this.httpOptions)}},{key:"delete",value:function(e){return this._httpClient.delete(this.url+"phonegroup/delete/"+e,this.httpOptions)}},{key:"getList",value:function(e){return this._httpClient.get(this.url+"phonegroup/list",{headers:this.httpOptions.headers,params:e})}},{key:"getOne",value:function(e){return this._httpClient.get(this.url+"phonegroup/get/"+e,this.httpOptions)}}]),e}()).\u0275fac=function(e){return new(e||Ne)(O.fc(Fe.c))},Ne.\u0275prov=O.Rb({token:Ne,factory:Ne.\u0275fac}),Ne);function Ue(e,t){if(1&e){var a=O.cc();O.bc(0,"button",11),O.jc("click",(function(e){return O.Mc(a),O.nc().submit(!1)})),O.Vc(1,"Eliminar"),O.ac()}}var $e,We,ze=(($e=function(){function e(t,a,c){_classCallCheck(this,e),this.data=t,this.dialogRef=a,this.snackBar=c,this.phoneGroup=new Re("","","")}return _createClass(e,[{key:"ngOnInit",value:function(){this.build(this.data.payload)}},{key:"build",value:function(e){e&&(this.phoneGroup=e)}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"submit",value:function(e){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");e?this.dialogRef.close({phoneGroup:this.phoneGroup}):""!=this.phoneGroup._id&&this.dialogRef.close({delete:!0})}},{key:"check",value:function(){return""!=this.phoneGroup.name&&""!=this.phoneGroup.branch}}]),e}()).\u0275fac=function(e){return new(e||$e)(O.Vb(x.a),O.Vb(x.g),O.Vb(F.a))},$e.\u0275cmp=O.Pb({type:$e,selectors:[["app-phonegroup-popop"]],decls:18,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["placeholder","Centro","name","branch",3,"ngModel","ngModelChange"],["value","Ramos Mej\xeda"],["value","Castelar"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","danger",3,"click",4,"ngIf"],["mat-raised-button","","color","danger",3,"click"]],template:function(e,t){1&e&&(O.bc(0,"h1",0),O.Vc(1),O.ac(),O.bc(2,"mat-card",1),O.bc(3,"mat-card-content"),O.bc(4,"form"),O.bc(5,"div",2),O.bc(6,"div",3),O.bc(7,"mat-form-field",4),O.bc(8,"input",5),O.jc("ngModelChange",(function(e){return t.phoneGroup.name=e})),O.ac(),O.ac(),O.bc(9,"mat-form-field",4),O.bc(10,"mat-select",6),O.jc("ngModelChange",(function(e){return t.phoneGroup.branch=e})),O.bc(11,"mat-option",7),O.Vc(12," Ramos Mej\xeda "),O.ac(),O.bc(13,"mat-option",8),O.Vc(14," Castelar "),O.ac(),O.ac(),O.ac(),O.ac(),O.ac(),O.bc(15,"button",9),O.jc("click",(function(e){return t.submit(!0)})),O.Vc(16,"Guardar"),O.ac(),O.Tc(17,Ue,2,0,"button",10),O.ac(),O.ac(),O.ac()),2&e&&(O.Gb(1),O.Wc(t.data.title),O.Gb(7),O.uc("ngModel",t.phoneGroup.name),O.Gb(2),O.uc("ngModel",t.phoneGroup.branch),O.Gb(7),O.uc("ngIf",""!=t.phoneGroup._id))},directives:[h.a,h.c,T.x,T.o,T.p,A.d,A.b,C.a,r.b,T.c,T.n,T.q,S.a,B.p,b.b,n.m],encapsulation:2}),$e),Xe=[{path:"",children:[{path:"list/sector",component:D,data:{title:"Lista de sectores",breadcrumb:"LISTA DE SECTORES"}},{path:"list/phonegroup",component:(We=function(){function e(t,a,c,n,i,o){_classCallCheck(this,e),this._phonegroupService=t,this._route=a,this._router=c,this.loader=n,this.snackBar=i,this.dialog=o,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getColumns(),this.getPhones()}},{key:"getPhones",value:function(){var e=this;this._phonegroupService.getList({}).subscribe((function(t){t.phoneGroups&&(e.rows=t.phoneGroups,e.temp=t.phoneGroups)}),(function(t){e.openSnackBar(t.message,"Cerrar")}))}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"getColumns",value:function(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"branch",name:"Centro",flexGrow:1}]}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),a=Object.keys(this.temp[0]);if(a.splice(a.length-1),a.length){var c=this.temp.filter((function(e){for(var c=0;c<=a.length;c++){var n=a[c];if(e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=c}}},{key:"toNew",value:function(){this.openPopUp(!0)}},{key:"openPopUp",value:function(e,t){var a=this;this.dialog.open(ze,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo grupo":"Editar grupo"}}).afterClosed().subscribe((function(t){if(t){if(a.loader.open(),e){var c=new Re("",t.phoneGroup.name,t.phoneGroup.branch);a._phonegroupService.add(c).subscribe((function(e){e.phoneGroup&&(a.openSnackBar("Tel\xe9fono creado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")}))}else t.delete?a._phonegroupService.delete(t.phoneGroup._id).subscribe((function(e){e.phoneGroup&&(a.openSnackBar("Tel\xe9fono eliminado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")})):a._phonegroupService.edit(t.phoneGroup._id,t.phoneGroup).subscribe((function(e){e.phoneGroup&&(a.openSnackBar("Tel\xe9fono actualizado","Cerrar"),a.getPhones())}),(function(e){a.openSnackBar(e.message,"Cerrar")}));a.loader.close()}}))}},{key:"toProfile",value:function(e,t){"click"==e.type&&this._router.navigate(["/settings/list/phone/",e.row._id])}}]),e}(),We.\u0275fac=function(e){return new(e||We)(O.Vb(He),O.Vb(i.a),O.Vb(i.g),O.Vb(E.a),O.Vb(F.a),O.Vb(x.b))},We.\u0275cmp=O.Pb({type:We,selectors:[["app-deposit-list"]],features:[O.Fb([He])],decls:7,vars:7,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(O.bc(0,"mat-form-field",0),O.bc(1,"input",1),O.jc("keyup",(function(e){return t.updateFilter(e)})),O.ac(),O.ac(),O.bc(2,"div",2),O.bc(3,"button",3),O.jc("click",(function(e){return t.toNew()})),O.Vc(4,"Nuevo"),O.ac(),O.ac(),O.bc(5,"div",4),O.bc(6,"ngx-datatable",5),O.jc("activate",(function(e){return t.toProfile(e)})),O.ac(),O.ac()),2&e&&(O.Gb(6),O.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[C.a,r.b,b.b,p.d],encapsulation:2}),We),data:{title:"Lista de grupos",breadcrumb:"LISTA DE GRUPOS"}},{path:"list/phone/:id",component:qe,data:{title:"Lista de telefonos",breadcrumb:"LISTA DE TELEFONOS"}},{path:"deposit",loadChildren:function(){return a.e(21).then(a.bind(null,"RazQ")).then((function(e){return e.AppDepositModule}))},data:{title:"Deposito",breadcrumb:"DEPOSITO"}},{path:"item",loadChildren:function(){return Promise.all([a.e(0),a.e(11)]).then(a.bind(null,"fS6x")).then((function(e){return e.AppItemModule}))},data:{title:"Articulo",breadcrumb:"ARTICULOS"}},{path:"reason",loadChildren:function(){return Promise.all([a.e(0),a.e(22)]).then(a.bind(null,"Poif")).then((function(e){return e.AppReasonModule}))},data:{title:"Motivos",breadcrumb:"MOTIVOS"}},{path:"company",component:J,data:{title:"Departamento",breadcrumb:"DEPARTAMENTO"}},{path:"ticket/types",component:pe,data:{title:"Tipos y subtipos de ticket",breadcrumb:"TIPOS Y SUBTIPOS DE TICKETS"}},{path:"ticket/subtype/:id",component:Se,data:{title:"Subtipo de ticket",breadcrumb:"SUBTIPO DE TICKET"}},{path:"ticket/newsubtype/:id",component:je,data:{title:"Nuevo subtipo",breadcrumb:"NUEVO SUBTIPO"}}]}],Ke=a("5+WD");a.d(t,"AppSettingsModule",(function(){return Ye}));var Qe,Ye=((Qe=function e(){_classCallCheck(this,e)}).\u0275mod=O.Tb({type:Qe}),Qe.\u0275inj=O.Sb({factory:function(e){return new(e||Qe)},imports:[[n.c,T.t,C.c,be.b,T.j,m.b,u.a,g.b,S.b,s.a,l.k,w.a,Ke.d,y.d,_.b,d.b,b.c,h.e,M.a,o.b,f.c,r.c,k.a,p.e,v.a,i.k.forChild(Xe)]]}),Qe)}}]);