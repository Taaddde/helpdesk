(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{tt8O:function(t,e,c){"use strict";c.r(e);var n=c("ofXK"),a=c("tyNb"),i=c("Fj/B"),r=c("fXoL"),s=c("tk/3");let o=(()=>{class t{constructor(t){this.http=t}getCountries(t){return this.http.get("https://restcountries.eu/rest/v2/name/"+t)}}return t.\u0275fac=function(e){return new(e||t)(r.fc(s.c))},t.\u0275prov=r.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=c("BlIn"),m=c("gU78"),g=c("3sEA"),l=c("YFeJ"),h=c("wd/R"),b=c("dNgK"),d=c("lDzL");function f(t,e){1&t&&r.Vc(0," N\xfamero ")}function p(t,e){1&t&&r.Vc(0),2&t&&r.Xc(" ",e.row.numTicket," ")}function w(t,e){1&t&&r.Vc(0," Solicitante ")}function T(t,e){if(1&t&&r.Wb(0,"img",15),2&t){const t=r.nc().row,e=r.nc();r.vc("src",e.url+"user/image/"+t.requester.image,r.Oc)}}function v(t,e){1&t&&r.Wb(0,"img",16)}function k(t,e){if(1&t&&(r.Tc(0,T,1,1,"img",13),r.Tc(1,v,1,0,"img",14),r.Vc(2),r.Wb(3,"span"),r.Vc(4)),2&t){const t=e.row;r.uc("ngIf",t.requester&&"null"!=t.requester.image),r.Gb(1),r.uc("ngIf",!t.requester||"null"==t.requester.image),r.Gb(1),r.Xc(" ",t.requester.name," "),r.Gb(2),r.Xc(" ",t.requester.surname," ")}}function x(t,e){1&t&&r.Vc(0," Asunto ")}function V(t,e){1&t&&r.Vc(0),2&t&&r.Xc(" ",e.row.sub," ")}function y(t,e){1&t&&r.Vc(0," Agente ")}function W(t,e){if(1&t&&r.Wb(0,"img",15),2&t){const t=r.nc(2).row,e=r.nc();r.vc("src",e.url+"user/image/"+t.agent.image,r.Oc)}}function G(t,e){1&t&&r.Wb(0,"img",16)}function S(t,e){if(1&t&&(r.Zb(0),r.Tc(1,W,1,1,"img",13),r.Tc(2,G,1,0,"img",14),r.Vc(3),r.Wb(4,"span"),r.Vc(5),r.Yb()),2&t){const t=r.nc().row;r.Gb(1),r.uc("ngIf",t.agent&&"null"!=t.agent.image),r.Gb(1),r.uc("ngIf",!t.agent||"null"==t.agent.image),r.Gb(1),r.Xc(" ",t.agent.name," "),r.Gb(2),r.Xc(" ",t.agent.surname," ")}}function I(t,e){}function H(t,e){if(1&t&&(r.Tc(0,S,6,4,"ng-container",17),r.Tc(1,I,0,0,"ng-template",null,18,r.Uc)),2&t){const t=e.row,c=r.Jc(2);r.uc("ngIf",t.agent)("ngIfElse",c)}}function X(t,e){1&t&&r.Vc(0," Estado ")}function D(t,e){1&t&&r.Vc(0),2&t&&r.Xc(" ",e.row.status," ")}function Y(t,e){1&t&&r.Vc(0," Fecha ")}function q(t,e){if(1&t&&r.Vc(0),2&t){const t=e.row,c=r.nc();r.Xc(" ",c.changeDate(t.createDate)," ")}}function B(t,e){1&t&&r.Vc(0," Novedad ")}function M(t,e){if(1&t&&r.Vc(0),2&t){const t=e.row,c=r.nc();r.Xc(" ",c.changeDate(t.lastActivity)," ")}}const _=[{path:"",component:(()=>{class t{constructor(t,e,c,n,a,i,r){this.searchService=t,this.countryService=e,this._ticketService=c,this.snackBar=n,this._userService=a,this._router=i,this.loader=r,this.url=l.a.url,this.token=a.getToken(),this.identity=a.getIdentity()}ngOnInit(){this.searchTermSub=this.searchService.searchTerm$.subscribe(t=>{let e={sub:t,company:this.identity.company._id};t.length>=3&&(this.loader.open("Cargando tickets"),this._ticketService.getUnpaginateList(this.token,e).subscribe(t=>{t.tickets&&(this.tickets=t.tickets,this.loader.close())},t=>{this.openSnackBar(t.message,"Cerrar")}))})}changeDate(t){return h(t,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}ngOnDestroy(){this.searchTermSub&&this.searchTermSub.unsubscribe()}goToTicket(t){"click"==t.type&&this._router.navigate(["/ticket/gestion",t.row._id])}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(i.a),r.Vb(o),r.Vb(u.a),r.Vb(b.a),r.Vb(m.a),r.Vb(a.g),r.Vb(g.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-result-page"]],features:[r.Fb([m.a])],decls:27,vars:17,consts:[[1,"m-333"],[1,"mt-0"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","scrollbarH","activate"],["name","num",3,"maxWidth"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","requester",3,"maxWidth"],["name","sub",3,"maxWidth"],["name","agent",3,"maxWidth"],["name","status",3,"maxWidth"],["name","createDate",3,"maxWidth"],["name","lastActivity",3,"maxWidth"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],[4,"ngIf","ngIfElse"],["noAgent",""]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"h6",1),r.Vc(2),r.oc(3,"async"),r.ac(),r.ac(),r.bc(4,"div",2),r.bc(5,"ngx-datatable",3),r.jc("activate",(function(t){return e.goToTicket(t)})),r.bc(6,"ngx-datatable-column",4),r.Tc(7,f,1,0,"ng-template",5),r.Tc(8,p,1,1,"ng-template",6),r.ac(),r.bc(9,"ngx-datatable-column",7),r.Tc(10,w,1,0,"ng-template",5),r.Tc(11,k,5,4,"ng-template",6),r.ac(),r.bc(12,"ngx-datatable-column",8),r.Tc(13,x,1,0,"ng-template",5),r.Tc(14,V,1,1,"ng-template",6),r.ac(),r.bc(15,"ngx-datatable-column",9),r.Tc(16,y,1,0,"ng-template",5),r.Tc(17,H,3,2,"ng-template",6),r.ac(),r.bc(18,"ngx-datatable-column",10),r.Tc(19,X,1,0,"ng-template",5),r.Tc(20,D,1,1,"ng-template",6),r.ac(),r.bc(21,"ngx-datatable-column",11),r.Tc(22,Y,1,0,"ng-template",5),r.Tc(23,q,1,1,"ng-template",6),r.ac(),r.bc(24,"ngx-datatable-column",12),r.Tc(25,B,1,0,"ng-template",5),r.Tc(26,M,1,1,"ng-template",6),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Xc('Buscando coincidencias "',r.pc(3,15,e.searchService.searchTerm$),'"'),r.Gb(3),r.uc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",e.tickets)("scrollbarH",!0),r.Gb(1),r.uc("maxWidth",70),r.Gb(3),r.uc("maxWidth",250),r.Gb(3),r.uc("maxWidth",350),r.Gb(3),r.uc("maxWidth",250),r.Gb(3),r.uc("maxWidth",100),r.Gb(3),r.uc("maxWidth",150),r.Gb(3),r.uc("maxWidth",150))},directives:[d.d,d.b,d.c,d.a,n.m],pipes:[n.b],styles:[""]}),t})()}];let A=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[a.k.forChild(_)],a.k]}),t})();var O=c("Wp6s");c.d(e,"SearchViewModule",(function(){return j}));let j=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},providers:[u.a],imports:[[O.e,n.c,d.e,A]]}),t})()}}]);