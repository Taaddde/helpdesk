<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="mytasks-tab" data-toggle="tab" (click)="changeState('my-tasks')" href="#mytasks" role="tab" aria-controls="home" aria-selected="true">Mis tareas</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="freetasks-tab" data-toggle="tab" (click)="changeState('tasks-free')" href="#freetasks" role="tab" aria-controls="profile" aria-selected="false">
        Tareas libres
        <span class="badge badge-danger badge-counter" *ngIf="countFree != 0">
          {{countFree}}+
        </span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="finishedtasks-tab" data-toggle="tab" (click)="changeState('tasks-finished')" href="#finishedtasks" role="tab" aria-controls="profile" aria-selected="false">Finalizados</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" (click)="newTask()" id="newtasks-tab" role="button">Nueva tarea</a>
    </li>
</ul>
<div class="tab-content" id="myTabContent">
<div class="tab-pane fade show active" id="mytasks" role="tabpanel" aria-labelledby="mytasks-tab">
  <app-my-tasks #myTasks *ngIf="state == 'my-tasks'"></app-my-tasks>
</div>
<div class="tab-pane fade" id="freetasks" role="tabpanel" aria-labelledby="freetasks-tab">
  <app-tasks-free *ngIf="state == 'tasks-free'"></app-tasks-free>
</div>
<div class="tab-pane fade" id="finishedtasks" role="tabpanel" aria-labelledby="finishedtasks-tab">
  <app-tasks-finished *ngIf="state == 'tasks-finished'"></app-tasks-finished>
</div>
</div>



<div role="dialog" tabindex="-1" id="task-new" class="modal fade">
  <div class="modal-dialog" role="document">
      <div class="modal-content" style="border: 1px solid #018dda">
          <div class="modal-header" style="background-color: #018dda;color: rgb(255,255,255);">
              <h4 class="modal-title">Nueva tarea</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
              <div class="modal-body">
                <form #taskForm="ngForm" (ngSubmit)="onSubmit()">
                  <div class="form-row">
                      <div class="col">
                          <div class="form-group">
                              <div class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" [(ngModel)]="repeat" id="formCheck-1" name="type" value="false" checked />
                                <label class="custom-control-label" for="formCheck-1">Una vez</label>
                              </div>
                              <div class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" [(ngModel)]="repeat" id="formCheck-2" name="type" value="true" />
                                <label class="custom-control-label" for="formCheck-2">Repetir</label>
                              </div>
                          </div>
                      </div>
                      <div class="col">
                          <div class="form-group">
                              <div class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" [(ngModel)]="task.priority" id="formCheck-3" name="priority" value="Normal" checked />
                                <label class="custom-control-label" for="formCheck-3">Normal</label>
                              </div>
                              <div class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" [(ngModel)]="task.priority" id="formCheck-4" name="priority" value="Urgente" />
                                <label class="custom-control-label" for="formCheck-4">Urgente</label>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="form-group" *ngIf="repeat == 'true'">
                    <div class="form-row">
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Lun</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="lun" #lun="ngModel" [(ngModel)]="dayOfWeek.lun"/></div>
                            </div>
                        </div>
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Mar</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="mar" #mar="ngModel" [(ngModel)]="dayOfWeek.mar"/></div>
                            </div>
                        </div>
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Mie</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="mie" #mie="ngModel" [(ngModel)]="dayOfWeek.mie"/></div>
                            </div>
                        </div>
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Jue</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="jue" #jue="ngModel" [(ngModel)]="dayOfWeek.jue"/></div>
                            </div>
                        </div>
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Vie</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="vie" #vie="ngModel" [(ngModel)]="dayOfWeek.vie"/></div>
                            </div>
                        </div>
                        <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
                            <div class="form-row">
                                <div class="col text-center"><label class="col-form-label">Sab</label></div>
                            </div>
                            <div class="form-row">
                                <div class="col text-center"><input type="checkbox" name="sab" #sab="ngModel" [(ngModel)]="dayOfWeek.sab"/></div>
                            </div>
                        </div>
                    </div>
                </div>
                  <div class="form-group">
                      <div class="input-group">
                          <div class="input-group-prepend"><span class="input-group-text">Nombre (*)</span>
                          </div>
                          <input #name="ngModel" name="name" [(ngModel)]="task.name" type="text" class="form-control" placeholder="Nombre de la tarea" />
                        </div>
                  </div>
                  <div class="form-group">
                    <textarea #desc="ngModel" name="desc" [(ngModel)]="task.desc" type="text" class="form-control" placeholder="Descripción (*)"></textarea>
                  </div>
                  <div class="form-group">
                      <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text">Etiqueta (*)</span>
                          </div>
                          <input #tag="ngModel" name="tag" [(ngModel)]="task.tag" type="text" type="text" class="form-control" placeholder="Enlaza tareas con etiquetas" />
                        </div>
                  </div>
                  <div class="form-group">
                      <div class="dropdown" style="margin-bottom: 5px;"><button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button">
                        <span *ngIf="task.teamWork == ''">Equipo responsable (*)</span>
                        <span *ngIf="task.teamWork != ''">{{teamName}}</span>
                      </button>
                          <div role="menu" class="dropdown-menu">
                            <a *ngFor="let team of teams" role="presentation" class="dropdown-item" (click)="getAgents(team)">{{team.name}}</a>
                          </div>
                      </div>
                      <div class="dropdown"><button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button">
                        <span *ngIf="!task.userWork">Agente responsable</span>
                        <span *ngIf="task.userWork">{{agentName}}</span>
                      </button>
                          <div role="menu" class="dropdown-menu">
                            <a *ngFor="let agent of agents" role="presentation" class="dropdown-item" (click)="selectAgent(agent)" >{{agent.name}} {{agent.surname}}</a>
                          </div>
                      </div>
                  </div>
                  <div class="form-group">
                    <div class="input-group" *ngIf="repeat != 'true'">
                      <div class="input-group-prepend"><span class="input-group-text">Fecha de realización (*)</span></div>
                      <div class="input-group-append"><button class="btn btn-primary" type="button" style="width: 200px;">
                        <input class="form-control" #dateLimit="ngModel" name="name" [(ngModel)]="task.dateWork" type="date" /></button>
                      </div>
                    </div>
                      <div class="input-group">
                          <div class="input-group-prepend"><span class="input-group-text">Fecha límite (*)</span></div>
                          <div class="input-group-append"><button class="btn btn-primary" type="button" style="width: 200px;">
                            <input class="form-control" #dateLimit="ngModel" name="name" [(ngModel)]="task.dateLimit" type="date" /></button>
                          </div>
                      </div>
                  </div>
                  <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-dismiss="modal">Cerrar</button>
                    <button class="btn btn-primary" type="submit">Generar tarea</button>
                  </div>
                </form>
              </div>
      </div>
  </div>
</div>


<app-message></app-message>
