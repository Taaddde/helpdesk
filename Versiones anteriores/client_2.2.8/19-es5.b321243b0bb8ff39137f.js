function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{tt8O:function(e,t,c){"use strict";c.r(t);var n,a=c("ofXK"),i=c("tyNb"),r=c("Fj/B"),o=c("fXoL"),s=c("tk/3"),u=((n=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getCountries",value:function(e){return this.http.get("https://restcountries.eu/rest/v2/name/"+e)}}]),e}()).\u0275fac=function(e){return new(e||n)(o.fc(s.c))},n.\u0275prov=o.Rb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),l=c("BlIn"),m=c("gU78"),g=c("3sEA"),h=c("YFeJ"),f=c("wd/R"),b=c("dNgK"),d=c("lDzL");function p(e,t){1&e&&o.Vc(0," N\xfamero ")}function v(e,t){1&e&&o.Vc(0),2&e&&o.Xc(" ",t.row.numTicket," ")}function k(e,t){1&e&&o.Vc(0," Solicitante ")}function w(e,t){if(1&e&&o.Wb(0,"img",15),2&e){var c=o.nc().row,n=o.nc();o.vc("src",n.url+"user/image/"+c.requester.image,o.Oc)}}function T(e,t){1&e&&o.Wb(0,"img",16)}function y(e,t){if(1&e&&(o.Tc(0,w,1,1,"img",13),o.Tc(1,T,1,0,"img",14),o.Vc(2),o.Wb(3,"span"),o.Vc(4)),2&e){var c=t.row;o.uc("ngIf",c.requester&&"null"!=c.requester.image),o.Gb(1),o.uc("ngIf",!c.requester||"null"==c.requester.image),o.Gb(1),o.Xc(" ",c.requester.name," "),o.Gb(2),o.Xc(" ",c.requester.surname," ")}}function x(e,t){1&e&&o.Vc(0," Asunto ")}function V(e,t){1&e&&o.Vc(0),2&e&&o.Xc(" ",t.row.sub," ")}function W(e,t){1&e&&o.Vc(0," Agente ")}function C(e,t){if(1&e&&o.Wb(0,"img",15),2&e){var c=o.nc(2).row,n=o.nc();o.vc("src",n.url+"user/image/"+c.agent.image,o.Oc)}}function _(e,t){1&e&&o.Wb(0,"img",16)}function G(e,t){if(1&e&&(o.Zb(0),o.Tc(1,C,1,1,"img",13),o.Tc(2,_,1,0,"img",14),o.Vc(3),o.Wb(4,"span"),o.Vc(5),o.Yb()),2&e){var c=o.nc().row;o.Gb(1),o.uc("ngIf",c.agent&&"null"!=c.agent.image),o.Gb(1),o.uc("ngIf",!c.agent||"null"==c.agent.image),o.Gb(1),o.Xc(" ",c.agent.name," "),o.Gb(2),o.Xc(" ",c.agent.surname," ")}}function S(e,t){}function I(e,t){if(1&e&&(o.Tc(0,G,6,4,"ng-container",17),o.Tc(1,S,0,0,"ng-template",null,18,o.Uc)),2&e){var c=t.row,n=o.Jc(2);o.uc("ngIf",c.agent)("ngIfElse",n)}}function H(e,t){1&e&&o.Vc(0," Estado ")}function X(e,t){1&e&&o.Vc(0),2&e&&o.Xc(" ",t.row.status," ")}function D(e,t){1&e&&o.Vc(0," Fecha ")}function Y(e,t){if(1&e&&o.Vc(0),2&e){var c=t.row,n=o.nc();o.Xc(" ",n.changeDate(c.createDate)," ")}}function q(e,t){1&e&&o.Vc(0," Novedad ")}function B(e,t){if(1&e&&o.Vc(0),2&e){var c=t.row,n=o.nc();o.Xc(" ",n.changeDate(c.lastActivity)," ")}}var M,A,O=[{path:"",component:(M=function(){function e(t,c,n,a,i,r,o){_classCallCheck(this,e),this.searchService=t,this.countryService=c,this._ticketService=n,this.snackBar=a,this._userService=i,this._router=r,this.loader=o,this.url=h.a.url,this.token=i.getToken(),this.identity=i.getIdentity()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.searchTermSub=this.searchService.searchTerm$.subscribe((function(t){var c={sub:t,company:e.identity.company._id};t.length>=3&&(e.loader.open("Cargando tickets"),e._ticketService.getUnpaginateList(e.token,c).subscribe((function(t){t.tickets&&(e.tickets=t.tickets,e.loader.close())}),(function(t){e.openSnackBar(t.message,"Cerrar")})))}))}},{key:"changeDate",value:function(e){return f(e,"YYYY-MM-DD HH:mm").format("DD-MM-YYYY HH:mm")}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1e4})}},{key:"ngOnDestroy",value:function(){this.searchTermSub&&this.searchTermSub.unsubscribe()}},{key:"goToTicket",value:function(e){"click"==e.type&&this._router.navigate(["/ticket/gestion",e.row._id])}}]),e}(),M.\u0275fac=function(e){return new(e||M)(o.Vb(r.a),o.Vb(u),o.Vb(l.a),o.Vb(b.a),o.Vb(m.a),o.Vb(i.g),o.Vb(g.a))},M.\u0275cmp=o.Pb({type:M,selectors:[["app-result-page"]],features:[o.Fb([m.a])],decls:27,vars:17,consts:[[1,"m-333"],[1,"mt-0"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","scrollbarH","activate"],["name","num",3,"maxWidth"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","requester",3,"maxWidth"],["name","sub",3,"maxWidth"],["name","agent",3,"maxWidth"],["name","status",3,"maxWidth"],["name","createDate",3,"maxWidth"],["name","lastActivity",3,"maxWidth"],["class","rounded-circle mr-2","width","30","height","30",3,"src",4,"ngIf"],["class","rounded-circle mr-2","width","30","height","30","src","assets/images/system/user-placeholder.png",4,"ngIf"],["width","30","height","30",1,"rounded-circle","mr-2",3,"src"],["width","30","height","30","src","assets/images/system/user-placeholder.png",1,"rounded-circle","mr-2"],[4,"ngIf","ngIfElse"],["noAgent",""]],template:function(e,t){1&e&&(o.bc(0,"div",0),o.bc(1,"h6",1),o.Vc(2),o.oc(3,"async"),o.ac(),o.ac(),o.bc(4,"div",2),o.bc(5,"ngx-datatable",3),o.jc("activate",(function(e){return t.goToTicket(e)})),o.bc(6,"ngx-datatable-column",4),o.Tc(7,p,1,0,"ng-template",5),o.Tc(8,v,1,1,"ng-template",6),o.ac(),o.bc(9,"ngx-datatable-column",7),o.Tc(10,k,1,0,"ng-template",5),o.Tc(11,y,5,4,"ng-template",6),o.ac(),o.bc(12,"ngx-datatable-column",8),o.Tc(13,x,1,0,"ng-template",5),o.Tc(14,V,1,1,"ng-template",6),o.ac(),o.bc(15,"ngx-datatable-column",9),o.Tc(16,W,1,0,"ng-template",5),o.Tc(17,I,3,2,"ng-template",6),o.ac(),o.bc(18,"ngx-datatable-column",10),o.Tc(19,H,1,0,"ng-template",5),o.Tc(20,X,1,1,"ng-template",6),o.ac(),o.bc(21,"ngx-datatable-column",11),o.Tc(22,D,1,0,"ng-template",5),o.Tc(23,Y,1,1,"ng-template",6),o.ac(),o.bc(24,"ngx-datatable-column",12),o.Tc(25,q,1,0,"ng-template",5),o.Tc(26,B,1,1,"ng-template",6),o.ac(),o.ac(),o.ac()),2&e&&(o.Gb(2),o.Xc('Buscando coincidencias "',o.pc(3,15,t.searchService.searchTerm$),'"'),o.Gb(3),o.uc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",t.tickets)("scrollbarH",!0),o.Gb(1),o.uc("maxWidth",70),o.Gb(3),o.uc("maxWidth",250),o.Gb(3),o.uc("maxWidth",350),o.Gb(3),o.uc("maxWidth",250),o.Gb(3),o.uc("maxWidth",100),o.Gb(3),o.uc("maxWidth",150),o.Gb(3),o.uc("maxWidth",150))},directives:[d.d,d.b,d.c,d.a,a.m],pipes:[a.b],styles:[""]}),M)}],j=((A=function e(){_classCallCheck(this,e)}).\u0275mod=o.Tb({type:A}),A.\u0275inj=o.Sb({factory:function(e){return new(e||A)},imports:[[i.k.forChild(O)],i.k]}),A),E=c("Wp6s");c.d(t,"SearchViewModule",(function(){return F}));var P,F=((P=function e(){_classCallCheck(this,e)}).\u0275mod=o.Tb({type:P}),P.\u0275inj=o.Sb({factory:function(e){return new(e||P)},providers:[l.a],imports:[[E.e,a.c,d.e,j]]}),P)}}]);