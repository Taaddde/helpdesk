(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Ty4v:function(e,t,c){"use strict";c.r(t);var a=c("ofXK"),n=c("tyNb"),i=c("bSwM"),o=c("qFsG"),r=c("M9IT"),s=c("Dh3D"),l=c("+0xr"),u=c("lDzL"),b=c("NFeN"),d=c("bTqV"),p=c("Wp6s"),m=c("f0Cb"),h=c("wZkO"),g=c("7EHt"),f=c("MutI"),y=c("YUcS"),k=c("aYsj"),T=c("kmnG"),C=c("d3UM"),S=c("3Pt+"),v=c("1jcm"),M=c("Qu3c"),V=c("PCNd"),x=c("gU78"),G=c("O4PR"),w=c("0IaG"),_=c("1yaQ"),I=c("FKr1");class A{constructor(e,t,c,a){this._id=e,this.name=t,this.initials=c,this.email=a}}var B=c("fXoL"),j=c("dNgK"),F=c("XiUz");let O=(()=>{class e{constructor(e,t,c,a){this.data=e,this.dialogRef=t,this._userService=c,this.snackBar=a,this.sector=new A("","","","")}ngOnInit(){this.buildSector(this.data.payload)}buildSector(e){e&&(this.sector=e)}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}submit(){if(!this.check())return this.openSnackBar("Faltan campos para completar","Cerrar");this.dialogRef.close({sector:this.sector})}check(){return""!=this.sector.name&&""!=this.sector.initials&&""!=this.sector.email}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(w.a),B.Vb(w.g),B.Vb(x.a),B.Vb(j.a))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-sector-popop"]],features:[B.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a])],decls:17,vars:4,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["type","text","placeholder","Iniciales","aria-label","Text","matInput","","name","initials",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","email",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(B.bc(0,"h1",0),B.Vc(1),B.ac(),B.bc(2,"mat-card",1),B.bc(3,"mat-card-content"),B.bc(4,"form"),B.bc(5,"div",2),B.bc(6,"div",3),B.bc(7,"mat-form-field",4),B.bc(8,"input",5),B.jc("ngModelChange",(function(e){return t.sector.name=e})),B.ac(),B.ac(),B.ac(),B.bc(9,"div",3),B.bc(10,"mat-form-field",4),B.bc(11,"input",6),B.jc("ngModelChange",(function(e){return t.sector.initials=e})),B.ac(),B.ac(),B.ac(),B.bc(12,"div",3),B.bc(13,"mat-form-field",4),B.bc(14,"input",7),B.jc("ngModelChange",(function(e){return t.sector.email=e})),B.ac(),B.ac(),B.ac(),B.ac(),B.bc(15,"button",8),B.jc("click",(function(e){return t.submit()})),B.Vc(16,"Guardar"),B.ac(),B.ac(),B.ac(),B.ac()),2&e&&(B.Gb(1),B.Wc(t.data.title),B.Gb(7),B.uc("ngModel",t.sector.name),B.Gb(3),B.uc("ngModel",t.sector.initials),B.Gb(3),B.uc("ngModel",t.sector.email))},directives:[p.a,p.c,S.x,S.o,S.p,F.d,F.b,T.a,o.b,S.c,S.n,S.q,d.b],encapsulation:2}),e})();var E=c("3sEA");function q(e,t){if(1&e){const e=B.cc();B.bc(0,"div",5),B.bc(1,"button",6),B.jc("click",(function(t){return B.Mc(e),B.nc().toNew()})),B.Vc(2,"Nuevo"),B.ac(),B.ac()}}let D=(()=>{class e{constructor(e,t,c,a,n,i,o){this._userService=e,this._sectorService=t,this._route=c,this._router=a,this.loader=n,this.snackBar=i,this.dialog=o,this.rows=[],this.columns=[],this.temp=[],this.canCreate=!1,this.token=e.getToken(),this.identity=e.getIdentity()}ngOnInit(){this.getColumns(),this.getSectors(),"ROLE_ADMIN"==this.identity.role&&(this.canCreate=!0)}getSectors(){this._sectorService.getList(this.token).subscribe(e=>{e.sectors&&(this.rows=e.sectors,this.temp=e.sectors)},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}getColumns(){this.columns=[{prop:"name",name:"Nombre",flexGrow:2},{prop:"initials",name:"Iniciales",flexGrow:1},{prop:"email",name:"Email",flexGrow:2}]}updateFilter(e){const t=e.target.value.toLowerCase();var c=Object.keys(this.temp[0]);if(c.splice(c.length-1),!c.length)return;const a=this.temp.filter((function(e){for(let a=0;a<=c.length;a++){let n=c[a];if(e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=a}toNew(){this.openPopUp(!0)}openPopUp(e,t){this.dialog.open(O,{width:"720px",disableClose:!1,data:{payload:t,title:e?"Nuevo sector":"Editar sector"}}).afterClosed().subscribe(t=>{t&&(this.loader.open(),e?this._sectorService.add(this.token,t.sector).subscribe(e=>{e.sector&&(this.openSnackBar("Sector creado","Cerrar"),this.getSectors())},e=>{this.openSnackBar(e.message,"Cerrar")}):this._sectorService.edit(this.token,t.sector._id,t.sector).subscribe(e=>{e.sector&&(this.openSnackBar("Sector actualizado","Cerrar"),this.getSectors())},e=>{this.openSnackBar(e.message,"Cerrar")}),this.loader.close())})}toProfile(e,t){"click"==e.type&&this.openPopUp(!1,e.row)}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(x.a),B.Vb(G.a),B.Vb(n.a),B.Vb(n.g),B.Vb(E.a),B.Vb(j.a),B.Vb(w.b))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-sector-list"]],features:[B.Fb([x.a,G.a])],decls:5,vars:8,consts:[[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Filtrar por todas las columnas","value","",3,"keyup"],["class","profile-actions mb-1","style","margin-left: 5px;",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"],[1,"profile-actions","mb-1",2,"margin-left","5px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(B.bc(0,"mat-form-field",0),B.bc(1,"input",1),B.jc("keyup",(function(e){return t.updateFilter(e)})),B.ac(),B.ac(),B.Tc(2,q,3,0,"div",2),B.bc(3,"div",3),B.bc(4,"ngx-datatable",4),B.jc("activate",(function(e){return t.toProfile(e)})),B.ac(),B.ac()),2&e&&(B.Gb(2),B.uc("ngIf",t.canCreate),B.Gb(2),B.uc("columnMode","flex")("headerHeight",40)("footerHeight",50)("rowHeight",50)("limit",7)("rows",t.rows)("columns",t.columns))},directives:[T.a,o.b,a.m,u.d,d.b],encapsulation:2}),e})();var P=c("wd/R"),L=c("YFeJ"),N=c("Q2c7"),R=c("wkIo");function U(e,t){if(1&e){const e=B.cc();B.bc(0,"div",20),B.Wb(1,"img",21),B.bc(2,"button",22),B.jc("click",(function(t){return B.Mc(e),B.nc().openAttachment()})),B.bc(3,"mat-icon"),B.Vc(4,"edit"),B.ac(),B.ac(),B.ac()}}function H(e,t){if(1&e){const e=B.cc();B.bc(0,"div",20),B.Wb(1,"img",23),B.bc(2,"button",22),B.jc("click",(function(t){return B.Mc(e),B.nc().openAttachment()})),B.bc(3,"mat-icon"),B.Vc(4,"edit"),B.ac(),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(1),B.vc("src",e.url+"company/image/"+e.company.image,B.Oc)}}function $(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-form-field",11),B.bc(1,"input",24),B.jc("ngModelChange",(function(t){return B.Mc(e),B.nc().company.password=t})),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(1),B.uc("readonly",!e.isAdmin)("ngModel",e.company.password)}}function W(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-form-field",11),B.bc(1,"input",25),B.jc("ngModelChange",(function(t){return B.Mc(e),B.nc().company.chatScheduleFrom=t})),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(1),B.uc("readonly",!e.isAdmin)("ngModel",e.company.chatScheduleFrom)}}function X(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-form-field",11),B.bc(1,"input",26),B.jc("ngModelChange",(function(t){return B.Mc(e),B.nc().company.chatScheduleTo=t})),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(1),B.uc("readonly",!e.isAdmin)("ngModel",e.company.chatScheduleTo)}}let z=(()=>{class e{constructor(e,t,c,a,n){this._userService=e,this._companyService=t,this._uploadService=c,this._route=a,this.snackBar=n,this.token=e.getToken(),this.identity=e.getIdentity(),this.url=L.a.url,this.isAdmin=!1}ngOnInit(){this.getCompany()}getCompany(){this._companyService.getOne(this.token,this.identity.company._id).subscribe(e=>{e.company&&(this.company=e.company,"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0))},e=>{this.openSnackBar(e.message,"Cerrar")})}editCompany(){!this.company.chat||this.company.chat&&P(this.company.chatScheduleFrom,"HH:mm").isValid()&&P(this.company.chatScheduleTo,"HH:mm").isValid()?(0==this.company.mailSender&&(this.company.password=""),this._companyService.edit(this.token,this.company._id,this.company).subscribe(e=>{e.company&&this.openSnackBar("Datos actualizados","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}openAttachment(){document.getElementById("attachment").click()}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}fileChangeEvent(e){this.filesToUpload=e.target.files,this._uploadService.makeFileRequest(this.url+"company/image/"+this.company._id,[],this.filesToUpload,this.token,"image"),setTimeout(()=>{this.getCompany(),this.openSnackBar("Foto de departamento actualizada","Cerrar")},1e3)}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(x.a),B.Vb(R.a),B.Vb(N.a),B.Vb(n.a),B.Vb(j.a))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-user-profile"]],features:[B.Fb([x.a,R.a,N.a])],decls:38,vars:16,consts:[["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","300px","fxFlex.gt-sm","50"],[1,"profile-sidebar","mb-1","pb-0"],["class","propic text-center",4,"ngIf"],["id","attachment","type","file","accept","image/*",2,"display","none",3,"change"],[1,"profile-title","text-center","mb-1",2,"margin-top","20px"],[1,"main-title"],["fxFlex","100","fxFlex.gt-sm","100","fxFlex.gt-md","calc(100% - 300px)"],[1,"p-0"],["label","Informaci\xf3n"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["matInput","","name","email","type","text","placeholder","Email",3,"readonly","ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Servidor de correo"],["name","mailSender",3,"ngModel","color","disabled","ngModelChange"],["class","full-width",4,"ngIf"],["label","Chat online"],["name","chat",3,"ngModel","color","disabled","ngModelChange"],[1,"propic","text-center"],["src","assets/images/system/company-placeholder.png"],["mat-mini-fab","","color","accent",2,"position","relative","left","-50px","top","50px",3,"click"],[3,"src"],["matInput","","name","name","type","password","placeholder","Contrase\xf1a",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleFrom","type","text","placeholder","08:30",3,"readonly","ngModel","ngModelChange"],["matInput","","name","chatScheduleTo","type","text","placeholder","18:00",3,"readonly","ngModel","ngModelChange"]],template:function(e,t){1&e&&(B.bc(0,"div",0),B.bc(1,"div",1),B.bc(2,"mat-card",2),B.Tc(3,U,5,0,"div",3),B.Tc(4,H,5,1,"div",3),B.bc(5,"input",4),B.jc("change",(function(e){return t.fileChangeEvent(e)})),B.ac(),B.bc(6,"div",5),B.bc(7,"div",6),B.Vc(8),B.ac(),B.ac(),B.ac(),B.ac(),B.bc(9,"div",7),B.bc(10,"mat-card",8),B.bc(11,"mat-tab-group"),B.bc(12,"mat-tab",9),B.bc(13,"mat-card-content",10),B.bc(14,"form"),B.bc(15,"mat-form-field",11),B.bc(16,"input",12),B.jc("ngModelChange",(function(e){return t.company.name=e})),B.ac(),B.ac(),B.bc(17,"mat-form-field",11),B.bc(18,"input",13),B.jc("ngModelChange",(function(e){return t.company.email=e})),B.ac(),B.ac(),B.ac(),B.bc(19,"button",14),B.jc("click",(function(e){return t.editCompany()})),B.Vc(20,"Guardar"),B.ac(),B.ac(),B.ac(),B.bc(21,"mat-tab",15),B.bc(22,"mat-card-content",10),B.bc(23,"form"),B.bc(24,"mat-checkbox",16),B.jc("ngModelChange",(function(e){return t.company.mailSender=e})),B.Vc(25,"Habilitar env\xedo de correos electr\xf3nicos "),B.ac(),B.Tc(26,$,2,2,"mat-form-field",17),B.ac(),B.bc(27,"button",14),B.jc("click",(function(e){return t.editCompany()})),B.Vc(28,"Guardar"),B.ac(),B.ac(),B.ac(),B.bc(29,"mat-tab",18),B.bc(30,"mat-card-content",10),B.bc(31,"form"),B.bc(32,"mat-checkbox",19),B.jc("ngModelChange",(function(e){return t.company.chat=e})),B.Vc(33,"Habilitar env\xedo de correos electr\xf3nicos "),B.ac(),B.Tc(34,W,2,2,"mat-form-field",17),B.Tc(35,X,2,2,"mat-form-field",17),B.ac(),B.bc(36,"button",14),B.jc("click",(function(e){return t.editCompany()})),B.Vc(37,"Guardar"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()),2&e&&(B.Gb(3),B.uc("ngIf","null"==t.company.image),B.Gb(1),B.uc("ngIf","null"!=t.company.image),B.Gb(4),B.Wc(t.company.name),B.Gb(8),B.uc("readonly",!t.isAdmin)("ngModel",t.company.name),B.Gb(2),B.uc("readonly",!t.isAdmin)("ngModel",t.company.email),B.Gb(6),B.uc("ngModel",t.company.mailSender)("color","primary")("disabled",!t.isAdmin),B.Gb(2),B.uc("ngIf",t.company.mailSender),B.Gb(6),B.uc("ngModel",t.company.chat)("color","primary")("disabled",!t.isAdmin),B.Gb(2),B.uc("ngIf",t.company.chat),B.Gb(1),B.uc("ngIf",t.company.chat))},directives:[F.d,F.b,p.a,a.m,h.b,h.a,p.c,S.x,S.o,S.p,T.a,o.b,S.c,S.n,S.q,d.b,i.a,b.a],encapsulation:2}),e})();var K=c("rpG9"),Q=c("Xwq+");class Y{constructor(e,t,c){this._id=e,this.name=t,this.company=c}}class J{constructor(e,t,c,a,n,i,o,r,s,l,u,b,d){this._id=e,this.name=t,this.team=c,this.resolveDays=a,this.typeTicket=n,this.checks=i,this.goodChecks=o,this.requireAttach=r,this.desc=s,this.autoSub=l,this.autoDesc=u,this.autoChange=b,this.workTime=d}}var Z=c("3kSh");let ee=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t,this.type=new Y("","","")}ngOnInit(){this.build(this.data.payload)}build(e){e&&(this.type=e)}submit(){this.dialogRef.close({type:this.type})}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(w.a),B.Vb(w.g))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-type-popup"]],features:[B.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a}])],decls:12,vars:2,consts:[["matDialogTitle",""],[1,"p-0"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["type","text","placeholder","Nombre","aria-label","Text","matInput","","name","name",3,"ngModel","ngModelChange"],["fxLayout","row"],["mat-raised-button","","color","primary","matStepperNext","",3,"click"]],template:function(e,t){1&e&&(B.bc(0,"h1",0),B.Vc(1),B.ac(),B.bc(2,"mat-card",1),B.bc(3,"mat-card-content"),B.bc(4,"form"),B.bc(5,"div",2),B.bc(6,"div",3),B.bc(7,"mat-form-field",4),B.bc(8,"input",5),B.jc("ngModelChange",(function(e){return t.type.name=e})),B.ac(),B.ac(),B.ac(),B.bc(9,"div",6),B.bc(10,"button",7),B.jc("click",(function(e){return t.submit()})),B.Vc(11,"Guardar"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()),2&e&&(B.Gb(1),B.Wc(t.data.title),B.Gb(7),B.uc("ngModel",t.type.name))},directives:[p.a,p.c,S.x,S.o,S.p,F.d,F.b,T.a,o.b,S.c,S.n,S.q,d.b],encapsulation:2}),e})();function te(e,t){if(1&e&&(B.bc(0,"div",8),B.Vc(1),B.ac()),2&e){const e=B.nc().$implicit;B.Gb(1),B.Xc(" ",e.team.name," ")}}const ce=function(e){return["/settings/ticket/subtype",e]};function ae(e,t){if(1&e&&(B.bc(0,"mat-list-item"),B.bc(1,"button",7),B.bc(2,"a",3),B.bc(3,"mat-icon",1),B.Vc(4,"settings"),B.ac(),B.ac(),B.ac(),B.bc(5,"div",8),B.Vc(6),B.ac(),B.Tc(7,te,2,1,"div",9),B.ac()),2&e){const e=t.$implicit;B.Gb(2),B.uc("routerLink",B.Ac(3,ce,e._id)),B.Gb(4),B.Wc(e.name),B.Gb(1),B.uc("ngIf",e.team)}}const ne=function(e){return["/settings/ticket/newsubtype",e]};function ie(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-expansion-panel"),B.bc(1,"mat-expansion-panel-header"),B.Vc(2),B.ac(),B.bc(3,"mat-list"),B.Tc(4,ae,8,5,"mat-list-item",2),B.bc(5,"mat-list-item"),B.bc(6,"a",3),B.bc(7,"button",4),B.bc(8,"mat-icon",1),B.Vc(9,"add"),B.ac(),B.ac(),B.ac(),B.bc(10,"button",5),B.jc("click",(function(c){B.Mc(e);const a=t.$implicit;return B.nc().openPopUp(a,!1)})),B.bc(11,"mat-icon",1),B.Vc(12,"settings"),B.ac(),B.ac(),B.bc(13,"button",6),B.jc("click",(function(c){B.Mc(e);const a=t.$implicit;return B.nc().deleteType(a)})),B.bc(14,"mat-icon",1),B.Vc(15,"delete"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()}if(2&e){const e=t.$implicit,c=t.index,a=B.nc();B.Gb(2),B.Xc(" ",e.name," "),B.Gb(2),B.uc("ngForOf",a.subtypes[c]),B.Gb(2),B.uc("routerLink",B.Ac(6,ne,e._id)),B.Gb(1),B.uc("matTooltip","Nuevo subtipo en "+e.name),B.Gb(3),B.uc("matTooltip","Configurar tipo "+e.name),B.Gb(3),B.uc("matTooltip","Eliminar tipo "+e.name)}}let oe=(()=>{class e{constructor(e,t,c,a,n,i,o){this.dialog=e,this.loader=t,this._userService=c,this._typeTicketService=a,this._subTypeTicketService=n,this.confirmService=i,this.snackBar=o,this.token=c.getToken(),this.identity=c.getIdentity(),this.url=L.a.url,this.subtypes=new Array,this.newType=new Y("","",this.identity.company._id),this.newSubtype=new J("","","",0,"",String[""],0,!1,"","","",!1,null)}ngOnInit(){this.getTypes()}getTypes(){this._typeTicketService.getList(this.token,this.identity.company._id).subscribe(e=>{if(e.typeTickets){this.types=e.typeTickets;for(let e=0;e<this.types.length;e++)this.getSubTypes(this.types[e]._id,e)}},e=>{this.openSnackBar(e.message,"Cerrar")})}getSubTypes(e,t){this._subTypeTicketService.getList(this.token,e).subscribe(e=>{e.subTypeTickets&&this.subtypes.push(e.subTypeTickets)},e=>{this.openSnackBar(e.message,"Cerrar")})}deleteType(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar el tipo "+e.name+"?"}).subscribe(t=>{t&&this._typeTicketService.delete(this.token,e._id).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo eliminado","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addType(e){let t=new Y("",e,this.identity.company._id);this._typeTicketService.add(this.token,t).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo de ticket a\xf1adido","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}editType(e,t){let c=new Y(e,t,this.identity.company._id);this._typeTicketService.edit(this.token,e,c).subscribe(e=>{e.typeTicket&&(this.getTypes(),this.openSnackBar("Tipo de ticket editado","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openPopUp(e,t){this.dialog.open(ee,{width:"500px",data:{payload:e,title:t?"Nuevo tipo de ticket":"Editar tipo de ticket"}}).afterClosed().subscribe(e=>{e&&(this.loader.open(),t?this.addType(e.type.name):this.editType(e.type._id,e.type.name),this.loader.close())})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(w.b),B.Vb(E.a),B.Vb(x.a),B.Vb(K.a),B.Vb(Q.a),B.Vb(Z.a),B.Vb(j.a))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-type-ticket"]],features:[B.Fb([x.a,K.a,Q.a])],decls:6,vars:1,consts:[["mat-raised-button","","matTooltip","Nuevo tipo de ticket","color","primary",3,"click"],["mat-list-icon",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["mat-raised-button","","color","primary",3,"matTooltip"],["mat-raised-button","","color","accent",3,"matTooltip","click"],["mat-raised-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","","matTooltip","Configurar subtipo","color","accent"],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(e,t){1&e&&(B.bc(0,"mat-card"),B.bc(1,"button",0),B.jc("click",(function(e){return t.openPopUp(null,!0)})),B.bc(2,"mat-icon",1),B.Vc(3,"add"),B.ac(),B.ac(),B.ac(),B.bc(4,"mat-accordion"),B.Tc(5,ie,16,8,"mat-expansion-panel",2),B.ac()),2&e&&(B.Gb(5),B.uc("ngForOf",t.types))},directives:[p.a,d.b,M.a,b.a,f.b,g.a,a.l,g.c,g.d,f.a,f.c,n.j,I.l,a.m],styles:[".item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#d3d3d3}"]}),e})();var re=c("3uMe"),se=c("CzEO");function le(e,t){if(1&e&&(B.bc(0,"mat-label"),B.Vc(1),B.ac()),2&e){const e=B.nc();B.Gb(1),B.Wc(e.subtype.team.name)}}function ue(e,t){1&e&&(B.bc(0,"mat-label"),B.Vc(1,"Sin equipo"),B.ac())}function be(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-option",22),B.jc("click",(function(c){B.Mc(e);const a=t.$implicit;return B.nc().setTeam(a._id)})),B.Vc(1),B.ac()}if(2&e){const e=t.$implicit;B.uc("value",e._id),B.Gb(1),B.Xc("",e.name," ")}}function de(e,t){1&e&&(B.bc(0,"th"),B.Vc(1,"Editar"),B.ac())}function pe(e,t){if(1&e){const e=B.cc();B.bc(0,"td",24),B.bc(1,"button",25),B.jc("click",(function(t){B.Mc(e);const c=B.nc().$implicit;return B.nc().deleteCheck(c)})),B.bc(2,"mat-icon",26),B.Vc(3,"delete"),B.ac(),B.ac(),B.ac()}}function me(e,t){if(1&e&&(B.bc(0,"tr"),B.bc(1,"td"),B.Vc(2),B.ac(),B.Tc(3,pe,4,0,"td",23),B.ac()),2&e){const e=t.$implicit,c=B.nc();B.Gb(2),B.Xc(" ",e," "),B.Gb(1),B.uc("ngIf",c.isAdmin)}}function he(e,t){if(1&e){const e=B.cc();B.bc(0,"tfoot"),B.bc(1,"tr"),B.bc(2,"td"),B.bc(3,"input",27),B.jc("ngModelChange",(function(t){return B.Mc(e),B.nc().check=t})),B.ac(),B.ac(),B.bc(4,"td",24),B.bc(5,"button",28),B.jc("click",(function(t){return B.Mc(e),B.nc().addCheck()})),B.bc(6,"mat-icon",26),B.Vc(7,"add"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(3),B.uc("ngModel",e.check)}}function ge(e,t){if(1&e&&(B.bc(0,"mat-label"),B.Vc(1),B.ac()),2&e){const e=B.nc();B.Gb(1),B.Wc(e.subtype.team.name)}}function fe(e,t){1&e&&(B.bc(0,"mat-label"),B.Vc(1,"Sin equipo"),B.ac())}function ye(e,t){if(1&e){const e=B.cc();B.bc(0,"mat-option",22),B.jc("click",(function(c){B.Mc(e);const a=t.$implicit;return B.nc().setTeam(a._id)})),B.Vc(1),B.ac()}if(2&e){const e=t.$implicit;B.uc("value",e._id),B.Gb(1),B.Xc("",e.name," ")}}function ke(e,t){1&e&&(B.bc(0,"th"),B.Vc(1,"Editar"),B.ac())}function Te(e,t){if(1&e){const e=B.cc();B.bc(0,"td",24),B.bc(1,"button",25),B.jc("click",(function(t){B.Mc(e);const c=B.nc().$implicit;return B.nc().deleteCheck(c)})),B.bc(2,"mat-icon",26),B.Vc(3,"delete"),B.ac(),B.ac(),B.ac()}}function Ce(e,t){if(1&e&&(B.bc(0,"tr"),B.bc(1,"td"),B.Vc(2),B.ac(),B.Tc(3,Te,4,0,"td",23),B.ac()),2&e){const e=t.$implicit,c=B.nc();B.Gb(2),B.Xc(" ",e," "),B.Gb(1),B.uc("ngIf",c.isAdmin)}}function Se(e,t){if(1&e){const e=B.cc();B.bc(0,"tfoot"),B.bc(1,"tr"),B.bc(2,"td"),B.bc(3,"input",27),B.jc("ngModelChange",(function(t){return B.Mc(e),B.nc().check=t})),B.ac(),B.ac(),B.bc(4,"td",24),B.bc(5,"button",28),B.jc("click",(function(t){return B.Mc(e),B.nc().addCheck()})),B.bc(6,"mat-icon",26),B.Vc(7,"add"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()}if(2&e){const e=B.nc();B.Gb(3),B.uc("ngModel",e.check)}}const ve=[{path:"",children:[{path:"list/sector",component:D,data:{title:"Lista de sectores",breadcrumb:"LISTA DE SECTORES"}},{path:"deposit",loadChildren:()=>c.e(21).then(c.bind(null,"RazQ")).then(e=>e.AppDepositModule),data:{title:"Deposito",breadcrumb:"DEPOSITO"}},{path:"item",loadChildren:()=>Promise.all([c.e(0),c.e(11)]).then(c.bind(null,"fS6x")).then(e=>e.AppItemModule),data:{title:"Articulo",breadcrumb:"ARTICULOS"}},{path:"reason",loadChildren:()=>Promise.all([c.e(0),c.e(22)]).then(c.bind(null,"Poif")).then(e=>e.AppReasonModule),data:{title:"Motivos",breadcrumb:"MOTIVOS"}},{path:"company",component:z,data:{title:"Departamento",breadcrumb:"DEPARTAMENTO"}},{path:"ticket/types",component:oe,data:{title:"Tipos y subtipos de ticket",breadcrumb:"TIPOS Y SUBTIPOS DE TICKETS"}},{path:"ticket/subtype/:id",component:(()=>{class e{constructor(e,t,c,a,n,i){this._userService=e,this._teamService=t,this.confirmService=c,this._route=a,this._subTypeTicketService=n,this.snackBar=i,this.isAdmin=!1,this.token=e.getToken(),this.identity=e.getIdentity(),this.subtype=new J("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}ngOnInit(){this.getSubType(),this.getTeams(),"ROLE_ADMIN"==this.identity.role&&(this.isAdmin=!0)}getSubType(){this._route.params.forEach(e=>{this._subTypeTicketService.getOne(this.token,e.id).subscribe(e=>{e.subTypeTicket&&(this.subtype=e.subTypeTicket)},e=>{this.openSnackBar(e.message,"Cerrar")})})}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(e=>{e.teams&&(this.teams=e.teams)},e=>{this.openSnackBar(e.message,"Cerrar")})}setTeam(e){this.subtype.team=e}submit(){""!=this.subtype.name?this._subTypeTicketService.edit(this.token,this.subtype._id,this.subtype).subscribe(e=>{e.subTypeTicket&&this.openSnackBar("Datos actualizados","Cerrar")},e=>{this.openSnackBar(e.message,"Cerrar")}):this.openSnackBar("Faltan campos para completar","Cerrar")}deleteCheck(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe(t=>{t&&this._subTypeTicketService.deleteCheck(this.token,this.subtype._id,e).subscribe(t=>{t.check&&(this.subtype.checks.splice(this.subtype.checks.indexOf(e),1),this.openSnackBar("Validaci\xf3n eliminada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addCheck(){this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe(e=>{e.subTypeTicket&&(this.subtype.checks.push(this.check),this.check="",this.openSnackBar("Validaci\xf3n agregada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(x.a),B.Vb(re.a),B.Vb(Z.a),B.Vb(n.a),B.Vb(Q.a),B.Vb(j.a))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-subtype"]],features:[B.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a,Q.a,re.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(B.bc(0,"div",0),B.bc(1,"div",1),B.bc(2,"mat-card",2),B.bc(3,"mat-tab-group"),B.bc(4,"mat-tab",3),B.bc(5,"mat-card-content",4),B.bc(6,"form"),B.bc(7,"mat-form-field",5),B.bc(8,"input",6),B.jc("ngModelChange",(function(e){return t.subtype.name=e})),B.ac(),B.ac(),B.bc(9,"mat-form-field",7),B.Tc(10,le,2,1,"mat-label",8),B.Tc(11,ue,2,0,"mat-label",8),B.bc(12,"mat-select"),B.Tc(13,be,2,2,"mat-option",9),B.ac(),B.ac(),B.bc(14,"mat-form-field",5),B.bc(15,"input",10),B.jc("ngModelChange",(function(e){return t.subtype.desc=e})),B.ac(),B.ac(),B.bc(16,"mat-checkbox",11),B.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),B.Vc(17,"Requiere adjunto "),B.ac(),B.ac(),B.bc(18,"button",12),B.jc("click",(function(e){return t.submit()})),B.Vc(19,"Guardar"),B.ac(),B.ac(),B.ac(),B.bc(20,"mat-tab",13),B.bc(21,"mat-card-content",4),B.bc(22,"div",14),B.bc(23,"div",15),B.bc(24,"table",16),B.bc(25,"thead"),B.bc(26,"tr"),B.bc(27,"th"),B.Vc(28,"Descripci\xf3n"),B.ac(),B.Tc(29,de,2,0,"th",8),B.ac(),B.ac(),B.bc(30,"tbody"),B.Tc(31,me,4,2,"tr",17),B.ac(),B.Tc(32,he,8,1,"tfoot",8),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.bc(33,"mat-tab",18),B.bc(34,"mat-card-content",4),B.bc(35,"form"),B.bc(36,"mat-checkbox",19),B.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),B.Vc(37,"Requiere modificaci\xf3n "),B.ac(),B.bc(38,"mat-form-field",5),B.bc(39,"input",20),B.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),B.ac(),B.ac(),B.bc(40,"mat-card-content",2),B.bc(41,"quill-editor",21),B.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),B.ac(),B.ac(),B.ac(),B.bc(42,"button",12),B.jc("click",(function(e){return t.submit()})),B.Vc(43,"Guardar"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()),2&e&&(B.Gb(8),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),B.Gb(2),B.uc("ngIf",t.subtype.team),B.Gb(1),B.uc("ngIf",!t.subtype.team),B.Gb(2),B.uc("ngForOf",t.teams),B.Gb(2),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),B.Gb(1),B.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),B.Gb(4),B.uc("disabled",""==t.subtype._id),B.Gb(9),B.uc("ngIf",t.isAdmin),B.Gb(2),B.uc("ngForOf",t.subtype.checks),B.Gb(1),B.uc("ngIf",t.isAdmin),B.Gb(4),B.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),B.Gb(3),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),B.Gb(2),B.uc("ngModel",t.subtype.autoDesc))},directives:[F.d,F.b,p.a,h.b,h.a,p.c,S.x,S.o,S.p,T.a,o.b,S.c,S.n,S.q,a.m,C.a,a.l,i.a,d.b,se.a,T.d,I.p,M.a,b.a,f.b,S.u],encapsulation:2}),e})(),data:{title:"Subtipo de ticket",breadcrumb:"SUBTIPO DE TICKET"}},{path:"ticket/newsubtype/:id",component:(()=>{class e{constructor(e,t,c,a,n,i,o){this._userService=e,this._teamService=t,this.confirmService=c,this._route=a,this._subTypeTicketService=n,this.snackBar=i,this._router=o,this.isAdmin=!0,this.token=e.getToken(),this.identity=e.getIdentity(),this.subtype=new J("","","",null,"",[],null,!1,"","","",!1,null),this.check=""}ngOnInit(){this.build(),this.getTeams()}build(){this._route.params.forEach(e=>{this.subtype.typeTicket=e.id})}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(e=>{e.teams&&(this.teams=e.teams)},e=>{this.openSnackBar(e.message,"Cerrar")})}setTeam(e){this.subtype.team=e}submit(){""!=this.subtype.name?(""==this.subtype.team&&delete this.subtype.team,this._subTypeTicketService.add(this.token,this.subtype).subscribe(e=>{e.subTypeTicket&&(this.openSnackBar("Subtipo creado","Cerrar"),this._router.navigate(["/settings/ticket/types"]))},e=>{this.openSnackBar(e.message,"Cerrar")})):this.openSnackBar("Faltan campos para completar","Cerrar")}deleteCheck(e){this.confirmService.confirm({message:"\xbfEstas seguro que quieres eliminar esta validaci\xf3n?"}).subscribe(t=>{t&&this._subTypeTicketService.deleteCheck(this.token,this.subtype._id,e).subscribe(t=>{t.check&&(this.subtype.checks.splice(this.subtype.checks.indexOf(e),1),this.openSnackBar("Validaci\xf3n eliminada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})})}addCheck(){this._subTypeTicketService.addCheck(this.token,this.subtype._id,this.check).subscribe(e=>{e.subTypeTicket&&(this.subtype.checks.push(this.check),this.check="",this.openSnackBar("Validaci\xf3n agregada","Cerrar"))},e=>{this.openSnackBar(e.message,"Cerrar")})}openSnackBar(e,t){this.snackBar.open(e,t,{duration:1e4})}}return e.\u0275fac=function(t){return new(t||e)(B.Vb(x.a),B.Vb(re.a),B.Vb(Z.a),B.Vb(n.a),B.Vb(Q.a),B.Vb(j.a),B.Vb(n.g))},e.\u0275cmp=B.Pb({type:e,selectors:[["app-subtype"]],features:[B.Fb([{provide:I.c,useClass:_.c,deps:[I.g]},{provide:I.f,useValue:_.a},x.a,Q.a,re.a])],decls:44,vars:20,consts:[["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0"],["label","General"],[1,"mt-1"],[1,"full-width"],["matInput","","name","name","type","text","placeholder","Nombre",3,"readonly","ngModel","ngModelChange"],["appearance","fill",1,"full-width"],[4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","name","desc","type","text","placeholder","Descripci\xf3n",3,"readonly","ngModel","ngModelChange"],["name","requireAttach",3,"ngModel","color","disabled","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],["label","Validaciones",3,"disabled"],[1,"form-group"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["label","Autocompletado"],["name","autoChange",3,"ngModel","color","disabled","ngModelChange"],["matInput","","name","sub","type","text","placeholder","Asunto",3,"readonly","ngModel","ngModelChange"],["theme","snow","name","autoDesc",3,"ngModel","ngModelChange"],[3,"value","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["mat-icon-button","","matTooltip","Eliminar validaci\xf3n","color","warn",3,"click"],["mat-list-icon",""],["type","text","placeholder","Ingrese una validaci\xf3n","name","check","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Agregar","color","primary",3,"click"]],template:function(e,t){1&e&&(B.bc(0,"div",0),B.bc(1,"div",1),B.bc(2,"mat-card",2),B.bc(3,"mat-tab-group"),B.bc(4,"mat-tab",3),B.bc(5,"mat-card-content",4),B.bc(6,"form"),B.bc(7,"mat-form-field",5),B.bc(8,"input",6),B.jc("ngModelChange",(function(e){return t.subtype.name=e})),B.ac(),B.ac(),B.bc(9,"mat-form-field",7),B.Tc(10,ge,2,1,"mat-label",8),B.Tc(11,fe,2,0,"mat-label",8),B.bc(12,"mat-select"),B.Tc(13,ye,2,2,"mat-option",9),B.ac(),B.ac(),B.bc(14,"mat-form-field",5),B.bc(15,"input",10),B.jc("ngModelChange",(function(e){return t.subtype.desc=e})),B.ac(),B.ac(),B.bc(16,"mat-checkbox",11),B.jc("ngModelChange",(function(e){return t.subtype.requireAttach=e})),B.Vc(17,"Requiere adjunto "),B.ac(),B.ac(),B.bc(18,"button",12),B.jc("click",(function(e){return t.submit()})),B.Vc(19,"Guardar"),B.ac(),B.ac(),B.ac(),B.bc(20,"mat-tab",13),B.bc(21,"mat-card-content",4),B.bc(22,"div",14),B.bc(23,"div",15),B.bc(24,"table",16),B.bc(25,"thead"),B.bc(26,"tr"),B.bc(27,"th"),B.Vc(28,"Descripci\xf3n"),B.ac(),B.Tc(29,ke,2,0,"th",8),B.ac(),B.ac(),B.bc(30,"tbody"),B.Tc(31,Ce,4,2,"tr",17),B.ac(),B.Tc(32,Se,8,1,"tfoot",8),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.bc(33,"mat-tab",18),B.bc(34,"mat-card-content",4),B.bc(35,"form"),B.bc(36,"mat-checkbox",19),B.jc("ngModelChange",(function(e){return t.subtype.autoChange=e})),B.Vc(37,"Requiere modificaci\xf3n "),B.ac(),B.bc(38,"mat-form-field",5),B.bc(39,"input",20),B.jc("ngModelChange",(function(e){return t.subtype.autoSub=e})),B.ac(),B.ac(),B.bc(40,"mat-card-content",2),B.bc(41,"quill-editor",21),B.jc("ngModelChange",(function(e){return t.subtype.autoDesc=e})),B.ac(),B.ac(),B.ac(),B.bc(42,"button",12),B.jc("click",(function(e){return t.submit()})),B.Vc(43,"Guardar"),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac(),B.ac()),2&e&&(B.Gb(8),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.name),B.Gb(2),B.uc("ngIf",t.subtype.team),B.Gb(1),B.uc("ngIf",!t.subtype.team),B.Gb(2),B.uc("ngForOf",t.teams),B.Gb(2),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.desc),B.Gb(1),B.uc("ngModel",t.subtype.requireAttach)("color","primary")("disabled",!t.isAdmin),B.Gb(4),B.uc("disabled",""==t.subtype._id),B.Gb(9),B.uc("ngIf",t.isAdmin),B.Gb(2),B.uc("ngForOf",t.subtype.checks),B.Gb(1),B.uc("ngIf",t.isAdmin),B.Gb(4),B.uc("ngModel",t.subtype.autoChange)("color","primary")("disabled",!t.isAdmin),B.Gb(3),B.uc("readonly",!t.isAdmin)("ngModel",t.subtype.autoSub),B.Gb(2),B.uc("ngModel",t.subtype.autoDesc))},directives:[F.d,F.b,p.a,h.b,h.a,p.c,S.x,S.o,S.p,T.a,o.b,S.c,S.n,S.q,a.m,C.a,a.l,i.a,d.b,se.a,T.d,I.p,M.a,b.a,f.b,S.u],encapsulation:2}),e})(),data:{title:"Nuevo subtipo",breadcrumb:"NUEVO SUBTIPO"}}]}];var Me=c("5+WD");c.d(t,"AppSettingsModule",(function(){return Ve}));let Ve=(()=>{class e{}return e.\u0275mod=B.Tb({type:e}),e.\u0275inj=B.Sb({factory:function(t){return new(t||e)},imports:[[a.c,S.t,T.c,se.b,S.j,m.b,s.a,g.b,C.b,r.a,l.k,V.a,Me.d,f.d,M.b,b.b,d.c,p.e,v.a,i.b,h.c,o.c,y.a,u.e,k.a,n.k.forChild(ve)]]}),e})()}}]);