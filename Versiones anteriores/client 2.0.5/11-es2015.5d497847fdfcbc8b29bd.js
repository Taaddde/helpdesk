(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3uMe":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i("AJX/");var s=i("YFeJ"),o=i("tk/3"),n=i("fXoL");let r=(()=>{class t{constructor(t){this._httpClient=t,this.httpOptions={headers:new o.e({"Content-Type":"application/json",Authorization:"null"})},this.url=s.a.url}add(t,e){let i=JSON.stringify(e);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+"team/add",i,this.httpOptions)}edit(t,e,i){let s=JSON.stringify(i);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+"team/update/"+e,s,this.httpOptions)}addUser(t,e,i){var s={user:i};return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+"team/add-user/"+e,s,this.httpOptions)}removeUser(t,e,i){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+"team/remove-user/"+e,{user:i},this.httpOptions)}delete(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.delete(this.url+"team/delete/"+e,this.httpOptions)}getForName(t,e,i){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"team/for-name/"+e+"/"+i,this.httpOptions)}getList(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"team/teams/"+e,this.httpOptions)}getTeamsOfUser(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"team/for-user/"+e,this.httpOptions)}getAgentsList(t,e,i){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"team/agents/"+e+"/"+i,this.httpOptions)}getOne(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"team/team/"+e,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(n.fc(o.c))},t.\u0275prov=n.Rb({token:t,factory:t.\u0275fac}),t})()},Q2c7:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i("AJX/");var s=i("YFeJ"),o=i("fXoL"),n=i("qlzE");let r=(()=>{class t{constructor(t){this._http=t,this.url=s.a.url}makeFileRequest(t,e,i,s,o){return new Promise((function(e,n){for(var r=new FormData,a=new XMLHttpRequest,c=0;c<i.length;c++)r.append(o,i[c],i[c].name);a.onreadystatechange=function(){4==a.readyState&&(200==a.status?e(JSON.parse(a.response)):n(a.response))},a.open("POST",t,!0),a.setRequestHeader("Authorization",s),a.send(r)}))}}return t.\u0275fac=function(e){return new(e||t)(o.fc(n.a))},t.\u0275prov=o.Rb({token:t,factory:t.\u0275fac}),t})()},y64J:function(t,e,i){"use strict";i.r(e);var s=i("bFKe"),o=i("3Pt+"),n=i("bTqV"),r=i("bSwM"),a=i("A5z7"),c=i("FKr1"),h=i("iadO"),d=i("0IaG"),l=i("f0Cb"),u=i("kmnG"),p=i("NFeN"),g=i("qFsG"),m=i("STbY"),b=i("/t3+"),_=i("Qu3c"),f=i("ofXK"),v=i("7ZcW"),D=i("tyNb"),y=i("2Vo4"),x=i("fXoL"),w=i("tk/3");let k=(()=>{class t{constructor(t){this.http=t,this.searchTerm=new y.a("")}getTodoList(){return this.http.get("/api/todoList")}getTodoById(t){return this.http.get("/api/todoList/"+t)}getTagList(){return this.http.get("/api/todoTag")}updateSearchTerm(t){this.searchTerm.next(t)}getSearchTerm(){return this.searchTerm}saveTag(t){return this.http.post("/api/todoTag/",t)}deleteTag(t){this.http.delete("/api/todoTag/"+t.id).subscribe(t=>{})}deleteTodo(t){return this.http.delete("/api/todoList/"+t.id)}updateTodo(t){let e;return t.selected=!1,t.id?e=this.http.put("/api/todoList/"+t.id,t):(t.id=1e6*Math.random(),e=this.http.post("/api/todoList/",t)),this.sub?(this.sub.unsubscribe(),this.sub=e.subscribe(t=>{})):this.sub=e.subscribe(t=>{}),e}}return t.\u0275fac=function(e){return new(e||t)(x.fc(w.c))},t.\u0275prov=x.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=i("XiUz");let T=(()=>{class t{constructor(t){this.todoService=t}ngOnInit(){this.updateSearchTerm("")}updateSearchTerm(t){this.todoService.updateSearchTerm(t)}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(k))},t.\u0275cmp=x.Pb({type:t,selectors:[["app-todo"]],decls:13,vars:0,consts:[[1,"page-layout","overflow-hidden","pb-8"],[1,"header-bg","dark-blue"],[1,"content"],["fxLayout","row wrap","fxLayoutAlign","center center",1,"content-header"],["fxFlex","1 1 0%",1,"search-box","mat-elevation-z2"],["mat-icon-button",""],["type","text","placeholder","Buscar una tarea",3,"keyup"],["serachTerm",""],[1,"content-body"],[1,"content-card","default-bg","height-100vh",3,"perfectScrollbar"]],template:function(t,e){if(1&t){const t=x.cc();x.bc(0,"div",0),x.Wb(1,"div",1),x.bc(2,"div",2),x.bc(3,"div",3),x.bc(4,"div",4),x.bc(5,"button",5),x.bc(6,"mat-icon"),x.Vc(7,"search"),x.ac(),x.ac(),x.bc(8,"input",6,7),x.jc("keyup",(function(i){x.Mc(t);const s=x.Jc(9);return e.updateSearchTerm(s.value)})),x.ac(),x.ac(),x.ac(),x.bc(10,"div",8),x.bc(11,"div",9),x.Wb(12,"router-outlet"),x.ac(),x.ac(),x.ac(),x.ac()}},directives:[S.d,S.c,S.b,n.b,p.a,s.b,D.l],styles:[""],changeDetection:0}),t})();var O=i("vxfF"),C=i("nLfN"),R=i("8LU1"),L=i("XNiG"),P=i("quSY"),E=i("l5mm"),I=i("eNwd"),M=i("HDdC"),V=i("VRyK"),A=i("JX91"),j=i("1G5W"),F=i("lJxs"),G=i("IzEk"),N=i("vkgz"),z=i("eIep"),B=i("cH1L");function W(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function H(t,e){const i=e?"":"none";W(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:i,msUserSelect:i,webkitUserSelect:i,MozUserSelect:i})}function $(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function Y(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}const q=Object(C.g)({passive:!0}),J=Object(C.g)({passive:!1});class U{constructor(t,e,i,s,o,n){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=n,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new L.a,this._pointerMoveSubscription=P.a.EMPTY,this._pointerUpSubscription=P.a.EMPTY,this._scrollSubscription=P.a.EMPTY,this._resizeSubscription=P.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new L.a,this.started=new L.a,this.released=new L.a,this.ended=new L.a,this.entered=new L.a,this.exited=new L.a,this.dropped=new L.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const i=t.target;return!!i&&(i===e||e.contains(i))});!e||this._disabledHandles.has(e)||this.disabled||this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{if(t.preventDefault(),!this._hasStartedDragging){const e=this._getPointerPositionOnPage(t);if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+this._getDragStartDelay(t)))return void this._endDragSequence(t);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const e=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._updatePointerDirectionDelta(e),this._dropContainer)this._updateActiveDropContainer(e);else{const t=this._activeTransform;t.x=e.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=e.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:e,event:t,distance:this._getDragDistance(e),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t),n.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Object(R.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(t){return this._handles=t.map(t=>Object(R.e)(t)),this._handles.forEach(t=>H(t,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Object(R.e)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),e.addEventListener("mousedown",this._pointerDown,J),e.addEventListener("touchstart",this._pointerDown,q),this._initialTransform=void 0,this._rootElement=e),this}withBoundaryElement(t){return this._boundaryElement=t?Object(R.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&K(this._rootElement),K(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}enableHandle(t){this._disabledHandles.delete(t)}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}_sortFromLastPointerPosition(){const t=this._pointerPositionAtLastDirectionChange;t&&this._dropContainer&&this._updateActiveDropContainer(t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&K(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&K(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(t){if(this.started.next({source:this}),tt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){const t=this._rootElement,i=t.parentNode,s=this._preview=this._createPreviewElement(),o=this._placeholder=this._createPlaceholderElement(),n=this._anchor=this._anchor||this._document.createComment("");i.insertBefore(n,t),t.style.display="none",this._document.body.appendChild(i.replaceChild(o,t)),(e=this._document,e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body).appendChild(s),this._dropContainer.start()}var e}_initializeDragSequence(t,e){e.stopPropagation();const i=this.isDragging(),s=tt(e),o=!s&&0!==e.button,n=this._rootElement,r=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),i||o||r)return;this._handles.length&&(this._rootElementTapHighlight=n.style.webkitTapHighlightColor,n.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(A.a)(null)).subscribe(()=>{this._scrollPosition=this._viewportRuler.getViewportScrollPosition()}),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(t,e);const a=this._pickupPositionOnPage=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:a.x,y:a.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(t),o=this._getDragDistance(this._getPointerPositionOnPage(t)),n=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:o}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialContainer.getItemIndex(this),container:e,previousContainer:this._initialContainer,isPointerOverContainer:n,distance:o}),e.drop(this,i,this._initialContainer,n,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e}){let i=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,t,e),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(t,e),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._preview.style.transform=X(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let s;if(i){const e=t.viewContainer.createEmbeddedView(i,t.context);s=et(e,this._document),this._previewRef=e,s.style.transform=X(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement,e=t.getBoundingClientRect();s=Z(t),s.style.width=`${e.width}px`,s.style.height=`${e.height}px`,s.style.transform=X(e.left,e.top)}return W(s.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"1000"}),H(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(t=>s.classList.add(t)):s.classList.add(e)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=X(t.left,t.top);const e=function(t){const e=getComputedStyle(t),i=Y(e,"transition-property"),s=i.find(t=>"transform"===t||"all"===t);if(!s)return 0;const o=i.indexOf(s),n=Y(e,"transition-duration"),r=Y(e,"transition-delay");return $(n[o])+$(r[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const i=e=>{(!e||e.target===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",i),t(),clearTimeout(s))},s=setTimeout(i,1.5*e);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),i=et(this._placeholderRef,this._document)):i=Z(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),s=t===this._rootElement?null:t,o=s?s.getBoundingClientRect():i,n=tt(e)?e.targetTouches[0]:e;return{x:o.left-i.left+(n.pageX-o.left-this._scrollPosition.left),y:o.top-i.top+(n.pageY-o.top-this._scrollPosition.top)}}_getPointerPositionOnPage(t){const e=tt(t)?t.touches[0]||t.changedTouches[0]:t;return{x:e.pageX-this._scrollPosition.left,y:e.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(t){const e=this._getPointerPositionOnPage(t),i=this.constrainPosition?this.constrainPosition(e,this):e,s=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===s?i.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==s||(i.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,s=this._boundaryRect,o=this._previewRect,n=s.top+e,r=s.bottom-(o.height-e);i.x=Q(i.x,s.left+t,s.right-(o.width-t)),i.y=Q(i.y,n,r)}return i}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,s=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,n=Math.abs(e-o.x),r=Math.abs(i-o.y);return n>this._config.pointerDirectionChangeThreshold&&(s.x=e>o.x?1:-1,o.x=e),r>this._config.pointerDirectionChangeThreshold&&(s.y=i>o.y?1:-1,o.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,H(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,J),t.removeEventListener("touchstart",this._pointerDown,q)}_applyRootElementTransform(t,e){const i=X(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?i+" "+this._initialTransform:i}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===s.width&&0===s.height)return;const o=i.left-s.left,n=s.right-i.right,r=i.top-s.top,a=s.bottom-i.bottom;i.width>s.width?(o>0&&(t+=o),n>0&&(t-=n)):t=0,i.height>s.height?(r>0&&(e+=r),a>0&&(e-=a)):e=0,t===this._passiveTransform.x&&e===this._passiveTransform.y||this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:tt(t)?e.touch:e?e.mouse:0}}function X(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function Z(t){const e=t.cloneNode(!0),i=e.querySelectorAll("[id]"),s=t.querySelectorAll("canvas");e.removeAttribute("id");for(let o=0;o<i.length;o++)i[o].removeAttribute("id");if(s.length){const t=e.querySelectorAll("canvas");for(let e=0;e<s.length;e++){const i=t[e].getContext("2d");i&&i.drawImage(s[e],0,0)}}return e}function Q(t,e,i){return Math.max(e,Math.min(i,t))}function K(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function tt(t){return"t"===t.type[0]}function et(t,e){const i=t.rootNodes[0];if(i.nodeType!==e.ELEMENT_NODE){const t=e.createElement("div");return t.appendChild(i),t}return i}function it(t,e,i){const s=st(e,t.length-1),o=st(i,t.length-1);if(s===o)return;const n=t[s],r=o<s?-1:1;for(let a=s;a!==o;a+=r)t[a]=t[a+r];t[o]=n}function st(t,e){return Math.max(0,Math.min(e,t))}class ot{constructor(t,e,i,s,o){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new L.a,this.entered=new L.a,this.exited=new L.a,this.dropped=new L.a,this.sorted=new L.a,this._isDragging=!1,this._itemPositions=[],this._scrollPosition={top:0,left:0},this._viewportScrollPosition={top:0,left:0},this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=P.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new L.a,this._cachedShadowRoot=null,this._handleScroll=()=>{if(!this.isDragging())return;const t=Object(R.e)(this.element);this._updateAfterScroll(this._scrollPosition,t.scrollTop,t.scrollLeft)},this._startScrollInterval=()=>{this._stopScrolling(),Object(E.a)(0,I.a).pipe(Object(j.a)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode;1===this._verticalScrollDirection?ht(t,-2):2===this._verticalScrollDirection&&ht(t,2),1===this._horizontalScrollDirection?dt(t,-2):2===this._horizontalScrollDirection&&dt(t,2)})},this.element=Object(R.e)(t),this._document=i,e.registerDropContainer(this)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._removeListeners(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const t=Object(R.e)(this.element);this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach(t=>t._startReceiving(this)),this._removeListeners(),this._ngZone.runOutsideAngular(()=>t.addEventListener("scroll",this._handleScroll)),this._listenToScrollEvents()}enter(t,e,i){this.start();let s=this.sortingDisabled?this._draggables.indexOf(t):-1;-1===s&&(s=this._getItemIndexFromPointerPosition(t,e,i));const o=this._activeDraggables,n=o.indexOf(t),r=t.getPlaceholderElement();let a=o[s];if(a===t&&(a=o[s+1]),n>-1&&o.splice(n,1),a&&!this._dragDropRegistry.isDragging(a)){const e=a.getRootElement();e.parentElement.insertBefore(r,e),o.splice(s,0,t)}else Object(R.e)(this.element).appendChild(r),o.push(t);r.style.transform="",this._cacheItemPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,s,o){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i.getItemIndex(t),container:this,previousContainer:i,isPointerOverContainer:s,distance:o})}withItems(t){return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}getItemIndex(t){return this._isDragging?rt("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,s){if(this.sortingDisabled||!this._isPointerNearDropContainer(e,i))return;const o=this._itemPositions,n=this._getItemIndexFromPointerPosition(t,e,i,s);if(-1===n&&o.length>0)return;const r="horizontal"===this._orientation,a=rt(o,e=>e.drag===t),c=o[n],h=o[a].clientRect,d=c.clientRect,l=a>n?1:-1;this._previousSwap.drag=c.drag,this._previousSwap.delta=r?s.x:s.y;const u=this._getItemOffsetPx(h,d,l),p=this._getSiblingOffsetPx(a,o,l),g=o.slice();it(o,a,n),this.sorted.next({previousIndex:a,currentIndex:n,container:this,item:t}),o.forEach((e,i)=>{if(g[i]===e)return;const s=e.drag===t,o=s?u:p,n=s?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=o,r?(n.style.transform=`translate3d(${Math.round(e.offset)}px, 0, 0)`,nt(e.clientRect,0,o)):(n.style.transform=`translate3d(0, ${Math.round(e.offset)}px, 0)`,nt(e.clientRect,o,0))})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,s=0,o=0;if(this._isPointerNearDropContainer(t,e)){const n=Object(R.e)(this.element);[s,o]=function(t,e,i,s){const o=lt(e,s),n=ut(e,i);let r=0,a=0;if(o){const e=t.scrollTop;1===o?e>0&&(r=1):t.scrollHeight-e>t.clientHeight&&(r=2)}if(n){const e=t.scrollLeft;1===n?e>0&&(a=1):t.scrollWidth-e>t.clientWidth&&(a=2)}return[r,a]}(n,this._clientRect,t,e),(s||o)&&(i=n)}if(!s&&!o){const{width:n,height:r}=this._viewportRuler.getViewportSize(),a={width:n,height:r,top:0,right:n,bottom:r,left:0};s=lt(a,e),o=ut(a,t),i=window}!i||s===this._verticalScrollDirection&&o===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=s,this._horizontalScrollDirection=o,this._scrollNode=i,(s||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheOwnPosition(){const t=Object(R.e)(this.element);this._clientRect=ct(t),this._scrollPosition={top:t.scrollTop,left:t.scrollLeft}}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=this._dragDropRegistry.isDragging(t)?t.getPlaceholderElement():t.getRootElement();return{drag:t,offset:0,clientRect:ct(e)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(t=>t.getRootElement().style.transform=""),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._removeListeners()}_getSiblingOffsetPx(t,e,i){const s="horizontal"===this._orientation,o=e[t].clientRect,n=e[t+-1*i];let r=o[s?"width":"height"]*i;if(n){const t=s?"left":"top",e=s?"right":"bottom";-1===i?r-=n.clientRect[t]-o[e]:r+=o[t]-n.clientRect[e]}return r}_isPointerNearDropContainer(t,e){const{top:i,right:s,bottom:o,left:n,width:r,height:a}=this._clientRect,c=.05*r,h=.05*a;return e>i-h&&e<o+h&&t>n-c&&t<s+c}_getItemOffsetPx(t,e,i){const s="horizontal"===this._orientation;let o=s?e.left-t.left:e.top-t.top;return-1===i&&(o+=s?e.width-t.width:e.height-t.height),o}_getItemIndexFromPointerPosition(t,e,i,s){const o="horizontal"===this._orientation;return rt(this._itemPositions,({drag:n,clientRect:r},a,c)=>{if(n===t)return c.length<2;if(s){const t=o?s.x:s.y;if(n===this._previousSwap.drag&&t===this._previousSwap.delta)return!1}return o?e>=Math.floor(r.left)&&e<=Math.floor(r.right):i>=Math.floor(r.top)&&i<=Math.floor(r.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}_updateAfterScroll(t,e,i,s){const o=t.top-e,n=t.left-i;s&&nt(s,o,n),this._itemPositions.forEach(({clientRect:t})=>{nt(t,o,n)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}),t.top=e,t.left=i}_removeListeners(){Object(R.e)(this.element).removeEventListener("scroll",this._handleScroll),this._viewportScrollSubscription.unsubscribe()}_isOverContainer(t,e){return at(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(s=>s._canReceive(t,e,i))}_canReceive(t,e,i){if(!at(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const s=this._getShadowRoot().elementFromPoint(e,i);if(!s)return!1;const o=Object(R.e)(this.element);return s===o||o.contains(s)}_startReceiving(t){const e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheOwnPosition(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(()=>{if(this.isDragging()){const t=this._viewportRuler.getViewportScrollPosition();this._updateAfterScroll(this._viewportScrollPosition,t.top,t.left,this._clientRect)}else this.isReceiving()&&this._cacheOwnPosition()})}_getShadowRoot(){return this._cachedShadowRoot||(this._cachedShadowRoot=function(t){if(Object(C.d)()){const e=t.getRootNode?t.getRootNode():null;if(e instanceof ShadowRoot)return e}return null}(Object(R.e)(this.element))||this._document),this._cachedShadowRoot}}function nt(t,e,i){t.top+=e,t.bottom=t.top+t.height,t.left+=i,t.right=t.left+t.width}function rt(t,e){for(let i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1}function at(t,e,i){const{top:s,bottom:o,left:n,right:r}=t;return i>=s&&i<=o&&e>=n&&e<=r}function ct(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function ht(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function dt(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function lt(t,e){const{top:i,bottom:s,height:o}=t,n=.05*o;return e>=i-n&&e<=i+n?1:e>=s-n&&e<=s+n?2:0}function ut(t,e){const{left:i,right:s,width:o}=t,n=.05*o;return e>=i-n&&e<=i+n?1:e>=s-n&&e<=s+n?2:0}const pt=Object(C.g)({passive:!1,capture:!0});let gt=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new L.a,this.pointerUp=new L.a,this.scroll=new L.a,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.size&&t.preventDefault()},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,pt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,pt)}startDragging(t,e){if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){const t=e.type.startsWith("touch"),i=t?"touchend":"mouseup";this._globalListeners.set(t?"touchmove":"mousemove",{handler:t=>this.pointerMove.next(t),options:pt}).set(i,{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:pt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances.has(t)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(x.fc(x.C),x.fc(f.d))},t.\u0275prov=Object(x.Rb)({factory:function(){return new t(Object(x.fc)(x.C),Object(x.fc)(f.d))},token:t,providedIn:"root"}),t})();const mt={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let bt=(()=>{class t{constructor(t,e,i,s){this._document=t,this._ngZone=e,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,e=mt){return new U(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ot(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(x.fc(f.d),x.fc(x.C),x.fc(O.d),x.fc(gt))},t.\u0275prov=Object(x.Rb)({factory:function(){return new t(Object(x.fc)(f.d),Object(x.fc)(x.C),Object(x.fc)(O.d),Object(x.fc)(gt))},token:t,providedIn:"root"}),t})();const _t=new x.s("CDK_DRAG_PARENT");let ft=(()=>{class t{constructor(t,e){this.element=t,this._stateChanges=new L.a,this._disabled=!1,this._parentDrag=e,H(t.nativeElement,!1)}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(R.c)(t),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(x.l),x.Vb(_t,8))},t.\u0275dir=x.Qb({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),t})(),vt=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(x.O))},t.\u0275dir=x.Qb({type:t,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),t})(),Dt=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(x.O))},t.\u0275dir=x.Qb({type:t,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data"}}),t})();const yt=new x.s("CDK_DROP_LIST"),xt=new x.s("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}});let wt=(()=>{class t{constructor(t,e,i,s,o,n,r,a,c){this.element=t,this.dropContainer=e,this._document=i,this._ngZone=s,this._viewContainerRef=o,this._dir=r,this._changeDetectorRef=c,this._destroyed=new L.a,this.dragStartDelay=0,this._disabled=!1,this.started=new x.o,this.released=new x.o,this.ended=new x.o,this.entered=new x.o,this.exited=new x.o,this.dropped=new x.o,this.moved=new M.a(t=>{const e=this._dragRef.moved.pipe(Object(F.a)(t=>({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}))).subscribe(t);return()=>{e.unsubscribe()}}),this._dragRef=a.createDrag(t,n),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=Object(R.c)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Object(G.a)(1),Object(j.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(A.a)(this._handles),Object(N.a)(t=>{const e=t.filter(t=>t._parentDrag===this).map(t=>t.element);this._dragRef.withHandles(e)}),Object(z.a)(t=>Object(V.a)(...t.map(t=>t._stateChanges.pipe(Object(A.a)(t))))),Object(j.a)(this._destroyed)).subscribe(t=>{const e=this._dragRef,i=t.element.nativeElement;t.disabled?e.disableHandle(i):e.enableHandle(i)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(t){const e=t.rootElementSelector,i=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const t=this.element.nativeElement,e=this.rootElementSelector?kt(t,this.rootElementSelector):t;if(e&&e.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${e.nodeName}".`);this._dragRef.withRootElement(e||t)}_getBoundaryElement(){const t=this.boundaryElement;if(!t)return null;if("string"==typeof t)return kt(this.element.nativeElement,t);const e=Object(R.e)(t);if(Object(x.Z)()&&!e.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return e}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const e=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(R.f)(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o),e&&t.withDirection(e.value)}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance})})}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(x.l),x.Vb(yt,12),x.Vb(f.d),x.Vb(x.C),x.Vb(x.R),x.Vb(xt),x.Vb(B.c,8),x.Vb(bt),x.Vb(x.h))},t.\u0275dir=x.Qb({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,i){var s;1&t&&(x.Nb(i,Dt,!0),x.Nb(i,vt,!0),x.Nb(i,ft,!0)),2&t&&(x.Ic(s=x.kc())&&(e._previewTemplate=s.first),x.Ic(s=x.kc())&&(e._placeholderTemplate=s.first),x.Ic(s=x.kc())&&(e._handles=s))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&x.Lb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{dragStartDelay:["cdkDragStartDelay","dragStartDelay"],disabled:["cdkDragDisabled","disabled"],data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[x.Fb([{provide:_t,useExisting:t}]),x.Eb()]}),t})();function kt(t,e){let i=t.parentElement;for(;i;){if(i.matches?i.matches(e):i.msMatchesSelector(e))return i;i=i.parentElement}return null}let St=(()=>{class t{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(R.c)(t)}ngOnDestroy(){this._items.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=x.Qb({type:t,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"]}),t})(),Tt=0,Ot=(()=>{class t{constructor(e,i,s,o,n){this.element=e,this._changeDetectorRef=s,this._dir=o,this._group=n,this._destroyed=new L.a,this.connectedTo=[],this.orientation="vertical",this.id=`cdk-drop-list-${Tt++}`,this._disabled=!1,this.sortingDisabled=!1,this.enterPredicate=()=>!0,this.autoScrollDisabled=!1,this.dropped=new x.o,this.entered=new x.o,this.exited=new x.o,this.sorted=new x.o,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,this._dropListRef.enterPredicate=(t,e)=>this.enterPredicate(t.data,e.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),n&&n._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=Object(R.c)(t)}ngAfterContentInit(){this._draggables.changes.pipe(Object(A.a)(this._draggables),Object(j.a)(this._destroyed)).subscribe(t=>{this._dropListRef.withItems(t.reduce((t,e)=>(e.dropContainer===this&&t.push(e._dragRef),t),[]))})}ngOnDestroy(){const e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(t,e,i,s){this._dropListRef.drop(t._dragRef,e,i._dropListRef,s,{x:0,y:0})}enter(t,e,i){this._dropListRef.enter(t._dragRef,e,i)}exit(t){this._dropListRef.exit(t._dragRef)}getItemIndex(t){return this._dropListRef.getItemIndex(t._dragRef)}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Object(A.a)(this._dir.value),Object(j.a)(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{const i=Object(R.b)(this.connectedTo).map(e=>"string"==typeof e?t._dropLists.find(t=>t.id===e):e);this._group&&this._group._items.forEach(t=>{-1===i.indexOf(t)&&i.push(t)}),e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=Object(R.c)(this.sortingDisabled),e.autoScrollDisabled=Object(R.c)(this.autoScrollDisabled),e.connectedTo(i.filter(t=>t&&t!==this).map(t=>t._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance}),this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(x.l),x.Vb(bt),x.Vb(x.h),x.Vb(B.c,8),x.Vb(St,12))},t.\u0275dir=x.Qb({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],contentQueries:function(t,e,i){var s;1&t&&x.Nb(i,wt,!0),2&t&&x.Ic(s=x.kc())&&(e._draggables=s)},hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,e){2&t&&(x.ec("id",e.id),x.Lb("cdk-drop-list-disabled",e.disabled)("cdk-drop-list-dragging",e._dropListRef.isDragging())("cdk-drop-list-receiving",e._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],orientation:["cdkDropListOrientation","orientation"],id:"id",sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],disabled:["cdkDropListDisabled","disabled"],data:["cdkDropListData","data"],lockAxis:["cdkDropListLockAxis","lockAxis"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[x.Fb([{provide:St,useValue:void 0},{provide:yt,useExisting:t}])]}),t._dropLists=[],t})(),Ct=(()=>{class t{}return t.\u0275mod=x.Tb({type:t}),t.\u0275inj=x.Sb({factory:function(e){return new(e||t)},providers:[bt]}),t})();var Rt=i("Kj3r"),Lt=i("/MnI"),Pt=i("gU78"),Et=(i("AJX/"),i("YFeJ"));let It=(()=>{class t{constructor(t){this._httpClient=t,this.httpOptions={headers:new w.e({"Content-Type":"application/json",Authorization:"null"})},this.url=Et.a.url}add(t,e){let i=JSON.stringify(e);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.post(this.url+"tag/add",i,this.httpOptions)}edit(t,e,i){let s=JSON.stringify(i);return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.put(this.url+"tag/update/"+e,s,this.httpOptions)}delete(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.delete(this.url+"tag/delete/"+e,this.httpOptions)}getList(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/list",{headers:this.httpOptions.headers,params:e})}getOne(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/tag/"+e,this.httpOptions)}getForName(t,e){return this.httpOptions.headers=this.httpOptions.headers.set("Authorization",t),this._httpClient.get(this.url+"tag/for-name/"+e,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(x.fc(w.c))},t.\u0275prov=x.Rb({token:t,factory:t.\u0275fac}),t})();var Mt=i("wd/R"),Vt=i("dNgK"),At=i("znSr");let jt=(()=>{class t{transform(t,e){return void 0!==t&&e?t.filter(t=>t.title.toLowerCase().match(e.toLowerCase())||t.note.toLowerCase().match(e.toLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=x.Ub({name:"todoSearch",type:t,pure:!0}),t})();function Ft(t,e){if(1&t){const t=x.cc();x.bc(0,"button",3),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().filterTodoListOnTag(s)})),x.Vc(1),x.ac()}if(2&t){const t=e.$implicit;x.Gb(1),x.Xc(" ",t.name," ")}}function Gt(t,e){1&t&&(x.bc(0,"div",12),x.Vc(1," No hay tareas para mostrar "),x.ac())}function Nt(t,e){if(1&t&&(x.bc(0,"div"),x.bc(1,"mat-chip"),x.Vc(2),x.ac(),x.ac()),2&t){const t=e.$implicit;x.Gb(2),x.Xc(" ",t.name," ")}}const zt=function(t,e){return{"todo-box":!0,readed:t,done:e}},Bt=function(t){return{"fill-color-warn":t}},Wt=function(t){return{"fill-color-accent":t}};function Ht(t,e){if(1&t){const t=x.cc();x.bc(0,"div",13),x.bc(1,"mat-icon",14),x.Vc(2,"open_with"),x.ac(),x.bc(3,"div",15),x.bc(4,"div",16),x.bc(5,"span"),x.bc(6,"strong"),x.Vc(7),x.ac(),x.Vc(8),x.ac(),x.bc(9,"span"),x.Vc(10),x.ac(),x.bc(11,"mat-chip-list",null,17),x.Tc(13,Nt,3,1,"div",18),x.ac(),x.ac(),x.bc(14,"div",19),x.bc(15,"button",20),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().toggleImportant(s)})),x.bc(16,"mat-icon",21),x.Vc(17),x.ac(),x.ac(),x.bc(18,"button",20),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().toggleStar(s)})),x.bc(19,"mat-icon",21),x.Vc(20),x.ac(),x.ac(),x.bc(21,"div"),x.bc(22,"button",1),x.bc(23,"mat-icon"),x.Vc(24,"more_vert"),x.ac(),x.ac(),x.bc(25,"mat-menu",22,23),x.bc(27,"button",3),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().toggleRead(s)})),x.bc(28,"mat-icon"),x.Vc(29),x.ac(),x.bc(30,"span",24),x.Vc(31," Le\xeddo "),x.ac(),x.ac(),x.bc(32,"button",3),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().toggleDone(s)})),x.bc(33,"mat-icon"),x.Vc(34),x.ac(),x.bc(35,"span",24),x.Vc(36," Realizado "),x.ac(),x.ac(),x.ac(),x.ac(),x.ac(),x.ac(),x.ac()}if(2&t){const t=e.$implicit,i=x.Jc(26),s=x.nc();x.uc("ngClass",x.Bc(14,zt,null==t.usersWhoRead?null:t.usersWhoRead.includes(s.identity._id),t.done)),x.Gb(4),x.wc("routerLink","/todo/list/",null==t?null:t._id,""),x.Gb(3),x.Wc(null==t?null:t.title),x.Gb(1),x.Xc(" | ",s.changeDate(null==t?null:t.startDate),""),x.Gb(2),x.Wc(null==t?null:t.note),x.Gb(3),x.uc("ngForOf",null==t?null:t.tags),x.Gb(3),x.uc("ngClass",x.Ac(17,Bt,null==t?null:t.important)),x.Gb(1),x.Wc(null!=t&&t.important?"error":"error_outline"),x.Gb(2),x.uc("ngClass",x.Ac(19,Wt,null==t?null:t.starred)),x.Gb(1),x.Wc(null!=t&&t.starred?"star":"star_outline"),x.Gb(2),x.uc("matMenuTriggerFor",i),x.Gb(3),x.uc("xPosition","before"),x.Gb(4),x.Wc(null!=t.usersWhoRead&&t.usersWhoRead.includes(s.identity._id)?"check_box":"check_box_outline_blank"),x.Gb(5),x.Wc(t.done?"check_box":"check_box_outline_blank")}}let $t=(()=>{class t{constructor(t,e,i,s,o,n){this.todoService=t,this._todoService=e,this._userService=i,this._tagService=s,this.cdr=o,this.snackBar=n,this.tagMap=new Map,this.isMasterToggled=!1,this.toggledItemNumber=0,this.filter="No Realizados",this.unsubscribeAll=new L.a,this.token=i.getToken(),this.identity=i.getIdentity()}ngOnInit(){this.getTodo(),this.getTags(),this.todoService.getSearchTerm().pipe(Object(Rt.a)(250)).pipe(Object(j.a)(this.unsubscribeAll)).subscribe(t=>{this.searchTerm=t,this.cdr.markForCheck()})}getTodo(){this._todoService.getList(this.token,{}).subscribe(t=>{t.todos&&(this.tempList=t.todos,this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.done}))},t=>{this.openSnackBar(t.message,"Cerrar")})}getTags(){this._tagService.getList(this.token,{}).subscribe(t=>{t.tags&&(this.tags=t.tags)},t=>{this.openSnackBar(t.message,"Cerrar")})}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete()}drop(t){it(this.todoList,t.previousIndex,t.currentIndex),this.cdr.markForCheck()}filterTodoListOnTag(t){let e=new Array;this.tempList.forEach(i=>{if(i.tags)for(let s=0;s<i.tags.length;s++)if(i.tags[s].name==t.name){e.push(i);break}}),this.todoList=e}onTodoOptionSelected(t){switch(t.target.innerText){case"Todo":this.todoList=this.tempList,this.filter="Todo";break;case"Todo - Pendientes":this.todoList=this.tempList.filter(t=>!t.done),this.filter="Todo - Pendientes";break;case"Todo - Realizados":this.todoList=this.tempList.filter(t=>t.done),this.filter="Todo - Realizados";break;case"Todo - Mios":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))}),this.filter="Mios";break;case"Le\xeddo":this.todoList=this.tempList.filter(t=>{var e,i;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&(null===(i=t.usersWhoRead)||void 0===i?void 0:i.includes(this.identity._id))}),this.filter="Le\xeddo";break;case"No Le\xeddo":this.todoList=this.tempList.filter(t=>{var e,i;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!(null===(i=t.usersWhoRead)||void 0===i?void 0:i.includes(this.identity._id))}),this.filter="No Le\xeddo";break;case"Importante":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.important}),this.filter="Importante";break;case"No Importante":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.important}),this.filter="No Importante";break;case"Realizado":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.done}),this.filter="Realizado";break;case"No Realizado":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.done}),this.filter="No Realizado";break;case"Favorito":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&t.starred}),this.filter="Favorito";break;case"No Favorito":this.todoList=this.tempList.filter(t=>{var e;return-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))&&!t.starred}),this.filter="No favorito"}this.cdr.detectChanges()}masterToggle(){this.toggledItemNumber=0,this.isMasterToggled=!this.isMasterToggled,this.todoList.forEach(this.isMasterToggled?t=>{t.selected=!0,this.toggledItemNumber++}:t=>{t.selected=!1,this.toggledItemNumber--}),this.cdr.detectChanges()}toggleCheckBox(t){t.selected=!t.selected,t.selected?this.toggledItemNumber++:this.toggledItemNumber--,this.toggledItemNumber==this.todoList.length?this.isMasterToggled=!0:0==this.toggledItemNumber&&(this.isMasterToggled=!1)}toggleImportant(t){this.userInTodo(t)?(t.important=!t.important,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleStar(t){this.userInTodo(t)?(t.starred=!t.starred,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleRead(t){var e;(null===(e=t.usersWhoRead)||void 0===e?void 0:e.includes(this.identity._id))?t.usersWhoRead.splice(t.usersWhoRead.indexOf(this.identity._id),1):t.usersWhoRead.push(this.identity._id),this.updateTodo(t)}toggleDone(t){this.userInTodo(t)?(t.done=!t.done,this.updateTodo(t)):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}updateTodo(t){this._todoService.edit(this.token,t._id,t).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}userInTodo(t){var e;return!!t.users&&-1!=(null===(e=t.users)||void 0===e?void 0:e.map(t=>t._id).indexOf(this.identity._id))}changeDate(t){return Mt(t).format("DD-MM-YYYY")}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(k),x.Vb(Lt.a),x.Vb(Pt.a),x.Vb(It),x.Vb(x.h),x.Vb(Vt.a))},t.\u0275cmp=x.Pb({type:t,selectors:[["app-todo-list"]],decls:47,vars:9,consts:[["fxLayoutGap","5px"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["tagMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","start center"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","end center"],["mat-raised-button","","color","primary","routerLink","/todo/add"],["cdkDropList","",1,"todo-list",3,"cdkDropListDropped"],["class","todo-box","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","cdkDrag","","cdkDragHandle","",3,"ngClass",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center",1,"todo-box"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","cdkDrag","","cdkDragHandle","",3,"ngClass"],[1,"move-handler"],["fxLayout","row","fxLayoutAlign","space-between center","fxFlex","1 1 0%"],["fxLayout","column","fxLayoutGap","8px","fxFlex","1 1 0%",2,"cursor","pointer",3,"routerLink"],["chipList",""],[4,"ngFor","ngForOf"],["fxFlexAlign","end center","fxLayout","row"],["mat-icon-button","",3,"click"],[3,"ngClass"],[3,"xPosition"],["menu2","matMenu"],[2,"vertical-align","middle"]],template:function(t,e){if(1&t&&(x.bc(0,"mat-toolbar",0),x.bc(1,"button",1),x.bc(2,"mat-icon"),x.Vc(3,"arrow_drop_down"),x.ac(),x.ac(),x.bc(4,"mat-menu",null,2),x.bc(6,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(7,"Todo"),x.ac(),x.bc(8,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(9,"Todo - Pendientes"),x.ac(),x.bc(10,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(11,"Todo - Realizados"),x.ac(),x.bc(12,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(13,"Todo - Mios"),x.ac(),x.bc(14,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(15,"Realizado"),x.ac(),x.bc(16,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(17,"No realizado"),x.ac(),x.bc(18,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(19,"Le\xeddo"),x.ac(),x.bc(20,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(21,"No le\xeddo"),x.ac(),x.bc(22,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(23," Favorito "),x.ac(),x.bc(24,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(25," No favorito "),x.ac(),x.bc(26,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(27," Importante "),x.ac(),x.bc(28,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected(t)})),x.Vc(29," No importante "),x.ac(),x.ac(),x.bc(30,"button",1),x.bc(31,"mat-icon"),x.Vc(32,"label"),x.ac(),x.ac(),x.bc(33,"mat-menu",null,4),x.bc(35,"button",3),x.jc("click",(function(t){return e.onTodoOptionSelected({target:{innerText:"Todo"}})})),x.Vc(36," Todo "),x.ac(),x.Tc(37,Ft,2,1,"button",5),x.ac(),x.bc(38,"div",6),x.Vc(39),x.ac(),x.bc(40,"div",7),x.bc(41,"button",8),x.Vc(42," Crear tarea "),x.ac(),x.ac(),x.ac(),x.bc(43,"div",9),x.jc("cdkDropListDropped",(function(t){return e.drop(t)})),x.Tc(44,Gt,2,0,"div",10),x.Tc(45,Ht,37,21,"div",11),x.oc(46,"todoSearch"),x.ac()),2&t){const t=x.Jc(5),i=x.Jc(34);x.Gb(1),x.uc("matMenuTriggerFor",t),x.Gb(29),x.uc("matMenuTriggerFor",i),x.Gb(7),x.uc("ngForOf",e.tags),x.Gb(2),x.Xc(" ",e.filter," "),x.Gb(5),x.uc("ngIf",(null==e.todoList?null:e.todoList.length)<1),x.Gb(1),x.uc("ngForOf",x.qc(46,6,e.todoList,e.searchTerm))}},directives:[b.a,S.e,n.b,m.c,p.a,m.d,m.a,f.l,S.d,S.b,S.c,D.h,Ot,f.m,wt,ft,f.k,At.a,a.b,S.a,a.a],pipes:[jt],styles:[".readed[_ngcontent-%COMP%]{background-color:#d3d3d3}.done[_ngcontent-%COMP%]{background-color:#90ee90}"],changeDetection:0}),t})();class Yt{constructor(t,e,i){this._id=t,this.name=e,this.company=i}}function qt(t,e){if(1&t){const t=x.cc();x.bc(0,"button",9),x.jc("click",(function(e){x.Mc(t);const i=x.nc().$implicit;return x.nc().deleteTag(i)})),x.Vc(1,"Eliminar"),x.ac()}}function Jt(t,e){if(1&t&&(x.bc(0,"div",0),x.bc(1,"span"),x.Vc(2),x.ac(),x.Tc(3,qt,2,0,"button",8),x.ac()),2&t){const t=e.$implicit,i=x.nc();x.Gb(2),x.Wc(t.name),x.Gb(1),x.uc("ngIf","ROLE_ADMIN"!=i.identity.role)}}let Ut=(()=>{class t{constructor(t,e,i,s,o){this.snackBar=t,this.dialogRef=e,this.data=i,this._tagService=s,this._userService=o,this.token=o.getToken(),this.identity=o.getIdentity()}ngOnInit(){this.getTags()}getTags(){this._tagService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.tags&&(this.tags=t.tags)})}addTag(t){let e=new Yt("",t,this.identity.company._id);this._tagService.add(this.token,e).subscribe(t=>{t.tag&&this.getTags()},t=>{this.openSnackBar(t.message,"Cerrar")})}deleteTag(t){this._tagService.delete(this.token,t._id).subscribe(t=>{t.tag&&this.getTags()},t=>{this.openSnackBar(t.message,"Cerrar")})}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(Vt.a),x.Vb(d.g),x.Vb(d.a),x.Vb(It),x.Vb(Pt.a))},t.\u0275cmp=x.Pb({type:t,selectors:[["app-tag-dialogue"]],decls:12,vars:1,consts:[["fxLayout","row","fxLayoutAlign","space-between center"],["matInput","","placeholder","Nueva etiqueta","required","",3,"keyup.enter"],["tagInput",""],["color","primary","mat-raised-button","",3,"click"],["fxLayout","column","fxLayoutGap","16px",2,"margin-top","20px"],["fxLayout","row","fxLayoutAlign","space-between center",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],["color","warn","mat-raised-button","",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"click"]],template:function(t,e){if(1&t){const t=x.cc();x.bc(0,"mat-dialog-content"),x.bc(1,"div",0),x.bc(2,"mat-form-field"),x.bc(3,"input",1,2),x.jc("keyup.enter",(function(i){x.Mc(t);const s=x.Jc(4);return e.addTag(s.value),s.value=""})),x.ac(),x.ac(),x.bc(5,"button",3),x.jc("click",(function(i){x.Mc(t);const s=x.Jc(4);return e.addTag(s.value),s.value=""})),x.Vc(6,"A\xf1adir"),x.ac(),x.ac(),x.bc(7,"div",4),x.Tc(8,Jt,4,2,"div",5),x.ac(),x.ac(),x.bc(9,"mat-dialog-actions",6),x.bc(10,"button",7),x.Vc(11,"Cerrar"),x.ac(),x.ac()}2&t&&(x.Gb(8),x.uc("ngForOf",e.tags))},directives:[d.e,S.d,S.c,u.b,g.b,n.b,S.e,f.l,d.c,d.d,f.m],styles:[""],changeDetection:0}),t})();var Xt=i("3uMe"),Zt=i("47Ty"),Qt=i("AV9v"),Kt=i("sd1j"),te=i("Q2c7"),ee=i("d3UM");function ie(t,e){if(1&t&&(x.bc(0,"button",39),x.bc(1,"mat-icon"),x.Vc(2,"person_add"),x.ac(),x.ac()),2&t){x.nc();const t=x.Jc(10);x.uc("matMenuTriggerFor",t)}}function se(t,e){if(1&t){const t=x.cc();x.bc(0,"button",40),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().setAgent(s)})),x.Vc(1),x.ac()}if(2&t){const t=e.$implicit;x.Gb(1),x.Yc(" ",t.name," ",t.surname," ")}}function oe(t,e){if(1&t){const t=x.cc();x.bc(0,"button",40),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().updateTodoTag(s)})),x.Vc(1),x.ac()}if(2&t){const t=e.$implicit;x.Gb(1),x.Xc(" ",t.name," ")}}function ne(t,e){if(1&t){const t=x.cc();x.bc(0,"div"),x.bc(1,"mat-chip",41),x.jc("removed",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().removeTagFromTodo(s)})),x.bc(2,"span"),x.bc(3,"mat-icon",42),x.Vc(4,"label"),x.ac(),x.Vc(5),x.ac(),x.bc(6,"mat-icon",43),x.Vc(7,"cancel"),x.ac(),x.ac(),x.ac()}if(2&t){const t=e.$implicit;x.Gb(1),x.uc("selectable",!0)("removable",!0),x.Gb(4),x.Wc(t.name)}}function re(t,e){if(1&t){const t=x.cc();x.bc(0,"div"),x.bc(1,"mat-chip",41),x.jc("removed",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().deleteAgent(s)})),x.bc(2,"span"),x.bc(3,"mat-icon",42),x.Vc(4,"person"),x.ac(),x.Vc(5),x.ac(),x.bc(6,"mat-icon",43),x.Vc(7,"cancel"),x.ac(),x.ac(),x.ac()}if(2&t){const t=e.$implicit;x.Gb(1),x.uc("selectable",!0)("removable",!0),x.Gb(4),x.Yc("",t.name," ",t.surname,"")}}function ae(t,e){if(1&t){const t=x.cc();x.bc(0,"mat-option",44),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().setTeam(s)})),x.Vc(1),x.ac()}if(2&t){const t=e.$implicit;x.uc("value",t.name),x.Gb(1),x.Wc(t.name)}}function ce(t,e){if(1&t){const t=x.cc();x.bc(0,"button",45),x.jc("click",(function(e){return x.Mc(t),x.nc(),x.Jc(67).clear(e)})),x.bc(1,"mat-icon"),x.Vc(2,"clear"),x.ac(),x.ac()}}function he(t,e){if(1&t){const t=x.cc();x.bc(0,"div",27),x.bc(1,"mat-chip",46),x.jc("click",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().goToLink(s)}))("removed",(function(i){x.Mc(t);const s=e.$implicit;return x.nc().removeFileFromTodo(s)})),x.bc(2,"span"),x.bc(3,"mat-icon",42),x.Vc(4,"attach_file"),x.ac(),x.Vc(5),x.ac(),x.bc(6,"mat-icon",43),x.Vc(7,"cancel"),x.ac(),x.ac(),x.ac()}if(2&t){const t=e.index;x.Gb(1),x.uc("selectable",!0)("removable",!0),x.Gb(4),x.Xc("Archivo ",t+1,"")}}const de=function(t){return{"fill-color-warn":t}},le=function(t){return{"fill-color-accent":t}};let ue=(()=>{class t{constructor(t,e,i,s,o,n,r,a,c,h,d,l){this.todoService=t,this.tagDialogue=e,this._userService=i,this._todoService=s,this._tagService=o,this._teamService=n,this._notificationService=r,this.router=a,this.snackBar=c,this.route=h,this._uploadService=d,this.cdr=l,this.todo={title:"",note:"",startDate:"",dueDate:"",done:!1,important:!1,starred:!1,read:!1,selected:!1,tags:[],users:[],usersWhoRead:[],files:[]},this.url=Et.a.url,this.teamName="",this.token=i.getToken(),this.identity=i.getIdentity(),this.agentsIn=new Array}ngOnInit(){this.getTodo(),this.getTags(),this.getTeams()}getTodo(){let t=this.route.snapshot.params.id;t&&this._todoService.getOne(this.token,t).subscribe(t=>{t.todo&&(console.log(t.todo),this.todo=t.todo,this.cdr.markForCheck(),this.todo.users&&(this.agentsIn=this.todo.users),this.todo.team&&(this.teamName=this.todo.team.name,this.getAgents(this.todo.team.users)))},t=>{this.openSnackBar(t.message,"Cerrar")})}getAgents(t){this.agents=t}setAgent(t){this.agentsIn.push(t)}deleteAgent(t){this.agentsIn.splice(this.agentsIn.indexOf(t),1)}getTeams(){this._teamService.getList(this.token,this.identity.company._id).subscribe(t=>{t.teams&&(this.teams=t.teams)},t=>{this.openSnackBar(t.message,"Cerrar")})}setTeam(t){this.todo.team=t._id,this.agentsIn=new Array,this.getAgents(t.users)}saveTodo(){if(this.agentsIn){let t=new Array;this.agentsIn.forEach(e=>{t.push(e._id)}),this.todo.users=t}this.todo._id?this._todoService.edit(this.token,this.todo._id,this.todo).subscribe(t=>{t.todo&&(this.uploadFile(t.todo._id),this._notificationService.getList(this.token,{todo:this.todo._id}).subscribe(t=>{t.notifications&&(t.notifications.forEach(t=>{if(-1!=this.todo.users.indexOf(t.user)){this.todo.users.splice(this.todo.users.indexOf(t.user),1),t.message=this.todo.title;let e=Mt(this.todo.startDate).format("YYYY-MM-DD HH:mm");t.date=e,t.dateInit=e,this._notificationService.edit(this.token,t._id,t).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}else this._notificationService.delete(this.token,t._id).subscribe(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}),this.todo.users.length>0&&this.todo.users.forEach(t=>{let e=Mt(this.todo.startDate).format("YYYY-MM-DD HH:mm"),i=new Qt.a("",this.todo.title,"list_alt",e,e,"todo/list/"+this.todo._id,"accent",t,null,this.todo._id);this._notificationService.add(this.token,i).subscribe(t=>{},t=>{})}))},t=>{this.openSnackBar(t.message,"Cerrar")}),this.router.navigateByUrl("/todo/list"))},t=>{this.openSnackBar(t.message,"Cerrar")}):this._todoService.add(this.token,this.todo).subscribe(t=>{t.todo&&(this.uploadFile(t.todo._id),this.todo.users.forEach(e=>{let i=Mt(this.todo.startDate).format("YYYY-MM-DD HH:mm"),s=new Qt.a("",this.todo.title,"list_alt",i,i,"todo/list/"+t.todo._id,"accent",e,null,t.todo._id);this._notificationService.add(this.token,s).subscribe(t=>{},t=>{})}),this.router.navigateByUrl("/todo/list"))},t=>{this.openSnackBar(t.message,"Cerrar")})}uploadFile(t){null!=this.files&&null!=this.files&&this._uploadService.makeFileRequest(this.url+"todo/file/"+t,[],this.files.files,this.token,"file").then(t=>{},t=>{this.openSnackBar(t.message,"Cerrar")})}deleteTodo(){""!=this.todo._id?this._todoService.delete(this.token,this.todo._id).subscribe(t=>{t.todo&&this.router.navigateByUrl("/todo/list")},t=>{this.openSnackBar(t.message,"Cerrar")}):this.router.navigateByUrl("/todo/list")}getTags(){this._tagService.getList(this.token,{company:this.identity.company._id}).subscribe(t=>{t.tags&&(this.tagList=t.tags)},t=>{this.openSnackBar(t.message,"Cerrar")})}updateTodoTag(t){this._todoService.addTag(this.token,this.todo._id,t._id).subscribe(e=>{e.todo&&this.todo.tags.push(t)},t=>{this.openSnackBar(t.message,"Cerrar")})}removeTagFromTodo(t){this._todoService.removeTag(this.token,this.todo._id,t._id).subscribe(e=>{e.todo&&this.todo.tags.splice(this.todo.tags.indexOf(t),1)},t=>{this.openSnackBar(t.message,"Cerrar")})}openTagManaginDialogue(){this.tagDialogue.open(Ut,{}).afterClosed().subscribe(t=>{this.getTags()})}toggleImportant(){this.userInTodo()?this.todo.important=!this.todo.important:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleStar(){this.userInTodo()?this.todo.starred=!this.todo.starred:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleRead(){this.userInTodo()?(1==this.todo.read?this.todo.usersWhoRead.splice(this.todo.usersWhoRead.indexOf(this.identity._id),1):this.todo.usersWhoRead.push(this.identity._id),this.todo.read=!this.todo.read):this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}toggleDone(){this.userInTodo()?this.todo.done=!this.todo.done:this.openSnackBar("No tienes permisos para modificar esta tarea","Cerrar")}userInTodo(){var t;return!!this.todo.users&&-1!=(null===(t=this.todo.users)||void 0===t?void 0:t.map(t=>t._id).indexOf(this.identity._id))}openSnackBar(t,e){this.snackBar.open(t,e,{duration:1e4})}checkExt(t){let e=t.split(".")[1];return("pdf"==e||"xlsx"==e||"xls"==e||"msg"==e||"docx"==e||"odt"==e||"rar"==e||"zip"==e||"png"==e||"jpge"==e||"jpeg"==e||"jpg"==e||"tif"==e||"tiff"==e)&&e}goToLink(t){window.open(this.url+"todo/file/"+t,"_blank")}removeFileFromTodo(t){this.todo.files.splice(this.todo.files.indexOf(t),1)}}return t.\u0275fac=function(e){return new(e||t)(x.Vb(k),x.Vb(d.b),x.Vb(Pt.a),x.Vb(Lt.a),x.Vb(It),x.Vb(Xt.a),x.Vb(Zt.a),x.Vb(D.g),x.Vb(Vt.a),x.Vb(D.a),x.Vb(te.a),x.Vb(x.h))},t.\u0275cmp=x.Pb({type:t,selectors:[["app-todo-details"]],features:[x.Fb([{provide:c.c,useClass:Kt.b},{provide:c.f,useValue:Kt.a},Zt.a,te.a])],decls:78,vars:36,consts:[["mat-icon-button","","routerLink","/todo/list"],[2,"margin-left","16px","font-size","14px",3,"checked","change"],["fxLayout","row","fxFlex","1 1 0%","fxLayoutAlign","end center"],["mat-icon-button","","matTooltip","A\xf1adir responsable",3,"matMenuTriggerFor",4,"ngIf"],[3,"xPosition"],["users","matMenu"],["style","text-transform: capitalize;","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"matTooltip","click"],[3,"ngClass"],["mat-icon-button","","matTooltip","Etiquetas",3,"click"],["mat-icon-button","","matTooltip","A\xf1adir etiqueta",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-icon-button","","matTooltip","Eliminar",3,"click"],[2,"margin","20px 0px 0px 16px"],["chipListTag",""],[4,"ngFor","ngForOf"],["chipListAgent",""],["fxLayout","column","fxLayoutGap","8px",2,"padding","0px 16px","margin-top","20px",3,"ngSubmit"],["type","text","name","title","matInput","","placeholder","T\xedtulo","required","",3,"ngModel","ngModelChange"],["name","note","matInput","","placeholder","Nota","matTextareaAutosize","",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","50px"],["name","startDate","matInput","","placeholder","Fecha de inicio","required","",3,"ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["name","dueDate","matInput","","placeholder","Fecha de vencimiento","required","",3,"ngModel","matDatepicker","ngModelChange"],["picker2",""],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["name","teamName",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["fxFlex","","name","files","placeholder","Adjuntar archivos","multiple","",3,"ngModel","ngModelChange"],["removableInput",""],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["fxFlex","6px"],["chipListFile",""],["fxFlex","",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["type","button","mat-button","","routerLink","/todo/list"],["color","primary","mat-raised-button",""],["mat-icon-button","","matTooltip","A\xf1adir responsable",3,"matMenuTriggerFor"],["mat-menu-item","",2,"text-transform","capitalize",3,"click"],["fxLayout","row","fxLayoutAlign","center center",3,"selectable","removable","removed"],[2,"font-size","18px"],["matChipRemove",""],[3,"value","click"],["mat-icon-button","","matSuffix","",3,"click"],["fxLayout","row","fxLayoutAlign","center center",3,"selectable","removable","click","removed"]],template:function(t,e){if(1&t&&(x.bc(0,"mat-toolbar"),x.bc(1,"button",0),x.bc(2,"mat-icon"),x.Vc(3,"arrow_back"),x.ac(),x.ac(),x.bc(4,"mat-checkbox",1),x.jc("change",(function(t){return e.toggleDone()})),x.bc(5,"span"),x.Vc(6),x.ac(),x.ac(),x.bc(7,"div",2),x.Tc(8,ie,3,1,"button",3),x.bc(9,"mat-menu",4,5),x.Tc(11,se,2,2,"button",6),x.ac(),x.bc(12,"button",7),x.jc("click",(function(t){return e.toggleRead()})),x.bc(13,"mat-icon"),x.Vc(14),x.ac(),x.ac(),x.bc(15,"button",7),x.jc("click",(function(t){return e.toggleImportant()})),x.bc(16,"mat-icon",8),x.Vc(17),x.ac(),x.ac(),x.bc(18,"button",7),x.jc("click",(function(t){return e.toggleStar()})),x.bc(19,"mat-icon",8),x.Vc(20),x.ac(),x.ac(),x.bc(21,"button",9),x.jc("click",(function(t){return e.openTagManaginDialogue()})),x.bc(22,"mat-icon"),x.Vc(23,"library_add"),x.ac(),x.ac(),x.bc(24,"button",10),x.bc(25,"mat-icon"),x.Vc(26,"label"),x.ac(),x.ac(),x.bc(27,"mat-menu",4,11),x.Tc(29,oe,2,1,"button",6),x.ac(),x.bc(30,"button",12),x.jc("click",(function(t){return e.deleteTodo()})),x.bc(31,"mat-icon"),x.Vc(32,"delete_outline"),x.ac(),x.ac(),x.ac(),x.ac(),x.bc(33,"div",13),x.bc(34,"mat-chip-list",null,14),x.Tc(36,ne,8,3,"div",15),x.ac(),x.bc(37,"mat-chip-list",null,16),x.Tc(39,re,8,4,"div",15),x.ac(),x.ac(),x.bc(40,"form",17),x.jc("ngSubmit",(function(t){return e.saveTodo()})),x.bc(41,"mat-form-field"),x.bc(42,"input",18),x.jc("ngModelChange",(function(t){return e.todo.title=t})),x.ac(),x.ac(),x.bc(43,"mat-form-field"),x.bc(44,"textarea",19),x.jc("ngModelChange",(function(t){return e.todo.note=t})),x.ac(),x.ac(),x.bc(45,"div",20),x.bc(46,"mat-form-field"),x.bc(47,"input",21),x.jc("ngModelChange",(function(t){return e.todo.startDate=t})),x.ac(),x.Wb(48,"mat-datepicker-toggle",22),x.Wb(49,"mat-datepicker",null,23),x.ac(),x.bc(51,"mat-form-field"),x.bc(52,"input",24),x.jc("ngModelChange",(function(t){return e.todo.dueDate=t})),x.ac(),x.Wb(53,"mat-datepicker-toggle",22),x.Wb(54,"mat-datepicker",null,25),x.ac(),x.ac(),x.bc(56,"div",26),x.bc(57,"mat-form-field",27),x.bc(58,"mat-label"),x.Vc(59,"Equipo"),x.ac(),x.bc(60,"mat-select",28),x.jc("ngModelChange",(function(t){return e.teamName=t})),x.bc(61,"mat-option"),x.Vc(62),x.ac(),x.Tc(63,ae,2,2,"mat-option",29),x.ac(),x.ac(),x.ac(),x.bc(64,"div",26),x.bc(65,"mat-form-field"),x.bc(66,"ngx-mat-file-input",30,31),x.jc("ngModelChange",(function(t){return e.files=t})),x.ac(),x.Tc(68,ce,3,0,"button",32),x.ac(),x.Wb(69,"span",33),x.bc(70,"mat-chip-list",null,34),x.Tc(72,he,8,3,"div",35),x.ac(),x.ac(),x.bc(73,"div",36),x.bc(74,"button",37),x.Vc(75,"Cancelar"),x.ac(),x.bc(76,"button",38),x.Vc(77,"Guardar"),x.ac(),x.ac(),x.ac()),2&t){const t=x.Jc(28),i=x.Jc(50),s=x.Jc(55),o=x.Jc(67);x.Gb(4),x.uc("checked",e.todo.done),x.Gb(2),x.Xc(" ",e.todo.done?"Marcar como no realizado":"Marcar como realizado"," "),x.Gb(2),x.uc("ngIf",e.todo.team),x.Gb(1),x.uc("xPosition","before"),x.Gb(2),x.uc("ngForOf",e.agents),x.Gb(1),x.vc("matTooltip",null!=e.todo.usersWhoRead&&e.todo.usersWhoRead.includes(e.identity._id)?"Marcar como no le\xeddo":"Marcar como le\xeddo"),x.Gb(2),x.Wc(null!=e.todo.usersWhoRead&&e.todo.usersWhoRead.includes(e.identity._id)?"drafts":"markunread"),x.Gb(1),x.vc("matTooltip",e.todo.important?"Marcar como no importante":"Marcar como importante"),x.Gb(1),x.uc("ngClass",x.Ac(32,de,null==e.todo?null:e.todo.important)),x.Gb(1),x.Wc(e.todo.important?"error":"error_outline"),x.Gb(1),x.vc("matTooltip",e.todo.starred?"Remover de favoritos":"Marcar como favorito"),x.Gb(1),x.uc("ngClass",x.Ac(34,le,null==e.todo?null:e.todo.starred)),x.Gb(1),x.Wc(e.todo.starred?"star":"star_outline"),x.Gb(4),x.uc("matMenuTriggerFor",t),x.Gb(3),x.uc("xPosition","before"),x.Gb(2),x.uc("ngForOf",e.tagList),x.Gb(7),x.uc("ngForOf",null==e.todo?null:e.todo.tags),x.Gb(3),x.uc("ngForOf",e.agentsIn),x.Gb(3),x.uc("ngModel",e.todo.title),x.Gb(2),x.uc("ngModel",e.todo.note),x.Gb(3),x.uc("ngModel",e.todo.startDate)("matDatepicker",i),x.Gb(1),x.uc("for",i),x.Gb(4),x.uc("ngModel",e.todo.dueDate)("matDatepicker",s),x.Gb(1),x.uc("for",s),x.Gb(7),x.uc("ngModel",e.teamName),x.Gb(2),x.Wc(e.teamName),x.Gb(1),x.uc("ngForOf",e.teams),x.Gb(3),x.uc("ngModel",e.files),x.Gb(2),x.uc("ngIf",!o.empty),x.Gb(4),x.uc("ngForOf",null==e.todo?null:e.todo.files)}},directives:[b.a,n.b,D.h,p.a,r.a,S.d,S.b,S.c,f.m,m.d,f.l,_.a,f.k,At.a,m.c,a.b,o.x,o.o,o.p,S.e,u.b,g.b,o.c,o.u,o.n,o.q,g.d,h.b,h.d,u.f,h.a,u.e,ee.a,c.p,v.a,m.a,a.a,a.c],styles:[""],changeDetection:0}),t})();const pe=[{path:"",component:T,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:$t},{path:"add",component:ue},{path:"list/:id",component:ue}]}];let ge=(()=>{class t{}return t.\u0275mod=x.Tb({type:t}),t.\u0275inj=x.Sb({factory:function(e){return new(e||t)},imports:[[D.k.forChild(pe)],D.k]}),t})();var me=i("YUcS");i.d(e,"TodoModule",(function(){return be}));let be=(()=>{class t{}return t.\u0275mod=x.Tb({type:t}),t.\u0275inj=x.Sb({factory:function(e){return new(e||t)},providers:[Pt.a,Lt.a,It,Xt.a],imports:[[f.c,ge,p.b,r.b,o.j,m.b,n.c,v.b,u.d,l.b,Ct,me.a,c.v,b.b,g.c,h.c,c.n,g.c,o.t,_.b,d.f,ee.b,a.d,s.c]]}),t})()}}]);